"use strict";(globalThis.webpackChunkhudi=globalThis.webpackChunkhudi||[]).push([[9935],{28453(e,i,n){n.d(i,{R:()=>t,x:()=>o});var r=n(96540);const s={},a=r.createContext(s);function t(e){const i=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(a.Provider,{value:i},e.children)}},79765(e,i,n){n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"release-1.1.1","title":"Release 1.1.1","description":"Release 1.1.1","source":"@site/releases/release-1.1.1.md","sourceDirName":".","slug":"/release-1.1.1","permalink":"/releases/release-1.1.1","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Release 1.1.1","layout":"releases","toc":true},"sidebar":"releases","previous":{"title":"Download","permalink":"/releases/download"},"next":{"title":"Release 1.0.2","permalink":"/releases/release-1.0.2"}}');var s=n(74848),a=n(28453);const t={title:"Release 1.1.1",layout:"releases",toc:!0},o=void 0,l={},d=[{value:"Release 1.1.1",id:"release-111",level:2},{value:"Highlights",id:"highlights",level:2},{value:"New Features",id:"new-features",level:2},{value:"Table Format",id:"table-format",level:3},{value:"Pluggable Table Format Support",id:"pluggable-table-format-support",level:4},{value:"Table Version 9 with Index Versioning",id:"table-version-9-with-index-versioning",level:4},{value:"Indexing",id:"indexing",level:3},{value:"Partitioned Record Index",id:"partitioned-record-index",level:4},{value:"Partition-Level Bucket Index",id:"partition-level-bucket-index",level:4},{value:"Native HFile Writer",id:"native-hfile-writer",level:4},{value:"HFile Performance Enhancements",id:"hfile-performance-enhancements",level:4},{value:"Column Stats V2 with Enhanced Data Type Support",id:"column-stats-v2-with-enhanced-data-type-support",level:4},{value:"Table Services",id:"table-services",level:3},{value:"Parquet Binary Copy",id:"parquet-binary-copy",level:4},{value:"Incremental Table Service Scheduling",id:"incremental-table-service-scheduling",level:4},{value:"Concurrency Control",id:"concurrency-control",level:3},{value:"Storage-based Lock Provider",id:"storage-based-lock-provider",level:4},{value:"Writers &amp; Readers",id:"writers--readers",level:3},{value:"Multiple Ordering Fields",id:"multiple-ordering-fields",level:4},{value:"Efficient Streaming Reads for Data Blocks",id:"efficient-streaming-reads-for-data-blocks",level:4},{value:"ORC Support in FileGroupReader",id:"orc-support-in-filegroupreader",level:4},{value:"Hive Schema Evolution Support",id:"hive-schema-evolution-support",level:4},{value:"Spark",id:"spark",level:3},{value:"Spark 4.0 Support",id:"spark-40-support",level:4},{value:"Metadata Table Streaming Writes",id:"metadata-table-streaming-writes",level:4},{value:"SQL Procedures Enhancements",id:"sql-procedures-enhancements",level:4},{value:"Flink",id:"flink",level:3},{value:"Flink 2.0 Support",id:"flink-20-support",level:4},{value:"Performance Improvements",id:"performance-improvements",level:4},{value:"New Capabilities",id:"new-capabilities",level:4},{value:"Catalogs",id:"catalogs",level:3},{value:"Polaris Integration",id:"polaris-integration",level:4},{value:"AWS Glue &amp; DataHub Sync Enhancements",id:"aws-glue--datahub-sync-enhancements",level:4},{value:"Platform Components",id:"platform-components",level:3},{value:"Enhanced JSON-to-Avro Conversion for HudiStreamer",id:"enhanced-json-to-avro-conversion-for-hudistreamer",level:4},{value:"Prometheus Multi-table Support",id:"prometheus-multi-table-support",level:4},{value:"API Changes &amp; Deprecations",id:"api-changes--deprecations",level:2},{value:"Deprecation of HoodieRecordPayload",id:"deprecation-of-hoodierecordpayload",level:3},{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"Complex Key Generator Regression Fix",id:"complex-key-generator-regression-fix",level:3},{value:"Removal of Auto-Commit Support in WriteClient",id:"removal-of-auto-commit-support-in-writeclient",level:3},{value:"INSERT INTO Behavior Change",id:"insert-into-behavior-change",level:3},{value:"Restriction on Multiple Bulk Inserts for COW with Simple Bucket",id:"restriction-on-multiple-bulk-inserts-for-cow-with-simple-bucket",level:3},{value:"Flink Bucket Index Restriction",id:"flink-bucket-index-restriction",level:3},{value:"Behavior Changes",id:"behavior-changes",level:2},{value:"Default Merge Mode Changed",id:"default-merge-mode-changed",level:3},{value:"Incremental Query Fallback Behavior",id:"incremental-query-fallback-behavior",level:3},{value:"Incremental Query Start Time Semantics",id:"incremental-query-start-time-semantics",level:3},{value:"Timestamp Logical Type Handling",id:"timestamp-logical-type-handling",level:3},{value:"Flink Bucket Index Append Mode Restriction",id:"flink-bucket-index-append-mode-restriction",level:3},{value:"Upgrade Notes",id:"upgrade-notes",level:2},{value:"Hudi Version Support",id:"hudi-version-support",level:2},{value:"End of Life for Hudi Versions Prior to 0.14.0",id:"end-of-life-for-hudi-versions-prior-to-0140",level:3},{value:"Contributors",id:"contributors",level:2}];function c(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"release-111",children:(0,s.jsx)(i.a,{href:"https://github.com/apache/hudi/releases/tag/release-1.1.1",children:"Release 1.1.1"})}),"\n",(0,s.jsx)(i.p,{children:"Apache Hudi 1.1.1 is a major release that brings significant performance improvements, new features, and important changes to the platform. This release focuses on enhanced table format support, improved indexing capabilities, expanded engine support, and modernized record merging APIs."}),"\n",(0,s.jsx)(i.h2,{id:"highlights",children:"Highlights"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Pluggable Table Format Framework"})," - Native integration of multiple table formats with unified metadata management"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Spark 4.0 and Flink 2.0 Support"})," - Full support for latest major compute engine versions"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Enhanced Indexing"})," - Partitioned record index, partition-level bucket index, native HFile writer, and column stats V2"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Performance Boost"})," - 2-3x Flink write throughput improvements and 4x metadata table read speedup"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Table Services Optimization"})," - Parquet binary copy and incremental scheduling for compaction/clustering"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Storage-based Lock Provider"})," - Multi-writer concurrency control without external dependencies"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Record Merging Evolution"})," - Deprecation of payload classes in favor of merge modes and merger APIs"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"new-features",children:"New Features"}),"\n",(0,s.jsx)(i.h3,{id:"table-format",children:"Table Format"}),"\n",(0,s.jsx)(i.h4,{id:"pluggable-table-format-support",children:"Pluggable Table Format Support"}),"\n",(0,s.jsxs)(i.p,{children:["Hudi 1.1.1 introduces a new ",(0,s.jsx)(i.a,{href:"/docs/hudi_stack#pluggable-table-format",children:"Pluggable Table Format"})," framework that enables native integration of multiple table formats within the system. This foundation includes a base interface for pluggable table formats, designed to simplify extension and allow seamless interoperability across different storage backends. The Metadata Table (MDT) integration has been enhanced to support pluggability, ensuring modularity and unified metadata management across all supported table formats."]}),"\n",(0,s.jsxs)(i.p,{children:["This release brings native Hudi integration through the new framework, allowing users to leverage Hudi's advanced capabilities directly while maintaining consistent semantics and performance. The configuration ",(0,s.jsx)(i.code,{children:"hoodie.table.format"})," is set to ",(0,s.jsx)(i.code,{children:"native"})," by default, which works as the Hudi table format. ",(0,s.jsx)(i.strong,{children:"No configuration changes are required"})," for existing and new Hudi tables. As additional table formats are supported in future releases, users will be able to set this configuration to work natively with other formats. ",(0,s.jsx)(i.a,{href:"https://xtable.apache.org/",children:"Apache XTable (Incubating)"})," provides pluggable format adapters for formats like Iceberg and Delta Lake."]}),"\n",(0,s.jsx)(i.h4,{id:"table-version-9-with-index-versioning",children:"Table Version 9 with Index Versioning"}),"\n",(0,s.jsx)(i.p,{children:"Hudi 1.1.1 introduces table version 9 with support for index versioning. Indexes in the Metadata Table (column stats, secondary index, expression index, etc) now have version tracking. In 1.1.1, these indexes use V2 layouts with enhanced capabilities including comprehensive logical data type support. Tables migrated from older versions will retain V1 index layouts, while new tables created with 1.1.1 use V2. Both versions remain backward compatible, and no action is required when upgrading to 1.1.1."}),"\n",(0,s.jsx)(i.h3,{id:"indexing",children:"Indexing"}),"\n",(0,s.jsx)(i.h4,{id:"partitioned-record-index",children:"Partitioned Record Index"}),"\n",(0,s.jsxs)(i.p,{children:["In addition to the global record index introduced in 0.14.0, Hudi 1.1.1 adds a partitioned variant that guarantees uniqueness for partition path and record key pairs. This index speeds up lookups in very large partitioned datasets. For more details, see ",(0,s.jsx)(i.a,{href:"/docs/indexes#record-index",children:"record index"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"Prior to 1.1.1, only global record index was available, configured as:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-properties",children:"hoodie.metadata.record.index.enable=true\nhoodie.index.type=RECORD_INDEX\n"})}),"\n",(0,s.jsx)(i.p,{children:"From 1.1.1 onwards, both global and partitioned variants are available:"}),"\n",(0,s.jsx)(i.p,{children:"For partitioned record index:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Metadata table: ",(0,s.jsx)(i.code,{children:"hoodie.metadata.record.level.index.enable=true"})]}),"\n",(0,s.jsxs)(i.li,{children:["Write index: ",(0,s.jsx)(i.code,{children:"hoodie.index.type=RECORD_LEVEL_INDEX"})]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"For global record index:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Metadata table: ",(0,s.jsx)(i.code,{children:"hoodie.metadata.global.record.level.index.enable=true"})]}),"\n",(0,s.jsxs)(i.li,{children:["Write index: ",(0,s.jsx)(i.code,{children:"hoodie.index.type=GLOBAL_RECORD_LEVEL_INDEX"})]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"partition-level-bucket-index",children:"Partition-Level Bucket Index"}),"\n",(0,s.jsx)(i.p,{children:"A new bucket index type that addresses bucket rescaling challenges. Users can set specific bucket numbers for different partitions through a rule engine (regex pattern matching). Existing bucket index tables can be upgraded smoothly and seamlessly."}),"\n",(0,s.jsx)(i.p,{children:"Key Configurations:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"hoodie.bucket.index.partition.rule.type"})," - Rule parser for expressions (default: regex)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"hoodie.bucket.index.partition.expressions"})," - Expression and bucket number pairs"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"hoodie.bucket.index.num.buckets"})," - Default bucket count for partitions"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["For more details, see ",(0,s.jsx)(i.a,{href:"https://github.com/apache/hudi/pull/12884/",children:"RFC-89"})," and ",(0,s.jsx)(i.a,{href:"/docs/indexes#additional-writer-side-indexes",children:"bucket index"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"native-hfile-writer",children:"Native HFile Writer"}),"\n",(0,s.jsx)(i.p,{children:"Hudi now includes a native HFile writer, eliminating dependencies on HBase while ensuring compatibility with both HBase's HFile reader and Hudi's native reader. This significantly reduces the size of Hudi's binary bundle and enhances Hudi's ability to optimize HFile performance."}),"\n",(0,s.jsx)(i.h4,{id:"hfile-performance-enhancements",children:"HFile Performance Enhancements"}),"\n",(0,s.jsx)(i.p,{children:"Multiple enhancements to speed up metadata table reads:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["HFile Block Cache (enabled by default): Caches HFile data blocks on repeated reads within the same JVM, showing ~4x speedup in benchmarks. Configure with ",(0,s.jsx)(i.code,{children:"hoodie.hfile.block.cache.enabled"})]}),"\n",(0,s.jsxs)(i.li,{children:["HFile Prefetching: For files under 50MB (configurable via ",(0,s.jsx)(i.code,{children:"hoodie.metadata.file.cache.max.size.mb"}),"), downloads entire HFile upfront rather than multiple RPC calls"]}),"\n",(0,s.jsxs)(i.li,{children:["Bloom Filter Support: Speeds up HFile lookups by avoiding unnecessary block downloads. Configure with ",(0,s.jsx)(i.code,{children:"hoodie.metadata.bloom.filter.enable"})]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"column-stats-v2-with-enhanced-data-type-support",children:"Column Stats V2 with Enhanced Data Type Support"}),"\n",(0,s.jsx)(i.p,{children:"column stats V2 significantly improves support for logical data types during writes and statistics collection. Logical types like decimals (with precision/scale) and timestamps are now preserved with proper metadata, improving accuracy for query planning and predicate pushdown."}),"\n",(0,s.jsx)(i.h3,{id:"table-services",children:"Table Services"}),"\n",(0,s.jsx)(i.h4,{id:"parquet-binary-copy",children:"Parquet Binary Copy"}),"\n",(0,s.jsxs)(i.p,{children:["An optimization that enables direct copying of RowGroup-level data from Parquet files during operations like clustering, bypassing expensive compression/decompression, encoding/decoding, and column-to-row conversions. This optimization supports proper schema evolution and ensures Hudi metadata are collected and aggregated correctly. Experimental results show a ",(0,s.jsx)(i.strong,{children:"95% reduction in computational workload"})," for clustering operations."]}),"\n",(0,s.jsx)(i.h4,{id:"incremental-table-service-scheduling",children:"Incremental Table Service Scheduling"}),"\n",(0,s.jsxs)(i.p,{children:["Significantly improves performance of compaction and clustering operations on tables with large numbers of partitions. Instead of scanning all partitions during each scheduling run, incremental scheduling only processes partitions that have changed since the last completed table service operation. Enabled by default via ",(0,s.jsx)(i.code,{children:"hoodie.table.services.incremental.enabled"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["For more details, see ",(0,s.jsx)(i.a,{href:"/docs/compaction#incremental-scheduling",children:"Incremental Scheduling in Compaction"})," and ",(0,s.jsx)(i.a,{href:"/docs/clustering#incremental-scheduling",children:"Incremental Scheduling in Clustering"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"concurrency-control",children:"Concurrency Control"}),"\n",(0,s.jsx)(i.h4,{id:"storage-based-lock-provider",children:"Storage-based Lock Provider"}),"\n",(0,s.jsxs)(i.p,{children:["A new storage-based lock provider enables Hudi to manage multi-writer concurrency directly using the ",(0,s.jsx)(i.code,{children:".hoodie"})," directory in the underlying storage, eliminating the need for external lock providers like DynamoDB or ZooKeeper. Currently supports S3 and GCS, with lock information maintained under ",(0,s.jsx)(i.code,{children:".hoodie/.lock"}),". For more details, see ",(0,s.jsx)(i.a,{href:"/docs/concurrency_control#storage-based-lock-provider",children:"Storage-Based Lock Provider"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"writers--readers",children:"Writers & Readers"}),"\n",(0,s.jsx)(i.h4,{id:"multiple-ordering-fields",children:"Multiple Ordering Fields"}),"\n",(0,s.jsx)(i.p,{children:"Support for multiple ordering fields, a.k.a. precombine fields (deprecated name), using comma-separated lists. When records have the same key, Hudi compares the fields in order and keeps the record with the latest values."}),"\n",(0,s.jsxs)(i.p,{children:["Configuration: ",(0,s.jsx)(i.code,{children:"hoodie.table.ordering.fields = field1,field2,field3"})]}),"\n",(0,s.jsx)(i.h4,{id:"efficient-streaming-reads-for-data-blocks",children:"Efficient Streaming Reads for Data Blocks"}),"\n",(0,s.jsx)(i.p,{children:"Support for efficient streaming reads of HoodieDataBlocks (currently for AvroDataBlock) reduces memory usage, improves read stability on HDFS, and lowers the risk of timeouts and OOM errors when reading log files."}),"\n",(0,s.jsx)(i.h4,{id:"orc-support-in-filegroupreader",children:"ORC Support in FileGroupReader"}),"\n",(0,s.jsx)(i.p,{children:"Enhanced support for multiple base file formats (ORC and Parquet) in HoodieFileGroupReader. The 1.1.1 release introduced SparkColumnarFileReader trait and MultipleColumnarFileFormatReader to uniformly handle ORC and Parquet records for both Merge-on-Read (MOR) and Copy-on-Write (COW) tables."}),"\n",(0,s.jsx)(i.h4,{id:"hive-schema-evolution-support",children:"Hive Schema Evolution Support"}),"\n",(0,s.jsx)(i.p,{children:"Hive readers can now handle schema evolution when schema-on-write is used."}),"\n",(0,s.jsx)(i.h3,{id:"spark",children:"Spark"}),"\n",(0,s.jsx)(i.h4,{id:"spark-40-support",children:"Spark 4.0 Support"}),"\n",(0,s.jsxs)(i.p,{children:["Spark 4.0 is now supported with necessary compatibility and dependency changes. Available through the new ",(0,s.jsx)(i.code,{children:"hudi-spark4.0-bundle_2.13"})," release artifact. For more details, see ",(0,s.jsx)(i.a,{href:"/docs/quick-start-guide#spark-support-matrix",children:"Spark Quick Start"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"metadata-table-streaming-writes",children:"Metadata Table Streaming Writes"}),"\n",(0,s.jsxs)(i.p,{children:["Streaming writes to the metadata table enable more efficient metadata record generation by processing data table and metadata table writes in the same execution chain, avoiding on-demand lookups. Enabled by default for Spark via ",(0,s.jsx)(i.code,{children:"hoodie.metadata.streaming.write.enabled"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"sql-procedures-enhancements",children:"SQL Procedures Enhancements"}),"\n",(0,s.jsx)(i.p,{children:"New CLEAN Procedures:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"show_cleans"})," - Displays completed cleaning operations with metadata"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"show_clean_plans"})," - Shows clean operations in all states (REQUESTED, INFLIGHT, COMPLETED)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"show_cleans_metadata"})," - Provides partition-level cleaning details"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Enhanced Capabilities:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Regex pattern support in ",(0,s.jsx)(i.code,{children:"run_clustering"})," via ",(0,s.jsx)(i.code,{children:"partition_regex_pattern"})," parameter"]}),"\n",(0,s.jsxs)(i.li,{children:["Base path and filter parameters for all non-action ",(0,s.jsx)(i.code,{children:"SHOW"})," procedures with advanced predicate expressions"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["For more details, see ",(0,s.jsx)(i.a,{href:"/docs/procedures",children:"SQL Procedures"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"flink",children:"Flink"}),"\n",(0,s.jsx)(i.h4,{id:"flink-20-support",children:"Flink 2.0 Support"}),"\n",(0,s.jsxs)(i.p,{children:["Full support for Flink 2.0 including sink, read, catalog, and new bundle artifact ",(0,s.jsx)(i.code,{children:"hudi-flink2.0-bundle"}),". Includes compatibility fixes for legacy APIs and supports sinkV2 API by default."]}),"\n",(0,s.jsx)(i.p,{children:"Deprecation: Removed support for Flink 1.14, 1.15, and 1.16"}),"\n",(0,s.jsxs)(i.p,{children:["For more details, see ",(0,s.jsx)(i.a,{href:"/docs/flink-quick-start-guide#flink-support-matrix",children:"Flink Quick Start"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"performance-improvements",children:"Performance Improvements"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Engine-native Record Support: Eliminates Avro transformations, utilizing RowData directly for more efficient serialization/deserialization. Write/read performance improved by ",(0,s.jsx)(i.strong,{children:"2-3x on average"})]}),"\n",(0,s.jsx)(i.li,{children:"Async Instant Time Generation: Significantly improves stability for high throughput workloads by avoiding blocking on instant time generation"}),"\n",(0,s.jsxs)(i.li,{children:["Meta Fields Control: Support for ",(0,s.jsx)(i.code,{children:"hoodie.populate.meta.fields"})," in append mode, showing 14% faster writes when disabled"]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"new-capabilities",children:"New Capabilities"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["In-memory Buffer Sort: For pk-less tables, enables better compaction ratio for columnar formats (",(0,s.jsx)(i.code,{children:"write.buffer.sort.enabled"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["Split-level Rate Limiting: Configure maximum splits per instant check for streaming reads (",(0,s.jsx)(i.code,{children:"read.splits.limit"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["For more details, see ",(0,s.jsx)(i.a,{href:"/docs/ingestion_flink",children:"Using Flink"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"catalogs",children:"Catalogs"}),"\n",(0,s.jsx)(i.h4,{id:"polaris-integration",children:"Polaris Integration"}),"\n",(0,s.jsx)(i.p,{children:"Integration with Polaris catalog by delegating table creation to the Polaris Spark client, allowing Hudi tables to be registered in the Polaris Catalog."}),"\n",(0,s.jsxs)(i.p,{children:["Configuration: ",(0,s.jsx)(i.code,{children:"hoodie.datasource.polaris.catalog.class"})," (default: ",(0,s.jsx)(i.code,{children:"org.apache.polaris.spark.SparkCatalog"}),"). For more details, see ",(0,s.jsx)(i.a,{href:"/docs/catalog_polaris",children:"Polaris catalog"}),"."]}),"\n",(0,s.jsx)(i.h4,{id:"aws-glue--datahub-sync-enhancements",children:"AWS Glue & DataHub Sync Enhancements"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"CatalogId support for cross-catalog scenarios"}),"\n",(0,s.jsx)(i.li,{children:"Explicit database and table name configuration"}),"\n",(0,s.jsx)(i.li,{children:"Resource tagging for Glue databases and tables"}),"\n",(0,s.jsx)(i.li,{children:"TLS/HTTPS support for DataHub with custom CA certificates and mutual-TLS"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"platform-components",children:"Platform Components"}),"\n",(0,s.jsx)(i.h4,{id:"enhanced-json-to-avro-conversion-for-hudistreamer",children:"Enhanced JSON-to-Avro Conversion for HudiStreamer"}),"\n",(0,s.jsx)(i.p,{children:"Improved JSON-to-Avro conversion layer for better reliability of the Kafka JSON source."}),"\n",(0,s.jsx)(i.h4,{id:"prometheus-multi-table-support",children:"Prometheus Multi-table Support"}),"\n",(0,s.jsx)(i.p,{children:"Improved PrometheusReporter with reference-counting mechanism to prevent shared HTTP server shutdown when stopping metrics for individual tables."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"api-changes--deprecations",children:"API Changes & Deprecations"}),"\n",(0,s.jsx)(i.h3,{id:"deprecation-of-hoodierecordpayload",children:"Deprecation of HoodieRecordPayload"}),"\n",(0,s.jsxs)(i.p,{children:["Payload classes are now ",(0,s.jsx)(i.strong,{children:"deprecated"})," in favor of merge modes and the merger API. The payload-based approach was closely tied to Avro-formatted records, making it less compatible with native query engine formats like Spark InternalRow."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Migration Path"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Standard Use Cases: Use merge mode configurations (",(0,s.jsx)(i.code,{children:"COMMIT_TIME_ORDERING"})," or ",(0,s.jsx)(i.code,{children:"EVENT_TIME_ORDERING"}),")"]}),"\n",(0,s.jsxs)(i.li,{children:["Custom Logic: Implement ",(0,s.jsx)(i.code,{children:"HoodieRecordMerger"})," interface instead of custom payloads"]}),"\n",(0,s.jsx)(i.li,{children:"Automatic Migration: When upgrading to the latest table version, known payloads are automatically migrated to appropriate merge modes"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"The merge mode approach supports:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Commit time and event time ordering"}),"\n",(0,s.jsxs)(i.li,{children:["Partial update strategies (replaces ",(0,s.jsx)(i.code,{children:"OverwriteNonDefaultsWithLatestAvroPayload"})," and ",(0,s.jsx)(i.code,{children:"PostgresDebeziumAvroPayload"})," toasted value handling)"]}),"\n",(0,s.jsx)(i.li,{children:"Consistent merging semantics across engines"}),"\n",(0,s.jsx)(i.li,{children:"Performance optimizations"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["BufferedRecordMerger API: The ",(0,s.jsx)(i.code,{children:"HoodieRecordMerger"})," interface has been updated to leverage the new ",(0,s.jsx)(i.code,{children:"BufferedRecord"})," class used during record merging."]}),"\n",(0,s.jsxs)(i.p,{children:["For details, see ",(0,s.jsx)(i.a,{href:"https://github.com/apache/hudi/pull/13499",children:"RFC-97"})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,s.jsx)(i.h3,{id:"complex-key-generator-regression-fix",children:"Complex Key Generator Regression Fix"}),"\n",(0,s.jsxs)(i.p,{children:["A regression affecting Complex Key Generator with a single record key field has been fixed. The regression was introduced in versions 0.14.1, 0.15.0, and 1.0.x releases, causing record key encoding to change from ",(0,s.jsx)(i.code,{children:"field_name:field_value"})," to ",(0,s.jsx)(i.code,{children:"field_value"}),", which could lead to duplicate records during upserts."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Who Is Affected"}),": Tables using Complex Key Generator (",(0,s.jsx)(i.code,{children:"ComplexAvroKeyGenerator"})," or ",(0,s.jsx)(i.code,{children:"ComplexKeyGenerator"}),") with a ",(0,s.jsx)(i.strong,{children:"single"})," record key field."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Default Behavior in 1.1.1"}),": Reverts to the correct encoding format (",(0,s.jsx)(i.code,{children:"field_name:field_value"}),") matching 0.14.0 and earlier."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Migration Path"}),":"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Upgrading from \u22640.14.0"}),": No action needed, default behavior is correct"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"New tables created in 0.15.0/1.0.x"}),": Set ",(0,s.jsx)(i.code,{children:"hoodie.write.complex.keygen.new.encoding=true"})," to maintain current encoding"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Upgraded from 0.14.0 \u2192 0.15.0/1.0.x"}),": If you experienced duplicates, data repair may be needed. A repair tool is expected in 1.1.1"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Validation"}),": By default, writes will validate table configuration and alert you if affected. Disable with ",(0,s.jsx)(i.code,{children:"hoodie.write.complex.keygen.validation.enable=false"})," if needed (readers are unaffected)."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Note on Table Version 9"}),": For tables upgraded to version 9, key encoding format is locked to prevent future regressions and ensure correct behavior for record index and Secondary Index."]}),"\n",(0,s.jsxs)(i.p,{children:["For detailed technical information, see the ",(0,s.jsx)(i.a,{href:"https://github.com/apache/hudi/pull/13650/",children:"PR documentation"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"removal-of-auto-commit-support-in-writeclient",children:"Removal of Auto-Commit Support in WriteClient"}),"\n",(0,s.jsxs)(i.p,{children:["For developers using ",(0,s.jsx)(i.code,{children:"HoodieWriteClient"})," directly, auto-commit support has been removed. The ",(0,s.jsx)(i.code,{children:"hoodie.auto.commit"})," configuration is no longer honored."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Migration Required"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",children:"// Previous (with auto-commit)\nHoodieWriteConfig config = // instantiate config\nSparkRDDWriteClient writeClient = new SparkRDDWriteClient(engineContext, config);\nString instantTime = writeClient.startCommit();\nwriteClient.upsert(JavaRDD<HoodieRecord>, instantTime);\n\n// Now Required (explicit commit)\nHoodieWriteConfig config = // instantiate config\nSparkRDDWriteClient writeClient = new SparkRDDWriteClient(engineContext, config);\nString instantTime = writeClient.startCommit();\nJavaRDD<WriteStatus> writeStatus = writeClient.upsert(RDD<HoodieRecord>, instantTime);\nwriteClient.commit(instantTime, writeStatus); // Explicit commit now mandatory\n"})}),"\n",(0,s.jsx)(i.p,{children:"This change applies to table services as well."}),"\n",(0,s.jsx)(i.h3,{id:"insert-into-behavior-change",children:"INSERT INTO Behavior Change"}),"\n",(0,s.jsxs)(i.p,{children:["The default behavior of Spark SQL's ",(0,s.jsx)(i.code,{children:"INSERT INTO"}),' command has changed. Previously, it used "upsert" operation for tables with ordering field(s), which caused deduplication. From 1.1.1, ',(0,s.jsx)(i.code,{children:"INSERT INTO"}),' now performs "insert" operation by default, ingesting records as-is without deduplication.']}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-text",children:"Commit1: \n  Partition1, recordKey1, val1, orderingValue1\n  Partition1, recordKey1, val2, orderingValue2\n\nPre-1.1.1: Returns one record (based on ordering field)\nFrom 1.1.1: Returns both records\n"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"To Restore Previous Behavior"}),": Set ",(0,s.jsx)(i.code,{children:"hoodie.spark.sql.insert.into.operation = upsert"})]}),"\n",(0,s.jsx)(i.h3,{id:"restriction-on-multiple-bulk-inserts-for-cow-with-simple-bucket",children:"Restriction on Multiple Bulk Inserts for COW with Simple Bucket"}),"\n",(0,s.jsxs)(i.p,{children:["Multiple ",(0,s.jsx)(i.code,{children:"bulk_insert"})," operations are now restricted for Copy-On-Write tables when ",(0,s.jsx)(i.strong,{children:"all"})," of the following conditions are met:"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Table type is COW"}),"\n",(0,s.jsxs)(i.li,{children:["Index type is ",(0,s.jsx)(i.code,{children:"BUCKET"})," with engine set to ",(0,s.jsx)(i.code,{children:"SIMPLE"})]}),"\n",(0,s.jsxs)(i.li,{children:["Spark native row writer is disabled (",(0,s.jsx)(i.code,{children:"hoodie.datasource.write.row.writer.enable = false"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Resolution"}),": Use ",(0,s.jsx)(i.code,{children:"upsert"})," operation after the initial ",(0,s.jsx)(i.code,{children:"bulk_insert"}),", or enable Spark native row writer."]}),"\n",(0,s.jsx)(i.h3,{id:"flink-bucket-index-restriction",children:"Flink Bucket Index Restriction"}),"\n",(0,s.jsx)(i.p,{children:"Bucket index now supports only UPSERT operations and cannot be used with append write mode in Flink."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"behavior-changes",children:"Behavior Changes"}),"\n",(0,s.jsx)(i.h3,{id:"default-merge-mode-changed",children:"Default Merge Mode Changed"}),"\n",(0,s.jsx)(i.p,{children:"The default record merging behavior has changed based on whether an ordering field is set:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"No Ordering Field"}),": Defaults to ",(0,s.jsx)(i.code,{children:"COMMIT_TIME_ORDERING"})," using ",(0,s.jsx)(i.code,{children:"OverwriteWithLatestAvroPayload"})," (last-write-wins)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Ordering Field Set"}),": Defaults to ",(0,s.jsx)(i.code,{children:"EVENT_TIME_ORDERING"})," using ",(0,s.jsx)(i.code,{children:"DefaultHoodieRecordPayload"})," (classic event-time based comparison)"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Users should use ",(0,s.jsx)(i.code,{children:"hoodie.table.ordering.fields"})," instead of ",(0,s.jsx)(i.code,{children:"hoodie.datasource.write.precombine.field"})," (deprecated)."]}),"\n",(0,s.jsxs)(i.p,{children:["The default value for ",(0,s.jsx)(i.code,{children:"hoodie.datasource.write.precombine.field"})," (previously ",(0,s.jsx)(i.code,{children:"ts"}),") has been removed."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Why This Change"}),": The previous default required users to have a ",(0,s.jsx)(i.code,{children:"ts"})," field in their schema even for simple upsert cases where last-write-wins was sufficient. The new behavior makes Hudi work out-of-the-box for simple upserts while still supporting event-time ordering when explicitly configured."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Impact on HoodieStreamer"}),": The ",(0,s.jsx)(i.code,{children:"--source-ordering-field"})," parameter no longer defaults to ",(0,s.jsx)(i.code,{children:"ts"}),"."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Before"}),": Automatically enabled ",(0,s.jsx)(i.code,{children:"EVENT_TIME_ORDERING"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Now"}),": Defaults to ",(0,s.jsx)(i.code,{children:"COMMIT_TIME_ORDERING"})," if not specified"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Action Required"}),": For new Deltastreamer jobs needing event-time merging, explicitly provide ",(0,s.jsx)(i.code,{children:"--source-ordering-field ts"})," (or your ordering field)"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Validation Changes"}),": Configuration mismatches now log warnings instead of failing jobs:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Using ",(0,s.jsx)(i.code,{children:"COMMIT_TIME_ORDERING"})," with an ordering field logs a warning that the field is ignored"]}),"\n",(0,s.jsxs)(i.li,{children:["Using ",(0,s.jsx)(i.code,{children:"EVENT_TIME_ORDERING"})," without an ordering field logs a warning instead of failing"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"incremental-query-fallback-behavior",children:"Incremental Query Fallback Behavior"}),"\n",(0,s.jsxs)(i.p,{children:["The default value for ",(0,s.jsx)(i.code,{children:"hoodie.datasource.read.incr.fallback.fulltablescan.enable"})," changed from ",(0,s.jsx)(i.code,{children:"false"})," to ",(0,s.jsx)(i.code,{children:"true"}),". Incremental queries that cannot find necessary commit/data files will now automatically fall back to a full table scan instead of failing."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Performance Impact"}),": Queries that previously failed fast will now succeed but may run significantly slower due to full table scans."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"To Restore Fail-fast Behavior"}),": Set ",(0,s.jsx)(i.code,{children:"hoodie.datasource.read.incr.fallback.fulltablescan.enable = false"})]}),"\n",(0,s.jsx)(i.h3,{id:"incremental-query-start-time-semantics",children:"Incremental Query Start Time Semantics"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"hoodie.datasource.read.begin.instanttime"})," configuration behavior has been reverted to be ",(0,s.jsx)(i.strong,{children:"exclusive"})," (matching 0.x behavior), correcting the inclusive behavior introduced in 1.0.0."]}),"\n",(0,s.jsx)(i.h3,{id:"timestamp-logical-type-handling",children:"Timestamp Logical Type Handling"}),"\n",(0,s.jsxs)(i.p,{children:["With column stats V2, timestamp fields are now correctly handled as ",(0,s.jsx)(i.code,{children:"timestamp_millis"})," instead of ",(0,s.jsx)(i.code,{children:"timestamp_micros"})," (as in 0.15.0 and earlier 1.x releases). The release maintains backward compatibility when reading tables written with older versions."]}),"\n",(0,s.jsx)(i.h3,{id:"flink-bucket-index-append-mode-restriction",children:"Flink Bucket Index Append Mode Restriction"}),"\n",(0,s.jsx)(i.p,{children:"Bucket index now supports only UPSERT operations and cannot be used with append write mode in Flink."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"upgrade-notes",children:"Upgrade Notes"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Review Complex Key Generator Usage"}),": Users upgrading from 0.14.0 or earlier should review their configurations"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update WriteClient Usage"}),": If using ",(0,s.jsx)(i.code,{children:"HoodieWriteClient"})," directly, add explicit commit calls"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Check INSERT INTO Behavior"}),": Verify if your pipelines depend on the old upsert behavior"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Review Merge Mode Configurations"}),": Especially for new tables or when using HoodieStreamer"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Test Incremental Queries"}),": Be aware of new fallback behavior and potential performance impacts"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Flink Version"}),": Ensure you're using Flink 1.17+ or 2.0 (1.14-1.16 no longer supported)"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"hudi-version-support",children:"Hudi Version Support"}),"\n",(0,s.jsx)(i.h3,{id:"end-of-life-for-hudi-versions-prior-to-0140",children:"End of Life for Hudi Versions Prior to 0.14.0"}),"\n",(0,s.jsx)(i.p,{children:"As of this release, Hudi versions prior to 0.14.0 have reached end of life. Users on these older versions should plan to upgrade to 1.1.1 or later to receive ongoing support, bug fixes, and new features. The Hudi community will focus support efforts on versions 0.14.0 and later."}),"\n",(0,s.jsxs)(i.p,{children:["For more details, see the ",(0,s.jsx)(i.a,{href:"https://github.com/apache/hudi/discussions/13847",children:"community discussion"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"contributors",children:"Contributors"}),"\n",(0,s.jsx)(i.p,{children:"Hudi 1.1.1 is the result of contributions from the entire Hudi community. We thank all contributors who made this release possible."})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);