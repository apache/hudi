"use strict";(globalThis.webpackChunkhudi=globalThis.webpackChunkhudi||[]).push([[67884],{1031(e,i,t){t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var a=t(26525),n=t(74848),s=t(28453);const r={title:"Scaling Autonomous Vehicle Data Infrastructure with Apache Hudi at Applied Intuition",excerpt:"How Applied Intuition reduced query times from 10 minutes to under 25 seconds and achieved 20x storage compression by migrating to an Apache Hudi-powered data lakehouse.",author:"The Hudi Community",category:"case-study",image:"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img1.png",tags:["data lakehouse","applied intuition"]},o=void 0,l={authorsImageUrls:[void 0]},d=[{value:"Building a Unique Data Infrastructure",id:"building-a-unique-data-infrastructure",level:2},{value:"The Challenges Before Apache Hudi",id:"the-challenges-before-apache-hudi",level:2},{value:"Leveraging Hudi Features to Shape Data Architecture",id:"leveraging-hudi-features-to-shape-data-architecture",level:2},{value:"File Sizing: Solving the Small File Problem",id:"file-sizing-solving-the-small-file-problem",level:3},{value:"Clustering: Optimizing for Query Patterns",id:"clustering-optimizing-for-query-patterns",level:3},{value:"Metadata Indexing: From Minutes to Seconds",id:"metadata-indexing-from-minutes-to-seconds",level:3},{value:"Extending Hudi for Schema Flexibility",id:"extending-hudi-for-schema-flexibility",level:3},{value:"Impact: Performance, Cost, and Scale",id:"impact-performance-cost-and-scale",level:2},{value:"Next Steps: Moving Beyond PostgreSQL",id:"next-steps-moving-beyond-postgresql",level:2},{value:"Acknowledgments",id:"acknowledgments",level:2},{value:"Conclusion",id:"conclusion",level:2}];function u(e){const i={a:"a",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsxs)(i.em,{children:["This post summarizes Applied Intuition's talk from the Apache Hudi community sync. Watch the recording on ",(0,n.jsx)(i.a,{href:"https://www.youtube.com/watch?v=gWw6hOcM-Fg",children:"YouTube"}),"."]})}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Talk title slide",src:t(85147).A+"",width:"1999",height:"1233"})}),"\n",(0,n.jsx)(i.p,{children:"Applied Intuition is the foremost enabler of autonomous vehicle (AV) systems, providing a suite of tools that help AV companies improve their entire stack\u2014from simulation to data exploration. To support their mission, Applied Intuition built a unique data infrastructure that is flexible, scalable, and secure. After migrating to an Apache Hudi-powered data lakehouse, they transformed their data capabilities: query times dropped from 10 minutes to under 25 seconds, and they can now query 3-4 orders of magnitude more data than before."}),"\n",(0,n.jsx)(i.h2,{id:"building-a-unique-data-infrastructure",children:"Building a Unique Data Infrastructure"}),"\n",(0,n.jsx)(i.p,{children:"Applied Intuition's data infrastructure is designed to meet the specific needs of its diverse customer base, including 17 of the top 20 OEMs. Their infrastructure is built around four core principles."}),"\n",(0,n.jsx)(i.p,{children:"First, schemas must be flexible. Each customer determines their own data schema, so the infrastructure must handle a wide variety of data points without requiring rigid upfront definitions."}),"\n",(0,n.jsx)(i.p,{children:"Second, compute needs to be tunable. Some customers are more cost-sensitive while others have larger-scale needs, so the infrastructure can adjust compute resources on a per-customer basis."}),"\n",(0,n.jsx)(i.p,{children:"Third, everything must be cloud agnostic. Because customers operate on different cloud providers, the infrastructure\u2014built on Kubernetes\u2014works seamlessly across all of them without relying on a single vendor."}),"\n",(0,n.jsx)(i.p,{children:"Finally, security and privacy are paramount. All data and infrastructure live within the customer's own cloud accounts. This ensures that customers fully own and control their data, enabling strict security, privacy, and retention policies."}),"\n",(0,n.jsx)(i.h2,{id:"the-challenges-before-apache-hudi",children:"The Challenges Before Apache Hudi"}),"\n",(0,n.jsx)("img",{src:"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img2.png",alt:"Architecture before Apache Hudi",width:"800"}),"\n",(0,n.jsx)(i.p,{children:"Before adopting Apache Hudi, Applied Intuition's data infrastructure directly queried a raw data lake on S3/ABFS using SQL engines. While this approach worked initially, significant issues emerged as scale increased."}),"\n",(0,n.jsx)(i.p,{children:"The system struggled to provide ACID transaction guarantees critical for data integrity. Storage costs kept climbing because storing all data in raw format was expensive. As small files accumulated, query performance degraded dramatically due to the I/O overhead of opening and closing countless files."}),"\n",(0,n.jsx)(i.p,{children:"To address these challenges, Applied Intuition adopted Apache Hudi, which introduced a transactional layer and metadata management to their data lake\u2014transforming file system storage into a modern data lakehouse."}),"\n",(0,n.jsxs)(i.p,{children:["Applied Intuition primarily uses ",(0,n.jsx)(i.a,{href:"https://hudi.apache.org/docs/table_types#copy-on-write-table",children:"Copy-on-Write"})," (COW) tables. While Hudi also offers ",(0,n.jsx)(i.a,{href:"https://hudi.apache.org/docs/table_types#merge-on-read-table",children:"Merge-on-Read"})," (MOR) tables for faster ingestion, their main priority is query performance. With COW tables, they achieve fast query execution while accepting slightly higher write latency."]}),"\n",(0,n.jsx)(i.h2,{id:"leveraging-hudi-features-to-shape-data-architecture",children:"Leveraging Hudi Features to Shape Data Architecture"}),"\n",(0,n.jsx)(i.p,{children:"Applied Intuition leverages three core Hudi services to optimize its data infrastructure: file sizing, clustering, and metadata indexing."}),"\n",(0,n.jsx)(i.h3,{id:"file-sizing-solving-the-small-file-problem",children:"File Sizing: Solving the Small File Problem"}),"\n",(0,n.jsx)(i.p,{children:'File sizing was the very first reason they started using Hudi. The company runs thousands of simulations daily, each generating numerous small files. This led to the classic "small file problem"\u2014Spark queries would spend significant time just opening and closing files to read metadata. Spark SQL performs best with files around 512MB, but simulation files are often just kilobytes.'}),"\n",(0,n.jsx)("img",{src:"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img3.png",alt:"File sizing optimization",width:"800"}),"\n",(0,n.jsx)(i.p,{children:"Hudi's file sizing service efficiently packs small files into optimally-sized files by analyzing previous commits and estimating the number of records per file. By combining countless kilobyte-sized files, Hudi drastically reduced I/O overhead and improved query performance. Their data now takes up 20x less space than with raw Parquet files, resulting in substantial S3 cost savings."}),"\n",(0,n.jsx)(i.p,{children:'Rohit recalls this as the first "aha moment" with Hudi: "We had less than a gigabyte of data, but query performance was really slow. When we first tried file sizing, performance improved dramatically\u2014and we saw all our data fit within megabytes. It was really cool to see that level of compression and query performance just out of the box."'}),"\n",(0,n.jsx)(i.h3,{id:"clustering-optimizing-for-query-patterns",children:"Clustering: Optimizing for Query Patterns"}),"\n",(0,n.jsxs)(i.p,{children:["Many of Applied Intuition's queries focus on specific chunks of data, or batches. Hudi's ",(0,n.jsx)(i.a,{href:"https://hudi.apache.org/docs/clustering/",children:"clustering"})," feature improves data co-location by arranging related records together, minimizing the number of files touched per query."]}),"\n",(0,n.jsx)("img",{src:"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img4.png",alt:"Clustering optimization",width:"800"}),"\n",(0,n.jsx)(i.p,{children:'For example, by clustering all data from a single "simulation run ID" into just one or two files, Hudi allows queries to avoid scanning thousands of files. This has led to massive improvements in query performance. Applied Intuition runs clustering jobs asynchronously to maintain low write latency while keeping query performance high.'}),"\n",(0,n.jsx)(i.h3,{id:"metadata-indexing-from-minutes-to-seconds",children:"Metadata Indexing: From Minutes to Seconds"}),"\n",(0,n.jsxs)(i.p,{children:["Before Hudi, loading data from raw cloud storage could take minutes, especially when listing millions of files. Hudi's ",(0,n.jsx)(i.a,{href:"https://hudi.apache.org/docs/metadata_indexing/",children:"metadata indexing"})," creates a file index that allows the dataframe to load in under two seconds\u2014a huge UX improvement for their customers."]}),"\n",(0,n.jsx)("img",{src:"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img5.png",alt:"Metadata indexing",width:"800"}),"\n",(0,n.jsx)(i.p,{children:"Additionally, they use column stats indices, which store min/max values for key columns. When a query runs, Hudi uses these stats to skip irrelevant files that don't match the query criteria, enabling much faster lookups."}),"\n",(0,n.jsx)(i.h3,{id:"extending-hudi-for-schema-flexibility",children:"Extending Hudi for Schema Flexibility"}),"\n",(0,n.jsx)(i.p,{children:"Given their wide customer base and evolving schema needs, Applied Intuition extended Hudi with two customizations: one to evict the cached file schema provider so mid-day schema updates are picked up during writes, and another to allow Parquet batching even when schemas differ across commits\u2014common in simulation data where batches may have different columns."}),"\n",(0,n.jsx)(i.h2,{id:"impact-performance-cost-and-scale",children:"Impact: Performance, Cost, and Scale"}),"\n",(0,n.jsx)(i.p,{children:"The improvements with Hudi have been transformative. Applied Intuition can now query 3-4 orders of magnitude more data than before. Storage costs dropped significantly thanks to file packing that achieves 20x compression compared to raw Parquet files. Query times that once took 10 minutes now complete in under 25 seconds, and dataframe initialization that used to take minutes now happens in seconds."}),"\n",(0,n.jsx)(i.p,{children:"Despite running on tight compute resources\u2014just 1-2 machines running DeltaStreamer\u2014their ingestion latency sits around 15 minutes. They can easily scale this by adding more compute when needed."}),"\n",(0,n.jsx)(i.h2,{id:"next-steps-moving-beyond-postgresql",children:"Next Steps: Moving Beyond PostgreSQL"}),"\n",(0,n.jsx)(i.p,{children:"After successfully implementing Hudi on a few key tables, Applied Intuition is scaling Hudi to support their entire data lake architecture."}),"\n",(0,n.jsx)("img",{src:"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img6.png",alt:"PostgreSQL CDC architecture",width:"800"}),"\n",(0,n.jsx)(i.p,{children:"A proof of concept integrates PostgreSQL CDC via Debezium into Kafka, which feeds into Hudi DeltaStreamer, replicating transactional data into a Hudi-powered lakehouse. This setup enables non-critical queries to shift away from PostgreSQL, reducing database load and improving overall product performance. It also opens up deeper analytical insights directly from the data lake for both internal teams and customers."}),"\n",(0,n.jsx)(i.p,{children:"The team worked through some initial setup challenges, resolving tombstone record handling through PostgreSQL and Debezium configuration updates."}),"\n",(0,n.jsx)(i.h2,{id:"acknowledgments",children:"Acknowledgments"}),"\n",(0,n.jsx)(i.p,{children:"Applied Intuition is grateful for the incredible support from the Apache Hudi community, which has significantly improved their data infrastructure. The Onehouse team\u2014Sivabalan, Ethan, and Nadine\u2014has been particularly helpful, staying up on long night calls to help debug issues and ensure the team understood the product deeply. Nadine also provided ongoing support by answering questions on Slack."}),"\n",(0,n.jsx)(i.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,n.jsx)(i.p,{children:"Applied Intuition's journey with Apache Hudi demonstrates how a modern data lakehouse platform can solve complex data infrastructure challenges while unlocking new levels of performance and insight."})]})}function c(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},26525(e){e.exports=JSON.parse('{"permalink":"/blog/2026/01/22/apache-hudi-at-applied-intuition","editUrl":"https://github.com/apache/hudi/edit/asf-site/website/blog/blog/2026-01-22-apache-hudi-at-applied-intuition.mdx","source":"@site/blog/2026-01-22-apache-hudi-at-applied-intuition.mdx","title":"Scaling Autonomous Vehicle Data Infrastructure with Apache Hudi at Applied Intuition","description":"---","date":"2026-01-22T00:00:00.000Z","tags":[{"inline":true,"label":"data lakehouse","permalink":"/blog/tags/data-lakehouse"},{"inline":true,"label":"applied intuition","permalink":"/blog/tags/applied-intuition"}],"readingTime":6.49,"hasTruncateMarker":false,"authors":[{"name":"The Hudi Community","key":null,"page":null}],"frontMatter":{"title":"Scaling Autonomous Vehicle Data Infrastructure with Apache Hudi at Applied Intuition","excerpt":"How Applied Intuition reduced query times from 10 minutes to under 25 seconds and achieved 20x storage compression by migrating to an Apache Hudi-powered data lakehouse.","author":"The Hudi Community","category":"case-study","image":"/assets/images/blog/2026-01-22-apache-hudi-at-applied-intuition/img1.png","tags":["data lakehouse","applied intuition"]},"unlisted":false,"nextItem":{"title":"Apache Hudi\u2122 at Uber: Engineering for Trillion-Record-Scale Data Lake Operations","permalink":"/blog/2026/01/16/apache-hudi-at-uber"}}')},28453(e,i,t){t.d(i,{R:()=>r,x:()=>o});var a=t(96540);const n={},s=a.createContext(n);function r(e){const i=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),a.createElement(s.Provider,{value:i},e.children)}},85147(e,i,t){t.d(i,{A:()=>a});const a=t.p+"assets/images/img1-5584b5aa92db392fa1312536a6de7eed.png"}}]);