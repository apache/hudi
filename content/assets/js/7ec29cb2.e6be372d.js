"use strict";(self.webpackChunkhudi=self.webpackChunkhudi||[]).push([[71656],{83819:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>x,frontMatter:()=>i,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"procedures","title":"Procedures","description":"Stored procedures available when use Hudi SparkSQL extensions in all spark\'s version.","source":"@site/versioned_docs/version-0.12.3/procedures.md","sourceDirName":".","slug":"/procedures","permalink":"/docs/0.12.3/procedures","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hudi/tree/asf-site/website/versioned_docs/version-0.12.3/procedures.md","tags":[],"version":"0.12.3","frontMatter":{"title":"Procedures","summary":"In this page, we introduce how to use procedures with Hudi.","toc":true,"last_modified_at":null},"sidebar":"docs","previous":{"title":"SQL DDL","permalink":"/docs/0.12.3/table_management"},"next":{"title":"Writing Data","permalink":"/docs/0.12.3/writing_data"}}');var r=n(74848),s=n(28453);n(11470),n(19365);const i={title:"Procedures",summary:"In this page, we introduce how to use procedures with Hudi.",toc:!0,last_modified_at:null},l=void 0,c={},h=[{value:"Usage",id:"usage",level:2},{value:"Named arguments",id:"named-arguments",level:4},{value:"Positional arguments",id:"positional-arguments",level:4},{value:"Commit management",id:"commit-management",level:2},{value:"show_commits",id:"show_commits",level:3},{value:"show_commits_metadata",id:"show_commits_metadata",level:3},{value:"rollback_to_instant",id:"rollback_to_instant",level:3},{value:"create_savepoints",id:"create_savepoints",level:3},{value:"delete_savepoints",id:"delete_savepoints",level:3},{value:"rollback_savepoints",id:"rollback_savepoints",level:3},{value:"Optimization table",id:"optimization-table",level:2},{value:"run_clustering",id:"run_clustering",level:3},{value:"show_clustering",id:"show_clustering",level:3},{value:"run_compaction",id:"run_compaction",level:3},{value:"show_compaction",id:"show_compaction",level:3}];function a(e){const t={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Stored procedures available when use Hudi SparkSQL extensions in all spark's version."}),"\n",(0,r.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.p,{children:"CALL supports passing arguments by name (recommended) or by position. Mixing position and named arguments is also supported."}),"\n",(0,r.jsx)(t.h4,{id:"named-arguments",children:"Named arguments"}),"\n",(0,r.jsx)(t.p,{children:"All procedure arguments are named. When passing arguments by name, arguments can be in any order and any optional argument can be omitted."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"CALL system.procedure_name(arg_name_2 => arg_2, arg_name_1 => arg_1, ... arg_name_n => arg_n)\n"})}),"\n",(0,r.jsx)(t.h4,{id:"positional-arguments",children:"Positional arguments"}),"\n",(0,r.jsx)(t.p,{children:"When passing arguments by position, the arguments may be omitted if they are optional."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"CALL system.procedure_name(arg_1, arg_2, ... arg_n)\n"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"note:"})," The system here has no practical meaning, the complete procedure name is system.procedure_name."]}),"\n",(0,r.jsx)(t.h2,{id:"commit-management",children:"Commit management"}),"\n",(0,r.jsx)(t.h3,{id:"show_commits",children:"show_commits"}),"\n",(0,r.jsx)(t.p,{children:"Show commits' info."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Hudi table name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"limit"}),(0,r.jsx)(t.td,{children:"Int"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"10"}),(0,r.jsx)(t.td,{children:"Max number of records to be returned"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Output Name"}),(0,r.jsx)(t.th,{children:"Type"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"commit_time"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_bytes_written"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_files_added"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_files_updated"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_partitions_written"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_records_written"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_update_records_written"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_errors"}),(0,r.jsx)(t.td,{children:"Long"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_commits(table => 'test_hudi_table', limit => 10);\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"commit_time"}),(0,r.jsx)(t.th,{children:"total_bytes_written"}),(0,r.jsx)(t.th,{children:"total_files_added"}),(0,r.jsx)(t.th,{children:"total_files_updated"}),(0,r.jsx)(t.th,{children:"total_partitions_written"}),(0,r.jsx)(t.th,{children:"total_records_written"}),(0,r.jsx)(t.th,{children:"total_update_records_written"}),(0,r.jsx)(t.th,{children:"total_errors"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220216171049652"}),(0,r.jsx)(t.td,{children:"432653"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220216171027021"}),(0,r.jsx)(t.td,{children:"435346"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220216171019361"}),(0,r.jsx)(t.td,{children:"435349"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"show_commits_metadata",children:"show_commits_metadata"}),"\n",(0,r.jsx)(t.p,{children:"Show commits' metadata."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Hudi table name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"limit"}),(0,r.jsx)(t.td,{children:"Int"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"10"}),(0,r.jsx)(t.td,{children:"Max number of records to be returned"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Output Name"}),(0,r.jsx)(t.th,{children:"Type"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"commit_time"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"action"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"partition"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"file_id"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"previous_commit"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"num_writes"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"num_inserts"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"num_deletes"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"num_update_writes"}),(0,r.jsx)(t.td,{children:"String"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_errors"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_log_blocks"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_corrupt_logblocks"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_rollback_blocks"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_log_records"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_updated_records_compacted"}),(0,r.jsx)(t.td,{children:"Long"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"total_bytes_written"}),(0,r.jsx)(t.td,{children:"Long"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_commits_metadata(table => 'test_hudi_table');\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"commit_time"}),(0,r.jsx)(t.th,{children:"action"}),(0,r.jsx)(t.th,{children:"partition"}),(0,r.jsx)(t.th,{children:"file_id"}),(0,r.jsx)(t.th,{children:"previous_commit"}),(0,r.jsx)(t.th,{children:"num_writes"}),(0,r.jsx)(t.th,{children:"num_inserts"}),(0,r.jsx)(t.th,{children:"num_deletes"}),(0,r.jsx)(t.th,{children:"num_update_writes"}),(0,r.jsx)(t.th,{children:"total_errors"}),(0,r.jsx)(t.th,{children:"total_log_blocks"}),(0,r.jsx)(t.th,{children:"total_corrupt_logblocks"}),(0,r.jsx)(t.th,{children:"total_rollback_blocks"}),(0,r.jsx)(t.th,{children:"total_log_records"}),(0,r.jsx)(t.th,{children:"total_updated_records_compacted"}),(0,r.jsx)(t.th,{children:"total_bytes_written"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109225319449"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-03"}),(0,r.jsx)(t.td,{children:"d0073a12-085d-4f49-83e9-402947e7e90a-0"}),(0,r.jsx)(t.td,{children:"null"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"435349"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109225311742"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-02"}),(0,r.jsx)(t.td,{children:"b3b32bac-8a44-4c4d-b433-0cb1bf620f23-0"}),(0,r.jsx)(t.td,{children:"20220109214830592"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"435340"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109225301429"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-01"}),(0,r.jsx)(t.td,{children:"0d7298b3-6b55-4cff-8d7d-b0772358b78a-0"}),(0,r.jsx)(t.td,{children:"20220109214830592"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"435340"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109214830592"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-01"}),(0,r.jsx)(t.td,{children:"0d7298b3-6b55-4cff-8d7d-b0772358b78a-0"}),(0,r.jsx)(t.td,{children:"20220109191631015"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"432653"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109214830592"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-02"}),(0,r.jsx)(t.td,{children:"b3b32bac-8a44-4c4d-b433-0cb1bf620f23-0"}),(0,r.jsx)(t.td,{children:"20220109191648181"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"432653"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109191648181"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-02"}),(0,r.jsx)(t.td,{children:"b3b32bac-8a44-4c4d-b433-0cb1bf620f23-0"}),(0,r.jsx)(t.td,{children:"null"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"435341"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220109191631015"}),(0,r.jsx)(t.td,{children:"commit"}),(0,r.jsx)(t.td,{children:"dt=2021-05-01"}),(0,r.jsx)(t.td,{children:"0d7298b3-6b55-4cff-8d7d-b0772358b78a-0"}),(0,r.jsx)(t.td,{children:"null"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"1"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"435341"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"rollback_to_instant",children:"rollback_to_instant"}),"\n",(0,r.jsx)(t.p,{children:"Rollback a table to the commit that was current at some time."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Hudi table name"})]})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Output Name"}),(0,r.jsx)(t.th,{children:"Type"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"rollback_result"}),(0,r.jsx)(t.td,{children:"Boolean"})]})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Roll back test_hudi_table to one instant"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call rollback_to_instant(table => 'test_hudi_table', instant_time => '20220109225319449');\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"rollback_result"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"true"})})})]}),"\n",(0,r.jsx)(t.h3,{id:"create_savepoints",children:"create_savepoints"}),"\n",(0,r.jsx)(t.p,{children:"Create a savepoint to hudi's table."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Hudi table name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"commit_Time"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Commit time"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"user"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:'""'}),(0,r.jsx)(t.td,{children:"User name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"comments"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:'""'}),(0,r.jsx)(t.td,{children:"Comments"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Output Name"}),(0,r.jsx)(t.th,{children:"Type"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"create_savepoint_result"}),(0,r.jsx)(t.td,{children:"Boolean"})]})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Roll back test_hudi_table to one instant"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call create_savepoints(table => 'test_hudi_table', instant_time => '20220109225319449');\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"create_savepoint_result"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"true"})})})]}),"\n",(0,r.jsx)(t.h3,{id:"delete_savepoints",children:"delete_savepoints"}),"\n",(0,r.jsx)(t.p,{children:"Delete a savepoint to hudi's table."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Hudi table name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"instant_time"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Instant time"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Output Name"}),(0,r.jsx)(t.th,{children:"Type"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"delete_savepoint_result"}),(0,r.jsx)(t.td,{children:"Boolean"})]})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Delete a savepoint to test_hudi_table"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call delete_savepoints(table => 'test_hudi_table', instant_time => '20220109225319449');\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"delete_savepoint_result"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"true"})})})]}),"\n",(0,r.jsx)(t.h3,{id:"rollback_savepoints",children:"rollback_savepoints"}),"\n",(0,r.jsx)(t.p,{children:"Rollback a table to the commit that was current at some time."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Hudi table name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"instant_time"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Y"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Instant time"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Output Name"}),(0,r.jsx)(t.th,{children:"Type"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"rollback_savepoint_result"}),(0,r.jsx)(t.td,{children:"Boolean"})]})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Rollback test_hudi_table to one savepoint"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call rollback_savepoints(table => 'test_hudi_table', instant_time => '20220109225319449');\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"rollback_savepoint_result"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"true"})})})]}),"\n",(0,r.jsx)(t.h2,{id:"optimization-table",children:"Optimization table"}),"\n",(0,r.jsx)(t.h3,{id:"run_clustering",children:"run_clustering"}),"\n",(0,r.jsx)(t.p,{children:"Trigger clustering on a hoodie table. By using partition predicates, clustering table can be run\nwith specified partitions, and you can also specify the order columns to sort data."}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["Newly clustering instant will be generated every call, and all pending clustering instants are executed.\nWhen calling this procedure, one of parameters ",(0,r.jsx)(t.code,{children:"table"})," and ",(0,r.jsx)(t.code,{children:"path"})," must be specified at least. If both\nparameters are given, ",(0,r.jsx)(t.code,{children:"table"})," will take effect."]})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Name of table to be clustered"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Path of table to be clustered"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"predicate"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Predicate to filter partition"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"order"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsxs)(t.td,{children:["Order column split by ",(0,r.jsx)(t.code,{children:","})]})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsx)(t.p,{children:"Empty"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Clustering test_hudi_table with table name"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_clustering(table => 'test_hudi_table')\n"})}),"\n",(0,r.jsx)(t.p,{children:"Clustering test_hudi_table with table path"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_clustering(path => '/tmp/hoodie/test_hudi_table')\n"})}),"\n",(0,r.jsx)(t.p,{children:"Clustering test_hudi_table with table name, predicate and order column"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_clustering(table => 'test_hudi_table', predicate => 'ts \\<= 20220408L', order => 'ts')\n"})}),"\n",(0,r.jsx)(t.h3,{id:"show_clustering",children:"show_clustering"}),"\n",(0,r.jsx)(t.p,{children:"Show pending clusterings on a hoodie table."}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["When calling this procedure, one of parameters ",(0,r.jsx)(t.code,{children:"table"})," and ",(0,r.jsx)(t.code,{children:"path"})," must be specified at least.\nIf both parameters are given, ",(0,r.jsx)(t.code,{children:"table"})," will take effect."]})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Name of table to be clustered"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Path of table to be clustered"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"limit"}),(0,r.jsx)(t.td,{children:"Int"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Max number of records to be returned"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"timestamp"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Instant time"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"groups"}),(0,r.jsx)(t.td,{children:"Int"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of file groups to be processed"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Show pending clusterings with table name"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_clustering(table => 'test_hudi_table')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"timestamp"}),(0,r.jsx)(t.th,{children:"groups"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153707928"}),(0,r.jsx)(t.td,{children:"2"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153636963"}),(0,r.jsx)(t.td,{children:"3"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Show pending clusterings with table path"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_clustering(path => '/tmp/hoodie/test_hudi_table')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"timestamp"}),(0,r.jsx)(t.th,{children:"groups"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153707928"}),(0,r.jsx)(t.td,{children:"2"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153636963"}),(0,r.jsx)(t.td,{children:"3"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Show pending clusterings with table name and limit"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_clustering(table => 'test_hudi_table', limit => 1)\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"timestamp"}),(0,r.jsx)(t.th,{children:"groups"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153707928"}),(0,r.jsx)(t.td,{children:"2"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"run_compaction",children:"run_compaction"}),"\n",(0,r.jsx)(t.p,{children:"Schedule or run compaction on a hoodie table."}),"\n",(0,r.jsxs)(t.admonition,{type:"note",children:[(0,r.jsxs)(t.p,{children:["For scheduling compaction, if ",(0,r.jsx)(t.code,{children:"timestamp"})," is specified, new scheduled compaction will use given\ntimestamp as instant time. Otherwise, compaction will be scheduled by using current system time."]}),(0,r.jsxs)(t.p,{children:["For running compaction, given ",(0,r.jsx)(t.code,{children:"timestamp"})," must be a pending compaction instant time that\nalready exists, if it's not, exception will be thrown. Meanwhile, if ",(0,r.jsx)(t.code,{children:"timestamp"}),"is specified\nand there are pending compactions, all pending compactions will be executed without new compaction\ninstant generated."]}),(0,r.jsxs)(t.p,{children:["When calling this procedure, one of parameters ",(0,r.jsx)(t.code,{children:"table"})," and ",(0,r.jsx)(t.code,{children:"path"}),"must be specified at least.\nIf both parameters are given, ",(0,r.jsx)(t.code,{children:"table"})," will take effect."]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"op"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsxs)(t.td,{children:["Operation type, ",(0,r.jsx)(t.code,{children:"RUN"})," or ",(0,r.jsx)(t.code,{children:"SCHEDULE"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Name of table to be compacted"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Path of table to be compacted"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"timestamp"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Instant time"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.p,{children:["The output of ",(0,r.jsx)(t.code,{children:"RUN"})," operation is ",(0,r.jsx)(t.code,{children:"EMPTY"}),", the output of ",(0,r.jsx)(t.code,{children:"SCHEDULE"})," as follow:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"instant"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Instant name"})]})})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Run compaction with table name"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_compaction(op => 'run', table => 'test_hudi_table')\n"})}),"\n",(0,r.jsx)(t.p,{children:"Run compaction with table path"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_compaction(op => 'run', path => '/tmp/hoodie/test_hudi_table')\n"})}),"\n",(0,r.jsx)(t.p,{children:"Run compaction with table path and timestamp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_compaction(op => 'run', path => '/tmp/hoodie/test_hudi_table', timestamp => '20220408153658568')\n"})}),"\n",(0,r.jsx)(t.p,{children:"Schedule compaction with table name"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_compaction(op => 'schedule', table => 'test_hudi_table')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{children:"instant"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{children:"20220408153650834"})})})]}),"\n",(0,r.jsx)(t.p,{children:"Schedule compaction with table path"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_compaction(op => 'schedule', path => '/tmp/hoodie/test_hudi_table')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{children:"instant"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{children:"20220408153650834"})})})]}),"\n",(0,r.jsx)(t.p,{children:"Schedule compaction with table path and timestamp"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call run_compaction(op => 'schedule', path => '/tmp/hoodie/test_hudi_table', timestamp => '20220408153658568')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.th,{children:"instant"})})}),(0,r.jsx)(t.tbody,{children:(0,r.jsx)(t.tr,{children:(0,r.jsx)(t.td,{children:"20220408153658568"})})})]}),"\n",(0,r.jsx)(t.h3,{id:"show_compaction",children:"show_compaction"}),"\n",(0,r.jsx)(t.p,{children:"Show all compactions on a hoodie table, in-flight or completed compactions are included, and result will\nbe in reverse order according to trigger time."}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["When calling this procedure, one of parameters ",(0,r.jsx)(t.code,{children:"table"}),"and ",(0,r.jsx)(t.code,{children:"path"})," must be specified at least.\nIf both parameters are given, ",(0,r.jsx)(t.code,{children:"table"})," will take effect."]})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Input"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"table"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Name of table to show compaction"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Path of table to show compaction"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"limit"}),(0,r.jsx)(t.td,{children:"Int"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Max number of records to be returned"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Output"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"timestamp"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Instant time"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"action"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Action name of compaction"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"size"}),(0,r.jsx)(t.td,{children:"Int"}),(0,r.jsx)(t.td,{children:"N"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of file slices to be compacted"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.p,{children:"Show compactions with table name"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_compaction(table => 'test_hudi_table')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"timestamp"}),(0,r.jsx)(t.th,{children:"action"}),(0,r.jsx)(t.th,{children:"size"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153707928"}),(0,r.jsx)(t.td,{children:"compaction"}),(0,r.jsx)(t.td,{children:"10"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153636963"}),(0,r.jsx)(t.td,{children:"compaction"}),(0,r.jsx)(t.td,{children:"10"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Show compactions with table path"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_compaction(path => '/tmp/hoodie/test_hudi_table')\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"timestamp"}),(0,r.jsx)(t.th,{children:"action"}),(0,r.jsx)(t.th,{children:"size"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153707928"}),(0,r.jsx)(t.td,{children:"compaction"}),(0,r.jsx)(t.td,{children:"10"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153636963"}),(0,r.jsx)(t.td,{children:"compaction"}),(0,r.jsx)(t.td,{children:"10"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Show compactions with table name and limit"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"call show_compaction(table => 'test_hudi_table', limit => 1)\n"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"timestamp"}),(0,r.jsx)(t.th,{children:"action"}),(0,r.jsx)(t.th,{children:"size"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"20220408153707928"}),(0,r.jsx)(t.td,{children:"compaction"}),(0,r.jsx)(t.td,{children:"10"})]})})]})]})}function x(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},19365:(e,t,n)=>{n.d(t,{A:()=>i});n(96540);var d=n(34164);const r={tabItem:"tabItem_Ymn6"};var s=n(74848);function i(e){let{children:t,hidden:n,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,d.A)(r.tabItem,i),hidden:n,children:t})}},11470:(e,t,n)=>{n.d(t,{A:()=>y});var d=n(96540),r=n(34164),s=n(23104),i=n(56347),l=n(205),c=n(57485),h=n(31682),a=n(70679);function x(e){return d.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,d.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function j(e){const{values:t,children:n}=e;return(0,d.useMemo)((()=>{const e=t??function(e){return x(e).map((e=>{let{props:{value:t,label:n,attributes:d,default:r}}=e;return{value:t,label:n,attributes:d,default:r}}))}(n);return function(e){const t=(0,h.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function o(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function u(e){let{queryString:t=!1,groupId:n}=e;const r=(0,i.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,c.aZ)(s),(0,d.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(r.location.search);t.set(s,e),r.replace({...r.location,search:t.toString()})}),[s,r])]}function p(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,s=j(e),[i,c]=(0,d.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!o({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const d=n.find((e=>e.default))??n[0];if(!d)throw new Error("Unexpected error: 0 tabValues");return d.value}({defaultValue:t,tabValues:s}))),[h,x]=u({queryString:n,groupId:r}),[p,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,s]=(0,a.Dv)(n);return[r,(0,d.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:r}),b=(()=>{const e=h??p;return o({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{b&&c(b)}),[b]);return{selectedValue:i,selectValue:(0,d.useCallback)((e=>{if(!o({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),x(e),m(e)}),[x,m,s]),tabValues:s}}var m=n(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var _=n(74848);function g(e){let{className:t,block:n,selectedValue:d,selectValue:i,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:h}=(0,s.a_)(),a=e=>{const t=e.currentTarget,n=c.indexOf(t),r=l[n].value;r!==d&&(h(t),i(r))},x=e=>{let t=null;switch(e.key){case"Enter":a(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,_.jsx)("li",{role:"tab",tabIndex:d===t?0:-1,"aria-selected":d===t,ref:e=>c.push(e),onKeyDown:x,onClick:a,...s,className:(0,r.A)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":d===t}),children:n??t},t)}))})}function f(e){let{lazy:t,children:n,selectedValue:s}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===s));return e?(0,d.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,d.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function v(e){const t=p(e);return(0,_.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,_.jsx)(g,{...t,...e}),(0,_.jsx)(f,{...t,...e})]})}function y(e){const t=(0,m.A)();return(0,_.jsx)(v,{...e,children:x(e.children)},String(t))}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var d=n(96540);const r={},s=d.createContext(r);function i(e){const t=d.useContext(s);return d.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),d.createElement(s.Provider,{value:t},e.children)}}}]);