<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Apache Hudi 1.1 Deep Dive: Async Instant Time Generation for Flink Writers | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="apache hudi, data lake, lakehouse, big data, apache spark, apache flink, presto, trino, analytics, data engineering"><meta data-rh="true" property="og:title" content="Apache Hudi 1.1 Deep Dive: Async Instant Time Generation for Flink Writers | Apache Hudi"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><meta data-rh="true" property="og:image" content="https://hudi.apache.org/assets/images/blog/2026-01-09-hudi-11-deep-dive-flink-async-instant-gen/async-instant-gen.png"><meta data-rh="true" name="twitter:image" content="https://hudi.apache.org/assets/images/blog/2026-01-09-hudi-11-deep-dive-flink-async-instant-gen/async-instant-gen.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2026-01-09T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.linkedin.com/in/shuo-cheng-317b82aa/"><meta data-rh="true" property="article:tag" content="hudi,flink,streaming"><link data-rh="true" rel="icon" href="/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen","mainEntityOfPage":"https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen","url":"https://hudi.apache.org/blog/2026/01/09/hudi-11-deep-dive-flink-async-instant-gen","headline":"Apache Hudi 1.1 Deep Dive: Async Instant Time Generation for Flink Writers","name":"Apache Hudi 1.1 Deep Dive: Async Instant Time Generation for Flink Writers","description":"---","datePublished":"2026-01-09T00:00:00.000Z","author":{"@type":"Person","name":"Shuo Cheng","url":"https://www.linkedin.com/in/shuo-cheng-317b82aa/","image":"/assets/images/authors/shuo-cheng.jpg"},"image":{"@type":"ImageObject","@id":"https://hudi.apache.org/assets/images/blog/2026-01-09-hudi-11-deep-dive-flink-async-instant-gen/async-instant-gen.png","url":"https://hudi.apache.org/assets/images/blog/2026-01-09-hudi-11-deep-dive-flink-async-instant-gen/async-instant-gen.png","contentUrl":"https://hudi.apache.org/assets/images/blog/2026-01-09-hudi-11-deep-dive-flink-async-instant-gen/async-instant-gen.png","caption":"title image for the blog post: Apache Hudi 1.1 Deep Dive: Async Instant Time Generation for Flink Writers"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://hudi.apache.org/blog","name":"Blogs List Page"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/videos/atom.xml" title="Apache Hudi Atom Feed">





<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="9e4444ba-93cc-45ea-b143-783ae0fbeb6f" data-project-name="Apache Hudi" data-project-color="#FFFFFF" data-project-logo="/assets/images/logo-big.png" data-modal-disclaimer="This AI assistant answers Apache Hudi questions using your [documentation](https://hudi.apache.org/docs/quick-start-guide/), [dev setup](https://hudi.apache.org/contribute/developer-setup/), the [tech specs](https://hudi.apache.org/tech-specs-1point0/) and [open GitHub Issues](https://github.com/apache/hudi/issues/) from the last year." data-modal-title="Apache Hudi AI Assistant" data-modal-example-questions-title="Try asking me..." data-modal-example-questions="How can I convert an existing COW table to MOR?,How do I set up incremental queries with Hudi tables?" data-modal-image="/assets/images/logo-small.png" data-modal-image-ask-ai="/assets/images/logo-small.png" data-modal-header-min-height="64px" data-modal-image-height="44" data-modal-image-width="64" data-modal-header-bg-color="#f8f9fa" data-modal-title-color="#15467D" data-button-text-color="#29557a" data-button-text="Ask AI" data-consent-required="true" data-consent-screen-title="Help us improve our AI assistant" data-consent-screen-disclaimer="By clicking &amp;quot;Allow tracking&amp;quot;, you consent to the use of the AI assistant in accordance with kapa.ai&#39;s [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google&#39;s [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai&#39;s and Google&#39;s privacy policies." data-consent-screen-accept-button-text="Allow tracking" data-modal-disclaimer-font-size="0.80rem" data-query-input-placeholder-text-color="#29557a" data-submit-query-button-bg-color="#228EDE" data-query-input-text-color="#29557a" data-user-analytics-cookie-enabled="false" data-query-input-border-color="#211b0e" data-question-text-color="#0db1f9" data-answer-text-color="#000" data-thread-clear-button-bg-color="#000000" data-thread-clear-button-text-color="#FFFFFF" data-answer-feedback-button-bg-color="#000000" data-answer-feedback-button-text-color="#FFFFFF" data-answer-feedback-button-active-bg-color="#000000" data-answer-feedback-button-active-text-color="#FFFFFF" data-answer-copy-button-bg-color="#000000" data-answer-copy-button-text-color="#FFFFFF" data-example-question-button-text-color="#29557a" data-modal-disclaimer-bg-color="#f8f9fa" data-modal-disclaimer-text-color="#15467D" data-deep-thinking-button-bg-color="#228EDE" data-deep-thinking-button-text-color="#FFFFFF" data-deep-thinking-button-active-bg-color="#205792" data-deep-thinking-button-hover-bg-color="#0478C0" data-deep-thinking-button-active-hover-bg-color="#205792" data-deep-thinking-button-active-text-color="#FFFFFF" async></script><link rel="stylesheet" href="/assets/css/styles.969d50c0.css">
<script src="/assets/js/runtime~main.be090174.js" defer="defer"></script>
<script src="/assets/js/main.0b2f32cd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/tutorial-series">Tutorial Series</a></li><li><a class="dropdown__link" href="/learn/blog">Blogs</a></li><li><a class="dropdown__link" href="/learn/talks">Talks</a></li><li><a class="dropdown__link" href="/learn/videos">Video Guides</a></li><li><a class="dropdown__link" href="/learn/faq">FAQ</a></li><li><a class="dropdown__link" href="/learn/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/learn/tech-specs-1point0">Tech Specs 1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/developer-sync-call">Developer Sync Call</a></li><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/security">Security</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li><li><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="dropdown__link">Github<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.linkedin.com/company/apache-hudi/" target="_blank" rel="noopener noreferrer" class="dropdown__link">LinkedIn<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://www.youtube.com/@apachehudi" target="_blank" rel="noopener noreferrer" class="dropdown__link">YouTube<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="dropdown__link">X<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Ecosystem</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/powered-by">Adopters</a></li><li><a class="dropdown__link" href="/roadmap">Roadmap</a></li><li><a class="dropdown__link" href="/ecosystem">Integrations</a></li></ul></div><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#15467D" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#15467D" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/releases/download">Download</a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-2" itemscope="" itemtype="http://schema.org/Blog"><article class=""><header><h1 class="title_xvU1">Apache Hudi 1.1 Deep Dive: Async Instant Time Generation for Flink Writers</h1><div class="container_iJTo margin-vert--sm"><time datetime="2026-01-09T00:00:00.000Z">January 9, 2026</time><div class="authorWrapper_ApDF"><div class="author_nTWa"><img src="/assets/images/authors/shuo-cheng.jpg" alt="Shuo Cheng" class="authorImage_ep4B"><a href="https://www.linkedin.com/in/shuo-cheng-317b82aa/" target="_blank" rel="noopener noreferrer" class="authorName_L0fC">Shuo Cheng</a></div></div><span class="marker_H0Am">11 min read</span></div><div class="row tagsListInline margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/hudi">hudi</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/flink">flink</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/streaming">streaming</a></li></ul></div></div></header><div id="__blog-post-container" class="markdown"><hr>
<p><em>This blog was translated from the <a href="https://mp.weixin.qq.com/s/3r06DFdkaiGkF1_7NiovZw" target="_blank" rel="noopener noreferrer" class="">original blog in Chinese</a>.</em></p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background" translate="no">​</a></h2>
<p>Before the Hudi 1.1 release, in order to guarantee the exactly-once semantics of the Hudi Flink sink, a new instant could only be generated after the previous instant was successfully committed to Hudi. During this period, Flink writers had to block and wait. Starting from Hudi 1.1, we introduce a new asynchronous instant generation mechanism for Flink writers. This approach allows writers to request the next instant even before the previous one has been committed successfully. At the same time, it still ensures the ordering and consistency of multi-transaction commits. In the following sections, we will first briefly introduce some of Hudi&#x27;s basic concepts, and then dive into the details of asynchronous instant time generation.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="instant-time">Instant Time<a href="#instant-time" class="hash-link" aria-label="Direct link to Instant Time" title="Direct link to Instant Time" translate="no">​</a></h2>
<p>Timeline is a core component of Hudi&#x27;s architecture. It serves as the single source of truth for the table&#x27;s state, recording all operations performed on a table. Each operation is identified by a commit with a monotonically increasing instant time, which indicates the start time of each transaction.</p>
<p><img decoding="async" loading="lazy" alt="Timeline" src="/assets/images/timeline-a2604a4e8aa82c2a568ffa9e01585c57.png" width="3049" height="1105" class="img_ev3q"></p>
<p>Hudi provides the following capabilities based on instant time:</p>
<ul>
<li class=""><strong>More efficient write rollbacks</strong>: Each Hudi commit corresponds to an instant time. The instant timestamp can be used to quickly locate files affected by failed writes.</li>
<li class=""><strong>File name-based file slicing</strong>: Since instant time is encoded into file names, Hudi can efficiently perform file slicing across different versions of files within a table.</li>
<li class=""><strong>Incremental queries</strong>: Each row in a Hudi table carries a <code>_hoodie_commit_time</code> metadata field. This allows incremental queries at any point in the timeline, even when full compaction or cleaning services are running asynchronously.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="completion-time">Completion Time<a href="#completion-time" class="hash-link" aria-label="Direct link to Completion Time" title="Direct link to Completion Time" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="file-slicing-based-on-instant-time">File Slicing Based on Instant Time<a href="#file-slicing-based-on-instant-time" class="hash-link" aria-label="Direct link to File Slicing Based on Instant Time" title="Direct link to File Slicing Based on Instant Time" translate="no">​</a></h3>
<p>Before release 1.0, Hudi organized data files in units called <code>FileGroup</code>. Each file group contains multiple <code>FileSlice</code>s. Each file slice contains one base file and multiple log files. Every compaction on a file group generates a new file slice. The timestamp in the base file name corresponds to the instant time of the compaction operation that wrote the file. The timestamp in the log file name is the same as the base instant time of the current file slice. Data files with the same instant time belong to the same file slice.</p>
<p><img decoding="async" loading="lazy" alt="File Slicing based on Instant Time" src="/assets/images/file-slicing-instant-time-5359912c2aa068992e7ba303c533acf8.png" width="1130" height="572" class="img_ev3q"></p>
<p>In concurrent write scenarios, the instant time naming convention of log files introduces certain limitations: as asynchronous compaction progresses, the base instant time can change. To ensure that writers can correctly determine the base instant time, the ordering between write commits and compaction scheduling must be enforced—meaning that compaction can only be scheduled when there are no ongoing write operations on the table. Otherwise, a log file might be written with an incorrect base instant time, potentially leading to data loss. As a result, compaction scheduling may block all writers in concurrency mode.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="file-slicing-based-on-completion-time">File Slicing Based on Completion Time<a href="#file-slicing-based-on-completion-time" class="hash-link" aria-label="Direct link to File Slicing Based on Completion Time" title="Direct link to File Slicing Based on Completion Time" translate="no">​</a></h3>
<p>To address these issues, starting from version 1.0, Hudi introduced a new file slicing model based on a time interval defined by requested time and completion time. In release 1.x, each commit has two important time concepts: requested time and completion time. All generated timestamps are globally monotonically increasing. The timestamp in the log file name is no longer the base instant time, but rather the requested instant time of the write operation. During the file slicing process, Hudi looks up the completion time for each log file using its instant time and applies a new file slicing rule:</p>
<blockquote>
<p><em>A log file belongs to the file slice with the maximum base requested time that is less than or equal to the log file&#x27;s completion time.</em> [5]</p>
</blockquote>
<p><img decoding="async" loading="lazy" alt="File Slicing based on Completion Time" src="/assets/images/file-slicing-completion-time-73f5ca1df8df5c17fccf51cf9c47056f.png" width="1142" height="580" class="img_ev3q"></p>
<p>The new file slicing mechanism is more flexible, allowing compaction scheduling to be completely decoupled from the writer&#x27;s ingestion process. Based on this mechanism, Hudi has also implemented powerful non-blocking concurrency control. For details, refer to RFC-66 [5].</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lsm-timeline">LSM Timeline<a href="#lsm-timeline" class="hash-link" aria-label="Direct link to LSM Timeline" title="Direct link to LSM Timeline" translate="no">​</a></h3>
<p>The new file slicing mechanism requires efficient querying of completion time based on instant time. Starting from version 1.x, Hudi re-implemented the archived timeline. The new archived timeline organizes its data files in an LSM-tree structure, enabling fast range-filtering queries based on instant time and supporting efficient data skipping. For more details, refer to [6].</p>
<p><img decoding="async" loading="lazy" alt="LSM Timeline" src="/assets/images/lsm-timeline-93c42d7fa376fa8cc8c7030f3949559b.png" width="1308" height="658" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="truetime">TrueTime<a href="#truetime" class="hash-link" aria-label="Direct link to TrueTime" title="Direct link to TrueTime" translate="no">​</a></h2>
<p>A critical premise of Hudi&#x27;s timeline is that the timestamp generated for instants must be globally monotonically increasing without any conflicts. However, maintaining time monotonicity in distributed transactions has long been a thorny problem due to:</p>
<ul>
<li class=""><strong>Clock skew</strong>: Physical clocks drift apart across machines.</li>
<li class=""><strong>Network latency</strong>: Communication delays between data centers.</li>
<li class=""><strong>Concurrent transactions</strong>: Difficulty in determining event ordering across regions.</li>
</ul>
<p>To solve this problem, Google Spanner&#x27;s TrueTime [1] uses a globally synchronized clock with bounded uncertainty, allowing it to assign timestamps monotonically without conflicts. Similarly, Hudi introduced the TrueTime API [2] starting from the 1.0 release. There are generally two approaches to realize TrueTime semantics:</p>
<ul>
<li class="">A single shared time generator process or service, like Google Spanner&#x27;s time service.</li>
<li class="">Each process generates its own time and waits until time &gt;= maximum expected clock drift across all processes, coordinated within a distributed lock.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="TrueTime" src="/assets/images/truetime-03ef10cc297714f597ec0f7b7eefa6dc.png" width="704" height="511" class="img_ev3q"></p>
<p>Hudi&#x27;s TrueTime API adopts the second approach: using a distributed lock to ensure only one process generates time at any given moment. The waiting mechanism ensures sufficient time passes so that the instant time is monotonically increasing globally.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="blocking-instant-time-generation-for-flink-writers">Blocking Instant Time Generation for Flink Writers<a href="#blocking-instant-time-generation-for-flink-writers" class="hash-link" aria-label="Direct link to Blocking Instant Time Generation for Flink Writers" title="Direct link to Blocking Instant Time Generation for Flink Writers" translate="no">​</a></h2>
<p>For Flink streaming ingestion, each incremental transaction write can be roughly divided into the following stages:</p>
<ol>
<li class="">Writers write records into the in-memory buffer.</li>
<li class="">When the buffer is full or a checkpoint is triggered, writers send a request to the coordinator for an instant time.</li>
<li class="">Writers create data files based on the instant time and flush the data to storage.</li>
<li class="">The coordinator commits the flushed files and metadata after receiving the ACK event for the successful checkpoint.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Blocking Instant Generation" src="/assets/images/blocking-instant-gen-a010e393cfb2af831dc9169150da90da.png" width="1280" height="425" class="img_ev3q"></p>
<p>From Hudi&#x27;s file slicing mechanism, we can see that the instant time is required before writers flush records into storage. Before 1.1, although the committing operation was performed asynchronously in the coordinator, the writer&#x27;s request for a new instant would be blocked, because only after the previous instant is successfully committed can the coordinator create a new instant. Let&#x27;s say a batch of records finished flushing with checkpoint <code>ckp_1</code> in the writer at <code>T1</code>, and <code>ckp_1</code> completed at time <code>T2</code>—the writer will be blocked in the time interval <code>[T1, T2]</code> (a new instant time is generated only after the <code>ckp_1</code> completion event is handled and committed to the Hudi timeline). This blocking behavior ensures strict transaction ordering across multiple instants; however, it can lead to significant throughput fluctuations under large-scale workloads.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="async-instant-time-generation">Async Instant Time Generation<a href="#async-instant-time-generation" class="hash-link" aria-label="Direct link to Async Instant Time Generation" title="Direct link to Async Instant Time Generation" translate="no">​</a></h2>
<p>To address throughput fluctuation caused by blocking instant generation, Hudi 1.1 introduces asynchronous instant generation for Flink writers. Using the aforementioned example, &quot;async&quot; means that before the previous instant is successfully committed to the timeline (during the time range <code>[T1, T2]</code>), the coordinator can create a new instant and return it to the writer for flushing a new batch of data. Thus, writers are no longer blocked during checkpoints, and the ingestion throughput will be more stable and smoother.</p>
<p><img decoding="async" loading="lazy" alt="Async Instant Generation" src="/assets/images/async-instant-gen-24927649541bf14d72074edee3f38ab9.png" width="1280" height="417" class="img_ev3q"></p>
<p><strong>Overall write workflow:</strong></p>
<ul>
<li class=""><strong>Writer</strong>: Requests instant time from the coordinator before flushing data:<!-- -->
<ul>
<li class="">Data flushing may be triggered either by a checkpoint or by the buffer being full, so the request carries the last completed checkpoint ID, rather than the current checkpoint ID.</li>
<li class="">For a request made at the initial startup of a task, if it&#x27;s recovered from state, the checkpoint ID is fetched from the state; otherwise, it&#x27;s set to -1.</li>
</ul>
</li>
<li class=""><strong>Coordinator</strong>: Responsible for instant generation. Each checkpoint ID corresponds to an instant. The coordinator maintains the mapping in the WriteMeta buffer: <code>CheckpointID → { Instant → { Writer TaskID → Writer MetaEvent }}</code>, where <code>{Writer TaskID → Writer MetaEvent}</code> is the mapping between each writer&#x27;s parallel task ID and the file metadata written during the current checkpoint interval. Upon receiving an instant request from a writer:<!-- -->
<ul>
<li class="">If an instant corresponding to the checkpoint ID already exists in the WriteMeta buffer, the cached instant is returned directly.</li>
<li class="">Otherwise, a new instant is generated, added to the WriteMeta buffer, and then returned to the writer.</li>
</ul>
</li>
<li class=""><strong>Writer</strong>: Completes data writing, generates data files, and sends the file metadata to the coordinator.</li>
<li class=""><strong>Coordinator</strong>: Upon receiving the file metadata from a writer, updates the WriteMeta buffer:<!-- -->
<ul>
<li class="">If there is no existing metadata for the current writer task in the buffer, the metadata is written directly into the cache.</li>
<li class="">If metadata for the current writer task already exists (i.e., the writer has flushed multiple times), the metadata is merged and then the cache is updated.</li>
</ul>
</li>
<li class=""><strong>Coordinator</strong>: When the ACK event for a checkpoint (ID = n) is received, it starts serially and orderly committing the instants recorded in the WriteMeta buffer. The commit scope includes all instants corresponding to checkpoint IDs &lt; n. Once committed successfully, the instants are removed from the buffer.<!-- -->
<ul>
<li class="">Since Flink&#x27;s checkpoint ACK mechanism does not guarantee that the coordinator will receive an ACK for every checkpoint, the commit logic follows Flink&#x27;s Checkpoint Subsume Contract [4]: if the ACK for checkpoint <code>ckp_i</code> is not received, its written metadata is subsumed into the pending metadata for the next checkpoint <code>ckp_i+1</code>, and will be committed once the ACK for <code>ckp_i+1</code> is received.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="writemeta-failover">WriteMeta Failover<a href="#writemeta-failover" class="hash-link" aria-label="Direct link to WriteMeta Failover" title="Direct link to WriteMeta Failover" translate="no">​</a></h3>
<p>Considering that the coordinator cannot guarantee receiving every checkpoint ACK event, the in-memory WriteMeta buffer needs to be persisted to Flink state to prevent data loss after a task failover.</p>
<p>When designing the snapshot for the WriteMeta buffer, the following points need to be considered:</p>
<ul>
<li class="">WriteMeta is initially stored in the writer&#x27;s buffer. Only when a checkpoint is triggered or an eager flush occurs does the writer send the current WriteMeta to the coordinator.</li>
<li class="">During checkpointing, the coordinator takes a snapshot first, followed by the writers&#x27; snapshot. At this point, the coordinator&#x27;s cache does not yet include the WriteMeta for the current checkpoint interval.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="WriteMeta Failover" src="/assets/images/writemeta-failover-bbf45f83cbbad492e7aee22a38a13d6e.png" width="1280" height="446" class="img_ev3q"></p>
<p>Based on the above considerations, the WriteMeta snapshot process for checkpoint i is as follows:</p>
<ol>
<li class="">The coordinator first persists the WriteMeta for all checkpoint IDs &lt; i to Flink state.</li>
<li class="">The writer sends the WriteMeta generated during checkpoint i to the coordinator, awaiting commit.</li>
<li class="">The writer cleans up the historical WriteMeta in state and persists the WriteMeta for checkpoint i to Flink state.</li>
</ol>
<p>This approach of persisting the WriteMeta buffer ensures that metadata is not lost, while also preventing state bloat in the WriteMeta state.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>The async instant time generation mechanism introduced in Hudi 1.1 is an important feature for improving the stability of Flink streaming ingestion. By eliminating the blocking dependency on the completion of the previous instant&#x27;s commit, this mechanism solves the throughput fluctuation and backpressure problems under large-scale workloads. At the same time, it still maintains strong transactional guarantees and seamless integration with Flink&#x27;s checkpoint semantics. This enhancement is fully backward-compatible and transparent to end users, enabling existing Flink streaming ingestion jobs to immediately benefit from smoother and more scalable ingestion with minimal changes. As the demands on real-time data lakes continue to grow, such innovations are key to building robust, high-performance lakehouse architectures.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h2>
<p>[1] <a href="https://research.google/pubs/spanner-truetime-and-the-cap-theorem/" target="_blank" rel="noopener noreferrer" class="">https://research.google/pubs/spanner-truetime-and-the-cap-theorem/</a></p>
<p>[2] <a href="https://hudi.apache.org/docs/next/timeline/#timeline-components" target="_blank" rel="noopener noreferrer" class="">https://hudi.apache.org/docs/next/timeline/#timeline-components</a></p>
<p>[3] <a href="https://github.com/apache/hudi/blob/master/rfc/rfc-66/rfc-66.md" target="_blank" rel="noopener noreferrer" class="">https://github.com/apache/hudi/blob/master/rfc/rfc-66/rfc-66.md</a></p>
<p>[4] <a href="https://github.com/apache/flink/blob/master/flink-core/src/main/java/org/apache/flink/api/common/state/CheckpointListener.java" target="_blank" rel="noopener noreferrer" class="">https://github.com/apache/flink/blob/master/flink-core/src/main/java/org/apache/flink/api/common/state/CheckpointListener.java</a></p>
<p>[5] <a href="https://github.com/apache/hudi/blob/master/rfc/rfc-66/rfc-66.md" target="_blank" rel="noopener noreferrer" class="">https://github.com/apache/hudi/blob/master/rfc/rfc-66/rfc-66.md</a></p>
<p>[6] <a href="https://hudi.apache.org/docs/next/timeline/#lsm-timeline-history" target="_blank" rel="noopener noreferrer" class="">https://hudi.apache.org/docs/next/timeline/#lsm-timeline-history</a></p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/apache/hudi/edit/asf-site/website/blog/blog/2026-01-09-hudi-11-deep-dive-flink-async-instant-gen.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2025/12/29/apache-hudi-2025-a-year-in-review"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Apache Hudi 2025: A Year In Review</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#instant-time" class="table-of-contents__link toc-highlight">Instant Time</a></li><li><a href="#completion-time" class="table-of-contents__link toc-highlight">Completion Time</a><ul><li><a href="#file-slicing-based-on-instant-time" class="table-of-contents__link toc-highlight">File Slicing Based on Instant Time</a></li><li><a href="#file-slicing-based-on-completion-time" class="table-of-contents__link toc-highlight">File Slicing Based on Completion Time</a></li><li><a href="#lsm-timeline" class="table-of-contents__link toc-highlight">LSM Timeline</a></li></ul></li><li><a href="#truetime" class="table-of-contents__link toc-highlight">TrueTime</a></li><li><a href="#blocking-instant-time-generation-for-flink-writers" class="table-of-contents__link toc-highlight">Blocking Instant Time Generation for Flink Writers</a></li><li><a href="#async-instant-time-generation" class="table-of-contents__link toc-highlight">Async Instant Time Generation</a><ul><li><a href="#writemeta-failover" class="table-of-contents__link toc-highlight">WriteMeta Failover</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footerCustom_j_zv"><div class="container container-fluid container_y1z5"><div class="brand_kMBW"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_DDai"><img src="/assets/images/hudi.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="links_AXCu"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-1.1">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Adopters</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/tutorial-series">Tutorial Series</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/faq">FAQ</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oci_hoodie">Oracle Cloud</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/privacy">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/telemetry">Telemetry</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div></div><div class="legal_MFbX"><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=8f594acf-9b77-44fb-9475-3e82ead1910c"><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=47&amp;rec=1"></div></div></div></footer></div>
</body>
</html>