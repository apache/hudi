<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Hudi Z-Order and Hilbert Space Filling Curves | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="apache hudi, data lake, lakehouse, big data, apache spark, apache flink, presto, trino, analytics, data engineering"><meta data-rh="true" property="og:title" content="Hudi Z-Order and Hilbert Space Filling Curves | Apache Hudi"><meta data-rh="true" name="description" content="As of Hudi v0.10.0, we are excited to introduce support for an advanced Data Layout Optimization technique known in the database realm as Z-order and Hilbert space filling curves."><meta data-rh="true" property="og:description" content="As of Hudi v0.10.0, we are excited to introduce support for an advanced Data Layout Optimization technique known in the database realm as Z-order and Hilbert space filling curves."><meta data-rh="true" property="og:image" content="https://hudi.apache.org/assets/images/zordercurve.png"><meta data-rh="true" name="twitter:image" content="https://hudi.apache.org/assets/images/zordercurve.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-12-29T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="design,clustering,data skipping,apache hudi"><link data-rh="true" rel="icon" href="/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/cn/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves" hreflang="cn"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves","mainEntityOfPage":"https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves","url":"https://hudi.apache.org/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves","headline":"Hudi Z-Order and Hilbert Space Filling Curves","name":"Hudi Z-Order and Hilbert Space Filling Curves","description":"As of Hudi v0.10.0, we are excited to introduce support for an advanced Data Layout Optimization technique known in the database realm as Z-order and Hilbert space filling curves.","datePublished":"2021-12-29T00:00:00.000Z","author":{"@type":"Person","name":"Alexey Kudinkin and Tao Meng"},"image":{"@type":"ImageObject","@id":"https://hudi.apache.org/assets/images/zordercurve.png","url":"https://hudi.apache.org/assets/images/zordercurve.png","contentUrl":"https://hudi.apache.org/assets/images/zordercurve.png","caption":"title image for the blog post: Hudi Z-Order and Hilbert Space Filling Curves"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://hudi.apache.org/blog","name":"Blogs List Page"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/videos/atom.xml" title="Apache Hudi Atom Feed">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css">
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="9e4444ba-93cc-45ea-b143-783ae0fbeb6f" data-project-name="Apache Hudi" data-project-color="#FFFFFF" data-project-logo="https://hudi.apache.org/assets/images/logo-big.png" data-modal-disclaimer="This AI assistant answers Apache Hudi questions using your [documentation](https://hudi.apache.org/docs/quick-start-guide/), [dev setup](https://hudi.apache.org/contribute/developer-setup/), the [tech specs](https://hudi.apache.org/tech-specs-1point0/) and open GitHub Issues from the last year." data-modal-title="Apache Hudi AI Assistant" data-modal-example-questions-title="Try asking me..." data-modal-example-questions="How can I convert an existing COW table to MOR?,How do I set up incremental queries with Hudi tables?" data-modal-image="https://hudi.apache.org/assets/images/logo-big-2.png" data-modal-image-ask-ai="https://hudi.apache.org/assets/images/logo-big-2.png" data-modal-header-min-height="64px" data-modal-image-height="40" data-modal-image-width="40" data-modal-header-bg-color="#f8f9fa" data-modal-title-color="#0db1f9" data-button-text-color="#29557a" data-button-text="Ask AI" data-consent-required="true" data-consent-screen-title="Help us improve our AI assistant" data-consent-screen-disclaimer="By clicking &amp;quot;Allow tracking&amp;quot;, you consent to the use of the AI assistant in accordance with kapa.ai&#39;s [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google&#39;s [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai&#39;s and Google&#39;s privacy policies." data-consent-screen-accept-button-text="Allow tracking" data-modal-disclaimer-font-size="0.80rem" data-query-input-placeholder-text-color="#29557a" data-submit-query-button-bg-color="#0db1f9" data-query-input-text-color="#29557a" data-user-analytics-cookie-enabled="false" data-query-input-border-color="#211b0e" data-question-text-color="#0db1f9" data-answer-text-color="#000" data-thread-clear-button-bg-color="#000000" data-thread-clear-button-text-color="#FFFFFF" data-answer-feedback-button-bg-color="#000000" data-answer-feedback-button-text-color="#FFFFFF" data-answer-feedback-button-active-bg-color="#000000" data-answer-feedback-button-active-text-color="#FFFFFF" data-answer-copy-button-bg-color="#000000" data-answer-copy-button-text-color="#FFFFFF" data-example-question-button-text-color="#29557a" data-modal-disclaimer-bg-color="#f8f9fa" data-modal-disclaimer-text-color="#0db1f9" data-deep-thinking-button-bg-color="#0db1f9" data-deep-thinking-button-text-color="#FFFFFF" data-deep-thinking-button-active-bg-color="#0db1f9" data-deep-thinking-button-hover-bg-color="#FFFFFF" data-deep-thinking-button-active-hover-bg-color="#29557a" data-deep-thinking-button-active-text-color="#FFFFFF" async></script><link rel="stylesheet" href="/assets/css/styles.d2102ec6.css">
<script src="/assets/js/runtime~main.93764600.js" defer="defer"></script>
<script src="/assets/js/main.31352d6a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/tutorial-series">Tutorial Series</a></li><li><a class="dropdown__link" href="/talks">Talks</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/blog">Blog</a></li><li><a class="dropdown__link" href="/videos">Video Guides</a></li><li><a class="dropdown__link" href="/docs/faq">FAQ</a></li><li><a class="dropdown__link" href="/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/tech-specs-1point0">Tech Specs 1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/developer-sync-call">Developer Sync Call</a></li><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/report-security-issues">Report Issues</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li><li><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="dropdown__link">Join Our Slack Space<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/overview">1.0.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/overview">Current</a></li><li><a class="dropdown__link" href="/docs/overview">1.0.2</a></li><li><a class="dropdown__link" href="/docs/1.0.1/overview">1.0.1</a></li><li><a class="dropdown__link" href="/docs/1.0.0/overview">1.0.0</a></li><li><a class="dropdown__link" href="/docs/0.15.0/overview">0.15.0</a></li><li><a class="dropdown__link" href="/docs/0.14.1/overview">0.14.1</a></li><li><a class="dropdown__link" href="/docs/0.14.0/overview">0.14.0</a></li><li><a class="dropdown__link" href="/docs/0.13.1/overview">0.13.1</a></li><li><a class="dropdown__link" href="/docs/0.13.0/overview">0.13.0</a></li><li><a class="dropdown__link" href="/docs/0.12.3/overview">0.12.3</a></li><li><a class="dropdown__link" href="/docs/0.12.2/overview">0.12.2</a></li><li><a class="dropdown__link" href="/docs/0.12.1/overview">0.12.1</a></li><li><a class="dropdown__link" href="/docs/0.12.0/overview">0.12.0</a></li><li><a class="dropdown__link" href="/docs/0.11.1/overview">0.11.1</a></li><li><a class="dropdown__link" href="/docs/0.11.0/overview">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.1/overview">0.10.1</a></li><li><a class="dropdown__link" href="/docs/0.10.0/overview">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/overview">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/overview">0.8.0</a></li><li><a class="dropdown__link" href="/docs/0.7.0/overview">0.7.0</a></li><li><a class="dropdown__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li><a class="dropdown__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li><a class="dropdown__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li><a class="dropdown__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li><a class="dropdown__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a><ul class="dropdown__menu"><li><a href="/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/cn/blog/2021/12/29/hudi-zorder-and-hilbert-space-filling-curves" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="cn">Chinese</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Hudi YouTube Channel"></a><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><span class="searchText_sHOJ">Search</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/powered-by">Who&#x27;s Using</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/releases/download">Download</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Versions</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Languages<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a></li><li class="menu__list-item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Hudi Twitter Handle"></a></li><li class="menu__list-item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="menu__link header-slack-link" aria-label="Hudi Slack Channel"></a></li><li class="menu__list-item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="menu__link header-youtube-link" aria-label="Hudi YouTube Channel"></a></li><li class="menu__list-item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-2" itemscope="" itemtype="http://schema.org/Blog"><article class=""><header><h1 class="title_xvU1">Hudi Z-Order and Hilbert Space Filling Curves</h1><div class="container_iJTo margin-vert--sm"><time datetime="2021-12-29T00:00:00.000Z">December 29, 2021</time><div class="row"><div class="authorWrapper_ApDF col col--12 authorCol_q4o9">Alexey Kudinkin and Tao Meng</div></div><span class="marker_H0Am">9 min read</span></div><div class="row tagsListInline margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/design">design</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/clustering">clustering</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/data-skipping">data skipping</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/apache-hudi">apache hudi</a></li></ul></div></div></header><div id="__blog-post-container" class="markdown"><p>As of Hudi v0.10.0, we are excited to introduce support for an advanced Data Layout Optimization technique known in the database realm as <a href="https://en.wikipedia.org/wiki/Z-order_curve" target="_blank" rel="noopener noreferrer">Z-order</a> and <a href="https://en.wikipedia.org/wiki/Hilbert_curve" target="_blank" rel="noopener noreferrer">Hilbert</a> space filling curves.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h3>
<p>Amazon EMR team recently published a <a href="https://aws.amazon.com/blogs/big-data/new-features-from-apache-hudi-0-7-0-and-0-8-0-available-on-amazon-emr/" target="_blank" rel="noopener noreferrer">great article</a> show-casing how <a href="https://hudi.apache.org/docs/clustering" target="_blank" rel="noopener noreferrer">clustering</a> your data can improve your <em>query performance</em>.</p>
<p>To better understand what&#x27;s going on and how it&#x27;s related to space-filling curves, let&#x27;s zoom in to the setup in that article:</p>
<p>In the article, 2 <a href="https://hudi.apache.org/docs/overview" target="_blank" rel="noopener noreferrer">Apache Hudi</a> tables are compared (both ingested from the well-known <a href="https://s3.amazonaws.com/amazon-reviews-pds/tsv/index.txt" target="_blank" rel="noopener noreferrer">Amazon Reviews</a> dataset):</p>
<ul>
<li><code>amazon_reviews</code> table which is not clustered (ie the data has not been re-ordered by any particular key)</li>
<li><code>amazon_reviews_clustered</code> table which is clustered. When data is clustered by Apache Hudi the data is <a href="https://en.wikipedia.org/wiki/Lexicographic_order" target="_blank" rel="noopener noreferrer"><strong>lexicographically ordered</strong></a> (hereon we will be referring to this kind of ordering as <strong><em>linear ordering</em></strong>) by 2 columns: <code>star_rating</code>, <code>total_votes</code> (see screenshot below)</li>
</ul>
<img src="/assets/images/hudiconfigz.png" alt="drawing" width="800">
<p><em>Screenshot of the Hudi configuration (from Amazon EMR team article)</em></p>
<p>To showcase the improvement in querying performance, the following queries are executed against both of these tables:</p>
<img src="/assets/images/table1.png" alt="drawing" width="800">
<img src="/assets/images/table2.png" alt="drawing" width="800">
<p><em>Screenshots of the queries run against the previously setup tables (from Amazon EMR team article)</em></p>
<p>The important consideration to point out here is that the queries were specifying <strong>both of the columns</strong> latter table is ordered by (both <code>star_rating</code> and <code>total_votes</code>).</p>
<p>And this is unfortunately a crucial limitation of the linear/lexicographic ordering, the value of the ordering diminishes very quickly as you add more columns. It&#x27;s not hard to see why:</p>
<img src="/assets/images/lexicographicorder.png" alt="drawing" width="250">
<p><em>Courtesy of Wikipedia,</em> <a href="https://en.wikipedia.org/wiki/Lexicographic_order" target="_blank" rel="noopener noreferrer"><em>Lexicographic Order article</em></a></p>
<p>From this image you can see that with lexicographically ordered 3-tuples of integers, only the first column is able to feature crucial property of <strong>locality</strong> for all of the records having the same value: for ex, all of the records wit values starting with &quot;1&quot;, &quot;2&quot;, &quot;3&quot; (in the first columns) are nicely clumped together. However if you try to find all the values that have &quot;5&quot; as the value in their third column you&#x27;d see that those are now dispersed all over the place, not being localized at all.</p>
<p>The crucial property that improves query performance is locality: it enables queries to substantially reduce the search space and the number of files that need to be scanned, parsed, etc.</p>
<p>But... does this mean that our queries are doomed to do a full-scan if we&#x27;re filtering by anything other than the first (or more accurate would be to say prefix) of the list of columns the table is ordered by?</p>
<p>Not exactly: luckily, locality is also a property that space-filling curves enable while enumerating multi-dimensional spaces (records in our table could be represented as points in N-dimensional space, where N is the number of columns in our table)</p>
<p>How does it work?</p>
<p>Let&#x27;s take Z-curve as an example: Z-order curves fitting a 2-dimensional plane would look like the following:</p>
<img src="/assets/images/zordercurve.png" alt="drawing" width="400">
<p><em>Courtesy of Wikipedia,</em> <a href="https://en.wikipedia.org/wiki/Z-order_curve" target="_blank" rel="noopener noreferrer"><em>Z-order curve article</em></a></p>
<p>As you can see following its path, instead of simply ordering by one coordinate (&quot;x&quot;) first, following with the other, it&#x27;s actually ordering them as if the bits of those coordinates have been <em>interwoven</em> into a single value:</p>
<table><thead><tr><th>Coordinate</th><th>X (binary)</th><th>Y (binary)</th><th>Z-values (ordered)</th></tr></thead><tbody><tr><td>(0, 0)</td><td>000</td><td>000</td><td>000000</td></tr><tr><td>(1, 0)</td><td>001</td><td>000</td><td>000001</td></tr><tr><td>(0, 1)</td><td>000</td><td>001</td><td>000010</td></tr><tr><td>(1, 1)</td><td>001</td><td>001</td><td>000011</td></tr></tbody></table>
<p>This allows for that crucial property of locality (even though a slightly &quot;stretched&quot; one) to be carried over to all columns as compared to just the first one in case of linear ordering.</p>
<p>In a similar fashion, Hilbert curves also allow you to map points in a N-dimensional space (rows in our table) onto 1-dimensional curve, essentially <em>ordering</em> them, while still preserving the crucial property of locality. Read more details about Hilbert Curves <a href="https://drum.lib.umd.edu/handle/1903/804" target="_blank" rel="noopener noreferrer">here</a>. Our personal experiments so far show that ordering data along a Hilbert curve leads to better clustering and performance outcomes.</p>
<p>Now, let&#x27;s check it out in action!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3>
<p>We will use the <a href="https://s3.amazonaws.com/amazon-reviews-pds/readme.html" target="_blank" rel="noopener noreferrer">Amazon Reviews</a> dataset again, but this time we will use Hudi to Z-Order by <code>product_id</code>, <code>customer_id</code> columns tuple instead of Clustering or <em>linear ordering</em>.</p>
<p>No special preparations are required for the dataset, you can simply download it from <a href="https://s3.amazonaws.com/amazon-reviews-pds/readme.html" target="_blank" rel="noopener noreferrer">S3</a> in Parquet format and use it directly as an input for Spark ingesting it into Hudi table.</p>
<p>Launch Spark Shell</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./bin/spark-shell --master &#x27;local[4]&#x27; --driver-memory 8G --executor-memory 8G \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --jars ../../packaging/hudi-spark-bundle/target/hudi-spark3-bundle_2.12-0.10.0.jar \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --packages org.apache.spark:spark-avro_2.12:2.4.4 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --conf &#x27;spark.serializer=org.apache.spark.serializer.KryoSerializer&#x27;</span><br></span></code></pre></div></div>
<p>Paste</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hadoop.fs.{FileStatus, Path}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import scala.collection.JavaConversions._</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.spark.sql.SaveMode._</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.{DataSourceReadOptions, DataSourceWriteOptions}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.DataSourceWriteOptions._</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.common.fs.FSUtils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.common.table.HoodieTableMetaClient</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.common.util.ClusteringUtils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.config.HoodieClusteringConfig</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.hudi.config.HoodieWriteConfig._</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.spark.sql.DataFrame</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.stream.Collectors</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val layoutOptStrategy = &quot;z-order&quot;; // OR &quot;hilbert&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val inputPath = s&quot;file:///${System.getProperty(&quot;user.home&quot;)}/datasets/amazon_reviews_parquet&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val tableName = s&quot;amazon_reviews_${layoutOptStrategy}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val outputPath = s&quot;file:///tmp/hudi/$tableName&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def safeTableName(s: String) = s.replace(&#x27;-&#x27;, &#x27;_&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val commonOpts =</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Map(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;hoodie.compact.inline&quot; -&gt; &quot;false&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;hoodie.bulk_insert.shuffle.parallelism&quot; -&gt; &quot;10&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Writing to Hudi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val df = spark.read.parquet(inputPath)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">df.write.format(&quot;hudi&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(DataSourceWriteOptions.TABLE_TYPE.key(), COW_TABLE_TYPE_OPT_VAL)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.table.name&quot;, tableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(PRECOMBINE_FIELD.key(), &quot;review_id&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(RECORDKEY_FIELD.key(), &quot;review_id&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(DataSourceWriteOptions.PARTITIONPATH_FIELD.key(), &quot;product_category&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.clustering.inline&quot;, &quot;true&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.clustering.inline.max.commits&quot;, &quot;1&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // NOTE: Small file limit is intentionally kept _ABOVE_ target file-size max threshold for Clustering,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // to force re-clustering</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.clustering.plan.strategy.small.file.limit&quot;, String.valueOf(1024 * 1024 * 1024)) // 1Gb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.clustering.plan.strategy.target.file.max.bytes&quot;, String.valueOf(128 * 1024 * 1024)) // 128Mb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // NOTE: We&#x27;re increasing cap on number of file-groups produced as part of the Clustering run to be able to accommodate for the </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // whole dataset (~33Gb)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.clustering.plan.strategy.max.num.groups&quot;, String.valueOf(4096))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(HoodieClusteringConfig.LAYOUT_OPTIMIZE_ENABLE.key, &quot;true&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(HoodieClusteringConfig.LAYOUT_OPTIMIZE_STRATEGY.key, layoutOptStrategy)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(HoodieClusteringConfig.PLAN_STRATEGY_SORT_COLUMNS.key, &quot;product_id,customer_id&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(DataSourceWriteOptions.OPERATION.key(), DataSourceWriteOptions.BULK_INSERT_OPERATION_OPT_VAL)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(BULK_INSERT_SORT_MODE.key(), &quot;NONE&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .options(commonOpts)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .mode(ErrorIfExists)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing">​</a></h3>
<p>Please keep in mind, that each individual test is run in a separate spark-shell to avoid caching getting in the way of our measurements.</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">////////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Reading</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">///////////////////////////////////////////////////////////////</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Temp Table w/ Data Skipping DISABLED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val readDf: DataFrame =</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  spark.read.option(DataSourceReadOptions.ENABLE_DATA_SKIPPING.key(), &quot;false&quot;).format(&quot;hudi&quot;).load(outputPath)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val rawSnapshotTableName = safeTableName(s&quot;${tableName}_sql_snapshot&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">readDf.createOrReplaceTempView(rawSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Temp Table w/ Data Skipping ENABLED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val readDfSkip: DataFrame =</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  spark.read.option(DataSourceReadOptions.ENABLE_DATA_SKIPPING.key(), &quot;true&quot;).format(&quot;hudi&quot;).load(outputPath)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val dataSkippingSnapshotTableName = safeTableName(s&quot;${tableName}_sql_snapshot_skipping&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">readDfSkip.createOrReplaceTempView(dataSkippingSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Query 1: Total votes by product_category, for 6 months</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def runQuery1(tableName: String) = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // Query 1: Total votes by product_category, for 6 months</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  spark.sql(s&quot;SELECT sum(total_votes), product_category FROM $tableName WHERE review_date &gt; &#x27;2013-12-15&#x27; AND review_date &lt; &#x27;2014-06-01&#x27; GROUP BY product_category&quot;).show()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Query 2: Average star rating by product_id, for some product</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def runQuery2(tableName: String) = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  spark.sql(s&quot;SELECT avg(star_rating), product_id FROM $tableName WHERE product_id in (&#x27;B0184XC75U&#x27;) GROUP BY product_id&quot;).show()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Query 3: Count number of reviews by customer_id for some 5 customers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def runQuery3(tableName: String) = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  spark.sql(s&quot;SELECT count(*) as num_reviews, customer_id FROM $tableName WHERE customer_id in (&#x27;53096570&#x27;,&#x27;10046284&#x27;,&#x27;53096576&#x27;,&#x27;10000196&#x27;,&#x27;21700145&#x27;) GROUP BY customer_id&quot;).show()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Query 1: Is a &quot;wide&quot; query and hence it&#x27;s expected to touch a lot of files</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scala&gt; runQuery1(rawSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|sum(total_votes)|    product_category|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         1050944|                  PC|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          867794|             Kitchen|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         1167489|                Home|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          927531|            Wireless|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|            6861|               Video|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           39602| Digital_Video_Games|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          954924|Digital_Video_Dow...|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           81876|             Luggage|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          320536|         Video_Games|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          817679|              Sports|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           11451|  Mobile_Electronics|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          228739|  Home_Entertainment|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         3769269|Digital_Ebook_Pur...|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          252273|                Baby|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          735042|             Apparel|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           49101|    Major_Appliances|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          484732|             Grocery|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          285682|               Tools|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          459980|         Electronics|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          454258|            Outdoors|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">only showing top 20 rows</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scala&gt; runQuery1(dataSkippingSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|sum(total_votes)|    product_category|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         1050944|                  PC|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          867794|             Kitchen|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         1167489|                Home|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          927531|            Wireless|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|            6861|               Video|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           39602| Digital_Video_Games|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          954924|Digital_Video_Dow...|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           81876|             Luggage|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          320536|         Video_Games|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          817679|              Sports|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           11451|  Mobile_Electronics|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          228739|  Home_Entertainment|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         3769269|Digital_Ebook_Pur...|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          252273|                Baby|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          735042|             Apparel|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|           49101|    Major_Appliances|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          484732|             Grocery|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          285682|               Tools|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          459980|         Electronics|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          454258|            Outdoors|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">only showing top 20 rows</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Query 2: Is a &quot;pointwise&quot; query and hence it&#x27;s expected that data-skipping should substantially reduce number </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// of files scanned (as compared to Baseline)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// NOTE: That Linear Ordering (as compared to Space-curve based on) will have similar effect on performance reducing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// total # of Parquet files scanned, since we&#x27;re querying on the prefix of the ordering key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scala&gt; runQuery2(rawSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|avg(star_rating)|product_id|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|             1.0|B0184XC75U|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scala&gt; runQuery2(dataSkippingSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|avg(star_rating)|product_id|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|             1.0|B0184XC75U|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Query 3: Similar to Q2, is a &quot;pointwise&quot; query, but querying other part of the ordering-key (product_id, customer_id)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// and hence it&#x27;s expected that data-skipping should substantially reduce number of files scanned (as compared to Baseline, Linear Ordering).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// NOTE: That Linear Ordering (as compared to Space-curve based on) will _NOT_ have similar effect on performance reducing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// total # of Parquet files scanned, since we&#x27;re NOT querying on the prefix of the ordering key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scala&gt; runQuery3(rawSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+-----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|num_reviews|customer_id|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+-----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         50|   53096570|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          3|   53096576|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         25|   10046284|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          1|   10000196|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         14|   21700145|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+-----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">scala&gt; runQuery3(dataSkippingSnapshotTableName)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+-----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|num_reviews|customer_id|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+-----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         50|   53096570|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          3|   53096576|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         25|   10046284|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|          1|   10000196|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|         14|   21700145|</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+-----------+-----------+</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="results">Results<a href="#results" class="hash-link" aria-label="Direct link to Results" title="Direct link to Results">​</a></h3>
<p>We&#x27;ve summarized the measured performance metrics below:</p>
<table><thead><tr><th><strong>Query</strong></th><th><strong>Baseline (B)</strong> duration (files scanned / size)</th><th><strong>Linear Sorting (S)</strong></th><th><strong>Z-order (Z)</strong> duration (scanned)</th><th><strong>Hilbert (H)</strong> duration (scanned)</th></tr></thead><tbody><tr><td>Q1</td><td>14s (543 / 31.4Gb)</td><td>15s (533 / 28.8Gb)</td><td>15s (543 / 31.4Gb)</td><td>14s (541 / 31.3Gb)</td></tr><tr><td>Q2</td><td>21s (543 / 31.4Gb)</td><td>10s (533 / 28.8Gb)</td><td><strong>8s</strong> <strong>(243 / 14.4Gb)</strong></td><td><strong>7s</strong> <strong>(237 / 13.9Gb)</strong></td></tr><tr><td>Q3</td><td>17s (543 / 31.4Gb)</td><td>15s (533 / 28.8Gb)</td><td><strong>6s</strong> <strong>(224 / 12.4Gb)</strong></td><td><strong>6s</strong> <strong>(219 / 11.9Gb)</strong></td></tr></tbody></table>
<p>As you can see multi-column linear ordering is not very effective for the queries that do filtering by columns other than the first one (Q2, Q3).</p>
<p>Which is a very clear contrast with space-filling curves (both Z-order and Hilbert) that allow to speed up query time by up to <strong>3x!</strong></p>
<p>It&#x27;s worth noting that the performance gains are heavily dependent on your underlying data and queries. In benchmarks on our internal data we were able to achieve queries performance improvements of more than <strong>11x!</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="epilogue">Epilogue<a href="#epilogue" class="hash-link" aria-label="Direct link to Epilogue" title="Direct link to Epilogue">​</a></h3>
<p>Apache Hudi v0.10 brings new layout optimization capabilities Z-order and Hilbert to open source. Using these industry leading layout optimization techniques can bring substantial performance improvement and cost savings to your queries!</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/hudi/edit/asf-site/website/blog/blog/2021-12-29-hudi-zorder-and-hilbert-space-filling-curves.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2021/12/31/The-Art-of-Building-Open-Data-Lakes-with-Apache-Hudi-Kafka-Hive-and-Debezium"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">The Art of Building Open Data Lakes with Apache Hudi, Kafka, Hive, and Debezium</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2021/12/20/New-features-from-Apache-Hudi-0.7.0-and-0.8.0-available-on-Amazon-EMR"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">New features from Apache Hudi 0.7.0 and 0.8.0 available on Amazon EMR</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#results" class="table-of-contents__link toc-highlight">Results</a></li><li><a href="#epilogue" class="table-of-contents__link toc-highlight">Epilogue</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-1.0.2">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Who&#x27;s Using</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/tutorial-series">Tutorial Series</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/privacy">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/telemetry">Telemetry</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. <br>Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=8f594acf-9b77-44fb-9475-3e82ead1910c"><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=47&amp;rec=1"></div></div></div></footer></div>
</body>
</html>