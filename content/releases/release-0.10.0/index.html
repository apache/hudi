<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css"><title data-react-helmet="true">Release 0.10.0 | Apache Hudi</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hudi.apache.org/releases/release-0.10.0"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-releases-current"><meta data-react-helmet="true" property="og:title" content="Release 0.10.0 | Apache Hudi"><meta data-react-helmet="true" name="description" content="Migration Guide"><meta data-react-helmet="true" property="og:description" content="Migration Guide"><link data-react-helmet="true" rel="icon" href="/assets/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hudi.apache.org/releases/release-0.10.0"><link data-react-helmet="true" rel="alternate" href="https://hudi.apache.org/releases/release-0.10.0" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hudi.apache.org/cn/releases/release-0.10.0" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://hudi.apache.org/releases/release-0.10.0" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.daeaa531.css">
<link rel="preload" href="/assets/js/runtime~main.54a8f98d.js" as="script">
<link rel="preload" href="/assets/js/main.50eebf66.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">⭐️ If you like Apache Hudi, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi">GitHub</a>! ⭐</div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedImage_TMUO themedImage--dark_uzRr"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/talks">Talks</a></li><li><a class="dropdown__link" href="/learn/faq">FAQ</a></li><li><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Technical Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/report-security-issues">Report Security Issues</a></li><li><a href="https://issues.apache.org/jira/projects/HUDI/summary" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Report Issues<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/overview">0.11.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/overview">Current</a></li><li><a class="dropdown__link" href="/docs/overview">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.1/overview">0.10.1</a></li><li><a class="dropdown__link" href="/docs/0.10.0/overview">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/overview">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/overview">0.8.0</a></li><li><a class="dropdown__link" href="/docs/0.7.0/overview">0.7.0</a></li><li><a class="dropdown__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li><a class="dropdown__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li><a class="dropdown__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li><a class="dropdown__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li><a class="dropdown__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/releases/release-0.10.0" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/cn/releases/release-0.10.0" target="_self" rel="noopener noreferrer" class="dropdown__link">Chinese</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/enQtODYyNDAxNzc5MTg2LTE5OTBlYmVhYjM0N2ZhOTJjOWM4YzBmMWU2MjZjMGE4NDc5ZDFiOGQ2N2VkYTVkNzU3ZDQ4OTI1NmFmYWQ0NzE" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/download">Download</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/release-0.11.0">Release 0.11.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/release-0.10.1">Release 0.10.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/releases/release-0.10.0">Release 0.10.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/release-0.9.0">Release 0.9.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/release-0.8.0">Release 0.8.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/release-0.7.0">Release 0.7.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/older-releases">Older Releases</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><a href="https://github.com/apache/hudi/releases/tag/release-0.10.0" target="_blank" rel="noopener noreferrer">Release 0.10.0</a> (<a href="/docs/quick-start-guide">docs</a>)</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="migration-guide">Migration Guide<a class="hash-link" href="#migration-guide" title="Direct link to heading">​</a></h2><ul><li>If migrating from an older release, please also check the upgrade instructions for each subsequent release below.</li><li>With 0.10.0, we have made some foundational fix to metadata table and so as part of upgrade, any existing metadata table is cleaned up.
Whenever Hudi is launched with newer table version i.e 3 (or moving from an earlier release to 0.10.0), an upgrade step will be executed automatically.
This automatic upgrade step will happen just once per Hudi table as the hoodie.table.version will be updated in property file after upgrade is completed.</li><li>Similarly, a command line tool for Downgrading (command - downgrade) is added if in case some users want to downgrade Hudi
from table version 3 to 2 or move from Hudi 0.10.0 to pre 0.10.0. This needs to be executed from a 0.10.0 hudi-cli binary/script.</li><li>We have made some major fixes to 0.10.0 release around metadata table and would recommend users to try out metadata
for better performance from optimized file listings. As part of the upgrade, please follow the below steps to enable metadata table.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="prerequisites-for-enabling-metadata-table">Prerequisites for enabling metadata table<a class="hash-link" href="#prerequisites-for-enabling-metadata-table" title="Direct link to heading">​</a></h3><p>Hudi writes and reads have to perform “list files” operation on the file system to get the current view of the system.
This could be very costly in cloud stores which could throttle your requests depending on the scale/size of your dataset.
So, we introduced a metadata table in 0.7.0 to cache the file listing for the table. With 0.10.0, we have made a foundational fix
to the metadata table with synchronous updates instead of async updates to simplify the overall design and to assist in
building future enhancements like multi-modal indexing. This can be turned on using the config hoodie.metadata.enable.
By default, metadata table based file listing feature is disabled.</p><p><strong>Deployment Model</strong> 1 : If your current deployment model is single writer and all table services (cleaning, clustering, compaction) are configured to be <strong>inline</strong>,
then you can turn on the metadata table without needing any additional configuration.</p><p><strong>Deployment Model</strong> 2 : If your current deployment model is <a href="https://hudi.apache.org/docs/concurrency_control" target="_blank" rel="noopener noreferrer">multi writer</a>
along with <a href="https://hudi.apache.org/docs/concurrency_control#enabling-multi-writing" target="_blank" rel="noopener noreferrer">lock providers</a> configured,
then you can turn on the metadata table without needing any additional configuration.</p><p><strong>Deployment Model 3</strong> : If your current deployment model is single writer along with async table services (such as cleaning, clustering, compaction) configured,
then it is a must to have the lock providers configured before turning on the metadata table.
Even if you have already had a metadata table turned on, and your deployment model employs async table services,
then it is  a must to have lock providers configured before upgrading to this release.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="upgrade-steps">Upgrade steps<a class="hash-link" href="#upgrade-steps" title="Direct link to heading">​</a></h3><p>For deployment mode 1, restarting the Single Writer with 0.10.0 is sufficient to upgrade the table.</p><p>For deployment model 2 with multi-writers, you can bring up the writers with 0.10.0 sequentially.
If you intend to use the metadata table, it is a must to have the <a href="https://hudi.apache.org/docs/configurations/#hoodiemetadataenable" target="_blank" rel="noopener noreferrer">metadata config</a> enabled across all the writers.
Otherwise, it will lead to loss of data from the inconsistent writer.</p><p>For deployment model 3 with single writer and async table services, restarting the single writer along with async services is sufficient to upgrade the table.
If async services are configured to run separately from the writer, then it is a must to have a consistent metadata config across all writers and async jobs.
Remember to configure the lock providers as detailed above if enabling the metadata table.</p><p>To leverage the metadata table based file listings, readers must have metadata config turned on explicitly while querying.
If not, readers will not leverage the file listings from the metadata table.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="spark-sql-primary-key-requirements">Spark-SQL primary key requirements<a class="hash-link" href="#spark-sql-primary-key-requirements" title="Direct link to heading">​</a></h3><p>Spark SQL in Hudi requires <code>primaryKey</code> to be specified by tblproperites or options in sql statement.
For update and delete operations, <code>preCombineField</code> is required as well. These requirements align with
Hudi datasource writer’s and the alignment resolves many behavioural discrepancies reported in previous versions.</p><p>To specify <code>primaryKey</code>, <code>preCombineField</code> or other hudi configs, <code>tblproperties</code> is a preferred way than <code>options</code>.
Spark SQL syntax is detailed <a href="https://spark.apache.org/docs/latest/sql-ref-syntax-ddl-create-table-datasource.html" target="_blank" rel="noopener noreferrer">DDL CREATE TABLE</a>.
In summary, any Hudi table created pre 0.10.0 without a <code>primaryKey</code> need to be recreated with a <code>primaryKey</code> field with 0.10.0.
We plan to remove the need for primary keys in future versions more holistically.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="release-highlights">Release Highlights<a class="hash-link" href="#release-highlights" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="kafka-connect">Kafka Connect<a class="hash-link" href="#kafka-connect" title="Direct link to heading">​</a></h3><p>In 0.10.0, we are adding a Kafka Connect Sink for Hudi that provides the ability for users to ingest/stream records from Apache Kafka to Hudi Tables.
While users can already stream Kafka records into Hudi tables using deltastreamer, the Kafka connect sink offers greater flexibility
to current users of Kafka connect sinks such as S3, HDFS, etc to additionally sink their data to a data lake.
It also helps users who do not want to deploy and operate spark.  The sink is currently experimental,
and users can quickly get started by referring to the detailed steps in the <a href="https://github.com/apache/hudi/blob/master/hudi-kafka-connect/README.md" target="_blank" rel="noopener noreferrer">README</a>.
For users who are curious about the internals, you can refer to the <a href="https://cwiki.apache.org/confluence/display/HUDI/RFC-32+Kafka+Connect+Sink+for+Hudi" target="_blank" rel="noopener noreferrer">RFC</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="z-ordering-hilbert-curves-and-data-skipping">Z-Ordering, Hilbert Curves and Data Skipping<a class="hash-link" href="#z-ordering-hilbert-curves-and-data-skipping" title="Direct link to heading">​</a></h3><p>In 0.10.0 we’re bringing (in experimental mode) support for indexing based on space-filling curves ordering initially
supporting <a href="https://en.wikipedia.org/wiki/Z-order_curve" target="_blank" rel="noopener noreferrer">Z-order</a> and <a href="https://en.wikipedia.org/wiki/Hilbert_curve" target="_blank" rel="noopener noreferrer">Hilbert curves</a>.</p><p>Data skipping is crucial in optimizing query performance. Enabled by the Column Statistics Index containing column level stats (like min, max, number of nulls, etc)
for individual data files, allows to quickly prune (for some queries) the search space by excluding files that are guaranteed
not to contain the values of interest for the query in question. Effectiveness of Data Skipping is maximized
when data is globally ordered by the columns, allowing individual Parquet files to contain disjoint ranges of values,
allowing for more effective pruning.</p><p>Using space-filling curves (like Z-order, Hilbert, etc) allows to effectively order rows in your table based on sort-key
comprising multiple columns, while preserving very important property: ordering of the rows using space-filling curve
on multi-column key will preserve within itself the ordering by each individual column as well.
This property comes very handy in use-cases when rows need to be ordered by complex multi-column sort keys,
which need to be queried efficiently by any subset of they key (not necessarily key’s prefix), making space-filling curves stand out
from plain and simple linear (or lexicographical) multi-column ordering. Using space-filling curves in such use-cases might bring order(s)
of magnitude speed-up in your queries&#x27; performance by considerably reducing search space, if applied appropriately.</p><p>These features are currently experimental, we’re planning to dive into more details showcasing real-world application
of the space-filling curves in a blog post soon.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="debezium-deltastreamer-sources">Debezium Deltastreamer sources<a class="hash-link" href="#debezium-deltastreamer-sources" title="Direct link to heading">​</a></h3><p>We have added two new debezium sources to our deltastreamer ecosystem. Debezium is an open source distributed platform for change data capture(CDC).
We have added PostgresDebeziumSource and MysqlDebeziumSource to route CDC logs into Apache Hudi via deltastreamer for postgres and my sql db respectively.
With this capability, we can continuously capture row-level changes that insert, update and delete records that were committed to a database and ingest to hudi.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="external-config-file-support">External config file support<a class="hash-link" href="#external-config-file-support" title="Direct link to heading">​</a></h3><p>Instead of directly and sometimes passing configurations to every Hudi job, since 0.10.0 users can now pass in configuration via a configuration file <code>hudi-default.conf</code>.
By default, Hudi would load the configuration file under /etc/hudi/conf directory. You can specify a different configuration directory location
by setting the <strong>HUDI_CONF_DIR</strong> environment variable. This can be useful for uniformly enforcing often repeated configs
like Hive sync settings, write/index tuning parameters, across your entire data lake.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="metadata-table">Metadata table<a class="hash-link" href="#metadata-table" title="Direct link to heading">​</a></h3><p>With 0.10.0, we have made a foundational fix to the metadata table with synchronous updates instead of async updates
to simplify the overall design and to assist in building future enhancements. This can be turned on using the config <a href="https://hudi.apache.org/docs/configurations/#hoodiemetadataenable" target="_blank" rel="noopener noreferrer">hoodie.metadata.enable</a>.
By default, metadata table based file listing feature is disabled. We have few following up tasks we are looking to fix by 0.11.0.
You can follow <a href="https://issues.apache.org/jira/browse/HUDI-1292" target="_blank" rel="noopener noreferrer">HUDI-1292</a> umbrella ticket for further details.
Please refer to the Migration guide section before turning on the metadata table.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="documentation-overhaul">Documentation overhaul<a class="hash-link" href="#documentation-overhaul" title="Direct link to heading">​</a></h3><p>Documentation was added for many pre-existing features that were previously missing docs. We reorganised the documentation
layout to improve discoverability and help new users ramp up on Hudi. We made many doc improvements based on community feedback.
See the latest docs at: <a href="https://hudi.apache.org/docs/overview" target="_blank" rel="noopener noreferrer">overview</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="writer-side-improvements">Writer side improvements<a class="hash-link" href="#writer-side-improvements" title="Direct link to heading">​</a></h2><p>Commit instant time format have been upgraded to ms granularity from secs granularity. Users don’t have to do any special handling in this,
regular upgrade should work smoothly.</p><p>Deltastreamer:</p><ul><li>ORCDFSSource has been added to support orc files with DFSSource.</li><li><code>S3EventsHoodieIncrSource</code> can now fan-out multiple tables off a single S3 metadata table.</li></ul><p>Clustering:</p><ul><li>We have added support to retain same file groups with clustering to cater to the requirements of external index.
Incremental timeline support has been added for pending clustering operations.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="dynamodb-based-lock-provider">DynamoDB based lock provider<a class="hash-link" href="#dynamodb-based-lock-provider" title="Direct link to heading">​</a></h3><p>Hudi added support for multi-writers in 0.7.0 and as part of it, users are required to configure lock service providers.
In 0.10.0, we are adding DynamoDBBased lock provider that users can make use of. To configure this lock provider, users have to set the below configs:</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.write.lock.provider=org.apache.hudi.aws.transaction.lock.DynamoDBBasedLockProvider</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Hoodie.write.lock.dynamodb.table</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Hoodie.write.lock.dynamodb.partition_keyhoodie.write.lock.dynamodb.region</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Also, to set up the credentials for accessing AWS resources, users can set the below property:</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.aws.access.keyhoodie.aws.secret.keyhoodie.aws.session.token</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>More details on concurrency control are covered <a href="https://hudi.apache.org/docs/next/concurrency_control" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="default-flips">Default flips<a class="hash-link" href="#default-flips" title="Direct link to heading">​</a></h3><p>We have flipped defaults for all shuffle parallelism configs in hudi from 1500 to 200. The configs of interest are <a href="https://hudi.apache.org/docs/next/configurations#hoodieinsertshuffleparallelism" target="_blank" rel="noopener noreferrer"><code>hoodie.insert.shuffle.parallelism</code></a>,
<a href="https://hudi.apache.org/docs/next/configurations#hoodiebulkinsertshuffleparallelism" target="_blank" rel="noopener noreferrer"><code>hoodie.bulkinsert.shuffle.parallelism</code></a>,
<a href="https://hudi.apache.org/docs/next/configurations#hoodieupsertshuffleparallelism" target="_blank" rel="noopener noreferrer"><code>hoodie.upsert.shuffle.parallelism</code></a> and
<a href="https://hudi.apache.org/docs/next/configurations#hoodiedeleteshuffleparallelism" target="_blank" rel="noopener noreferrer"><code>hoodie.delete.shuffle.parallelism</code></a>.
If you have been relying on the default settings, just watch out after upgrading. We have tested these configs at a reasonable scale though.</p><p>We have enabled the rollback strategy to use marker based from listing based. And we have also made timeline server based
markers as default with this release. You can read more on the timeline server based markers <a href="https://hudi.apache.org/blog/2021/08/18/improving-marker-mechanism" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Clustering: Default plan strategy changed to <code>SparkSizeBasedClusteringPlanStrategy</code>. By default, commit metadata will be preserved when clustering.
It will be useful for incremental query support with replace commits in the timeline.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="spark-sql-improvements">Spark SQL improvements<a class="hash-link" href="#spark-sql-improvements" title="Direct link to heading">​</a></h3><p>We have made more improvements to spark-sql like adding support for <code>MERGE INTO</code> to work with non-primary keys,
and added support for new operations like <code>SHOW PARTITIONS</code> and <code>DROP PARTITIONS</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="query-side-improvements">Query side improvements<a class="hash-link" href="#query-side-improvements" title="Direct link to heading">​</a></h2><p>Hive Incremental query support and partition pruning for snapshot query has been added for MOR table. Support has been added for incremental read with clustering commit.</p><p>We have improved the listing logic to gain 65% on query time and 2.8x parallelism on Presto queries against the Hudi tables.</p><p>In general, we have made a lot of bug fixes (multi writers, archival, rollbacks, metadata, clustering, etc) and stability fixes in this release.
And have improved our CLI around metadata and clustering commands. Hoping users will have a smoother ride with hudi 0.10.0.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="flink-integration-improvements">Flink Integration Improvements<a class="hash-link" href="#flink-integration-improvements" title="Direct link to heading">​</a></h2><p>Flink reader now supports incremental read, set <code>hoodie.datasource.query.type</code> as <code>incremental</code> to enable for batch execution mode.
Configure option <code>read.start-commit</code> to specify the reading start commit, configure option <code>read.end-commit</code>
to specify the end commit (both are inclusive). Streaming reader can also specify the start offset with the same option <code>read.start-commit</code>.</p><p>Upsert operation is now supported for batch execution mode, use <code>INSERT INTO</code> syntax to update the existing data set.</p><p>For non-updating data set like the log data, flink writer now supports appending the new data set directly without merging,
this now becomes the default mode for Copy On Write table type with <code>INSERT</code> operation,
by default, the writer does not merge the existing small files, set option <code>write.insert.cluster</code> as <code>true</code> to enable merging of the small files.</p><p>The <code>write.precombine.field</code> now becomes optional(not a required option) for flink writer, when the field is not specified,
if there is a field named <code>ts</code> in the table schema, the writer use it as the preCombine field,
or the writer compares records by processing sequence: always choose later records.</p><p>The small file strategy is tweaked to be more stable, with the new strategy, each bucket assign task manages a subset of filegroups separately,
that means, the parallelism of bucket assign task would affect the number of small files.</p><p>The metadata table is also supported for flink writer and reader, metadata table can reduce the partition lookup and file listing obviously for the underneath storage for both writer and reader side.
Set option <code>metadata.enabled</code> to <code>true</code> to enable this feature.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ecosystem">Ecosystem<a class="hash-link" href="#ecosystem" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="dbt-support">DBT support<a class="hash-link" href="#dbt-support" title="Direct link to heading">​</a></h3><p>We&#x27;ve made it so much easier to create derived hudi datasets by integrating with the very popular data transformation tool (dbt).
With 0.10.0, users can create incremental hudi datasets using dbt. Please see this PR for details <a href="https://github.com/dbt-labs/dbt-spark/issues/187" target="_blank" rel="noopener noreferrer">https://github.com/dbt-labs/dbt-spark/issues/187</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="monitoring">Monitoring<a class="hash-link" href="#monitoring" title="Direct link to heading">​</a></h3><p>Hudi now supports publishing metrics to Amazon CloudWatch. It can be configured by setting <a href="https://hudi.apache.org/docs/next/configurations#hoodiemetricsreportertype" target="_blank" rel="noopener noreferrer"><code>hoodie.metrics.reporter.type</code></a> to “CLOUDWATCH”.
Static AWS credentials to be used can be configured using <a href="https://hudi.apache.org/docs/next/configurations#hoodieawsaccesskey" target="_blank" rel="noopener noreferrer"><code>hoodie.aws.access.key</code></a>,
<a href="https://hudi.apache.org/docs/next/configurations#hoodieawssecretkey" target="_blank" rel="noopener noreferrer"><code>hoodie.aws.secret.key</code></a>,
<a href="https://hudi.apache.org/docs/next/configurations#hoodieawssessiontoken" target="_blank" rel="noopener noreferrer"><code>hoodie.aws.session.token</code></a> properties.
In the absence of static AWS credentials being configured, <code>DefaultAWSCredentialsProviderChain</code> will be used to get credentials by checking environment properties.
Additional Amazon CloudWatch reporter specific properties that can be tuned are in the <code>HoodieMetricsCloudWatchConfig</code> class.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="devex">DevEx<a class="hash-link" href="#devex" title="Direct link to heading">​</a></h3><p>Default maven spark3 version is not upgraded to 3.1 So, <code>maven profile -Dspark3</code> will build Hudi against Spark 3.1.2 with 0.10.0. Use <code>-Dspark3.0.x</code> for building against Spark 3.0.x versions</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="repair-tool-for-dangling-data-files">Repair tool for dangling data files<a class="hash-link" href="#repair-tool-for-dangling-data-files" title="Direct link to heading">​</a></h3><p>Sometimes, there could be dangling data files lying around due to various reasons ranging from rollback failing mid-way
to cleaner failing to clean up all data files, or data files created by spark task failures were not cleaned up properly.
So, we are adding a repair tool to clean up any dangling data files which are not part of completed commits. Feel free to try out
the tool via spark-submit at <code>org.apache.hudi.utilities.HoodieRepairTool</code> in hudi-utilities bundle, if you encounter issues in 0.10.0 release.
The tool has dry run mode as well which would print the dangling files without actually deleting it. The tool is available
from 0.11.0-SNAPSHOT on master.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="raw-release-notes">Raw Release Notes<a class="hash-link" href="#raw-release-notes" title="Direct link to heading">​</a></h2><p>The raw release notes are available <a href="https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12322822&amp;version=12350285" target="_blank" rel="noopener noreferrer">here</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/releases/release-0.10.1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Release 0.10.1</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/releases/release-0.9.0"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Release 0.9.0</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#migration-guide" class="table-of-contents__link toc-highlight">Migration Guide</a><ul><li><a href="#prerequisites-for-enabling-metadata-table" class="table-of-contents__link toc-highlight">Prerequisites for enabling metadata table</a></li><li><a href="#upgrade-steps" class="table-of-contents__link toc-highlight">Upgrade steps</a></li><li><a href="#spark-sql-primary-key-requirements" class="table-of-contents__link toc-highlight">Spark-SQL primary key requirements</a></li></ul></li><li><a href="#release-highlights" class="table-of-contents__link toc-highlight">Release Highlights</a><ul><li><a href="#kafka-connect" class="table-of-contents__link toc-highlight">Kafka Connect</a></li><li><a href="#z-ordering-hilbert-curves-and-data-skipping" class="table-of-contents__link toc-highlight">Z-Ordering, Hilbert Curves and Data Skipping</a></li><li><a href="#debezium-deltastreamer-sources" class="table-of-contents__link toc-highlight">Debezium Deltastreamer sources</a></li><li><a href="#external-config-file-support" class="table-of-contents__link toc-highlight">External config file support</a></li><li><a href="#metadata-table" class="table-of-contents__link toc-highlight">Metadata table</a></li><li><a href="#documentation-overhaul" class="table-of-contents__link toc-highlight">Documentation overhaul</a></li></ul></li><li><a href="#writer-side-improvements" class="table-of-contents__link toc-highlight">Writer side improvements</a><ul><li><a href="#dynamodb-based-lock-provider" class="table-of-contents__link toc-highlight">DynamoDB based lock provider</a></li><li><a href="#default-flips" class="table-of-contents__link toc-highlight">Default flips</a></li><li><a href="#spark-sql-improvements" class="table-of-contents__link toc-highlight">Spark SQL improvements</a></li></ul></li><li><a href="#query-side-improvements" class="table-of-contents__link toc-highlight">Query side improvements</a></li><li><a href="#flink-integration-improvements" class="table-of-contents__link toc-highlight">Flink Integration Improvements</a></li><li><a href="#ecosystem" class="table-of-contents__link toc-highlight">Ecosystem</a><ul><li><a href="#dbt-support" class="table-of-contents__link toc-highlight">DBT support</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a></li><li><a href="#devex" class="table-of-contents__link toc-highlight">DevEx</a></li><li><a href="#repair-tool-for-dangling-data-files" class="table-of-contents__link toc-highlight">Repair tool for dangling data files</a></li></ul></li><li><a href="#raw-release-notes" class="table-of-contents__link toc-highlight">Raw Release Notes</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-0.11.0">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Who&#x27;s Using</a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docker_demo">Docker Demo</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/faq">FAQ</a></li><li class="footer__item"><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Technical Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/contribute/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/enQtODYyNDAxNzc5MTg2LTE5OTBlYmVhYjM0N2ZhOTJjOWM4YzBmMWU2MjZjMGE4NDc5ZDFiOGQ2N2VkYTVkNzU3ZDQ4OTI1NmFmYWQ0NzE" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="col footer__col"><div class="footer__title">Apache</div><ul class="footer__items"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. <br>Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.54a8f98d.js"></script>
<script src="/assets/js/main.50eebf66.js"></script>
</body>
</html>