<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.15.0 docs-doc-page docs-custom-styles docs-doc-id-metadata" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Metadata Table | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/docs/0.15.0/metadata"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.15.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.15.0"><meta data-rh="true" name="docsearch:version" content="0.15.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.15.0"><meta data-rh="true" property="og:title" content="Metadata Table | Apache Hudi"><meta data-rh="true" name="description" content="Metadata Table"><meta data-rh="true" property="og:description" content="Metadata Table"><meta data-rh="true" name="keywords" content="hudi,metadata,S3 file listings"><link data-rh="true" rel="icon" href="/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/docs/0.15.0/metadata"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/0.15.0/metadata" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/0.15.0/metadata" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Metadata Table","item":"https://hudi.apache.org/docs/0.15.0/metadata"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/videos/atom.xml" title="Apache Hudi Atom Feed">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css">
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="9e4444ba-93cc-45ea-b143-783ae0fbeb6f" data-project-name="Apache Hudi" data-project-color="#FFFFFF" data-project-logo="https://hudi.apache.org/assets/images/logo-big.png" data-modal-disclaimer="This AI assistant answers Apache Hudi questions using your [documentation](https://hudi.apache.org/docs/quick-start-guide/), [dev setup](https://hudi.apache.org/contribute/developer-setup/), the [tech specs](https://hudi.apache.org/tech-specs-1point0/) and open GitHub Issues from the last year." data-modal-title="Apache Hudi AI Assistant" data-modal-example-questions-title="Try asking me..." data-modal-example-questions="How can I convert an existing COW table to MOR?,How do I set up incremental queries with Hudi tables?" data-modal-image="https://hudi.apache.org/assets/images/logo-big-2.png" data-modal-image-ask-ai="https://hudi.apache.org/assets/images/logo-big-2.png" data-modal-header-min-height="64px" data-modal-image-height="40" data-modal-image-width="40" data-modal-header-bg-color="#f8f9fa" data-modal-title-color="#0db1f9" data-button-text-color="#29557a" data-button-text="Ask AI" data-consent-required="true" data-consent-screen-title="Help us improve our AI assistant" data-consent-screen-disclaimer="By clicking &amp;quot;Allow tracking&amp;quot;, you consent to the use of the AI assistant in accordance with kapa.ai&#39;s [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google&#39;s [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai&#39;s and Google&#39;s privacy policies." data-consent-screen-accept-button-text="Allow tracking" data-modal-disclaimer-font-size="0.80rem" data-query-input-placeholder-text-color="#29557a" data-submit-query-button-bg-color="#0db1f9" data-query-input-text-color="#29557a" data-user-analytics-cookie-enabled="false" data-query-input-border-color="#211b0e" data-question-text-color="#0db1f9" data-answer-text-color="#000" data-thread-clear-button-bg-color="#000000" data-thread-clear-button-text-color="#FFFFFF" data-answer-feedback-button-bg-color="#000000" data-answer-feedback-button-text-color="#FFFFFF" data-answer-feedback-button-active-bg-color="#000000" data-answer-feedback-button-active-text-color="#FFFFFF" data-answer-copy-button-bg-color="#000000" data-answer-copy-button-text-color="#FFFFFF" data-example-question-button-text-color="#29557a" data-modal-disclaimer-bg-color="#f8f9fa" data-modal-disclaimer-text-color="#0db1f9" data-deep-thinking-button-bg-color="#0db1f9" data-deep-thinking-button-text-color="#FFFFFF" data-deep-thinking-button-active-bg-color="#0db1f9" data-deep-thinking-button-hover-bg-color="#FFFFFF" data-deep-thinking-button-active-hover-bg-color="#29557a" data-deep-thinking-button-active-text-color="#FFFFFF" async></script><link rel="stylesheet" href="/assets/css/styles.444977fc.css">
<script src="/assets/js/runtime~main.20c53627.js" defer="defer"></script>
<script src="/assets/js/main.94ce3980.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/tutorial-series">Tutorial Series</a></li><li><a class="dropdown__link" href="/learn/blog">Blogs</a></li><li><a class="dropdown__link" href="/learn/talks">Talks</a></li><li><a class="dropdown__link" href="/learn/videos">Video Guides</a></li><li><a class="dropdown__link" href="/learn/faq">FAQ</a></li><li><a class="dropdown__link" href="/learn/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/learn/tech-specs-1point0">Tech Specs 1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/developer-sync-call">Developer Sync Call</a></li><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/report-security-issues">Report Issues</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li><li><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="dropdown__link">Join Our Slack Space<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.15.0/metadata">0.15.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/metadata">Current</a></li><li><a class="dropdown__link" href="/docs/metadata">1.0.2</a></li><li><a class="dropdown__link" href="/docs/1.0.1/metadata">1.0.1</a></li><li><a class="dropdown__link" href="/docs/1.0.0/metadata">1.0.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.15.0/metadata">0.15.0</a></li><li><a class="dropdown__link" href="/docs/0.14.1/metadata">0.14.1</a></li><li><a class="dropdown__link" href="/docs/0.14.0/metadata">0.14.0</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Hudi YouTube Channel"></a><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><span class="searchText_sHOJ">Search</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/powered-by">Who&#x27;s Using</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/releases/download">Download</a></li><li class="menu__list-item"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/metadata">Current</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/metadata">1.0.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.1/metadata">1.0.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.0/metadata">1.0.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/0.15.0/metadata">0.15.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.1/metadata">0.14.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.0/metadata">0.14.0</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Hudi Twitter Handle"></a></li><li class="menu__list-item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="menu__link header-slack-link" aria-label="Hudi Slack Channel"></a></li><li class="menu__list-item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="menu__link header-youtube-link" aria-label="Hudi YouTube Channel"></a></li><li class="menu__list-item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_bSxm"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_cWv0"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/0.15.0/overview"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/quick-start-guide"><span title="Spark Quick Start" class="linkLabel_WmDU">Spark Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/flink-quick-start-guide"><span title="Flink Quick Start" class="linkLabel_WmDU">Flink Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/python-rust-quick-start-guide"><span title="Python/Rust Quick Start (Hudi-rs)" class="linkLabel_WmDU">Python/Rust Quick Start (Hudi-rs)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/docker_demo"><span title="Docker Demo" class="linkLabel_WmDU">Docker Demo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/use_cases"><span title="Use Cases" class="linkLabel_WmDU">Use Cases</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/0.15.0/hudi_stack"><span title="Design &amp; Concepts" class="categoryLinkLabel_W154">Design &amp; Concepts</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/hudi_stack"><span title="Apache Hudi Stack" class="linkLabel_WmDU">Apache Hudi Stack</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/timeline"><span title="Timeline" class="linkLabel_WmDU">Timeline</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/file_layouts"><span title="File Layouts" class="linkLabel_WmDU">File Layouts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/table_types"><span title="Table &amp; Query Types" class="linkLabel_WmDU">Table &amp; Query Types</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/indexing"><span title="Indexing" class="linkLabel_WmDU">Indexing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/write_operations"><span title="Write Operations" class="linkLabel_WmDU">Write Operations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/key_generation"><span title="Key Generation" class="linkLabel_WmDU">Key Generation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/record_payload"><span title="Record Payload" class="linkLabel_WmDU">Record Payload</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/schema_evolution"><span title="Schema Evolution" class="linkLabel_WmDU">Schema Evolution</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.15.0/metadata"><span title="Metadata Table" class="linkLabel_WmDU">Metadata Table</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.15.0/concurrency_control"><span title="Concurrency Control" class="linkLabel_WmDU">Concurrency Control</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/hoodie_streaming_ingestion"><span title="Ingestion" class="categoryLinkLabel_W154">Ingestion</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/sql_ddl"><span title="Writing Tables" class="categoryLinkLabel_W154">Writing Tables</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/sql_queries"><span title="Reading Tables" class="categoryLinkLabel_W154">Reading Tables</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/migration_guide"><span title="Table Services" class="categoryLinkLabel_W154">Table Services</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/snapshot_exporter"><span title="Platform Services" class="categoryLinkLabel_W154">Platform Services</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/performance"><span title="Operations" class="categoryLinkLabel_W154">Operations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/basic_configurations"><span title="Configurations" class="categoryLinkLabel_W154">Configurations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.15.0/faq"><span title="Frequently Asked Questions(FAQs)" class="categoryLinkLabel_W154">Frequently Asked Questions(FAQs)</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.15.0/privacy"><span title="Privacy Policy" class="linkLabel_WmDU">Privacy Policy</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Hudi<!-- --> <b>0.15.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/metadata">latest version</a></b> (<!-- -->1.0.2<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Design &amp; Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Metadata Table</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.15.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Metadata Table</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="metadata-table">Metadata Table<a href="#metadata-table" class="hash-link" aria-label="Direct link to Metadata Table" title="Direct link to Metadata Table" translate="no">​</a></h2>
<p>Database indices contain auxiliary data structures to quickly locate records needed, without reading unnecessary data
from storage. Given that Hudi’s design has been heavily optimized for handling mutable change streams, with different
write patterns, Hudi considers <a href="#indexing" class="">indexing</a> as an integral part of its design and has uniquely supported
<a href="https://hudi.apache.org/blog/2020/11/11/hudi-indexing-mechanisms/" target="_blank" rel="noopener noreferrer" class="">indexing capabilities</a> from its inception, to speed
up upserts on the <a href="https://hudi.apache.org/blog/2024/07/11/what-is-a-data-lakehouse/" target="_blank" rel="noopener noreferrer" class="">Data Lakehouse</a>. While Hudi&#x27;s indices has benefited writers for fast upserts and deletes, Hudi&#x27;s metadata table
aims to tap these benefits more generally for both the readers and writers. The metadata table implemented as a single
internal Hudi Merge-On-Read table hosts different types of indices containing table metadata and is designed to be
serverless and independent of compute and query engines. This is similar to common practices in databases where metadata
is stored as internal views.</p>
<p>The metadata table aims to significantly improve read/write performance of the queries by addressing the following key challenges:</p>
<ul>
<li class=""><strong>Eliminate the requirement of <code>list files</code> operation</strong>:<br>
When reading and writing data, file listing operations are performed to get the current view of the file system.
When data sets are large, listing all the files may be a performance bottleneck, but more importantly in the case of cloud storage systems
like AWS S3, the large number of file listing requests sometimes causes throttling due to certain request limits.
The metadata table will instead proactively maintain the list of files and remove the need for recursive file listing operations</li>
<li class=""><strong>Expose columns stats through indices for better query planning and faster lookups by readers</strong>:<br>
Query engines rely on techniques such as partitioning and file pruning to cut down on the amount of irrelevant data
scanned for query planning and execution. During query planning phase all data files are read for metadata on range
information of columns for further pruning data files based on query predicates and available range information. This
approach is expensive and does not scale if there are large number of partitions and data files to be scanned. In
addition to storage optimizations such as automatic file sizing, clustering, etc that helps data organization in a query
optimized way, Hudi&#x27;s metadata table improves query planning further by supporting multiple types of indices that aid
in efficiently looking up data files based on relevant query predicates instead of reading the column stats from every
individual data file and then pruning.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="supporting-multi-modal-index-in-hudi">Supporting Multi-Modal Index in Hudi<a href="#supporting-multi-modal-index-in-hudi" class="hash-link" aria-label="Direct link to Supporting Multi-Modal Index in Hudi" title="Direct link to Supporting Multi-Modal Index in Hudi" translate="no">​</a></h2>
<p><a href="https://www.onehouse.ai/blog/introducing-multi-modal-index-for-the-lakehouse-in-apache-hudi" target="_blank" rel="noopener noreferrer" class="">Multi-modal indexing</a>,
introduced in <a href="https://hudi.apache.org/releases/release-0.11.0/#multi-modal-index" target="_blank" rel="noopener noreferrer" class="">0.11.0 Hudi release</a>,
is a re-imagination of what a general purpose indexing subsystem should look like for the lake. Multi-modal indexing is
implemented by enhancing Hudi&#x27;s metadata table with the flexibility to extend to new index types as new partitions,
along with an <a href="https://hudi.apache.org/docs/metadata_indexing/#setup-async-indexing" target="_blank" rel="noopener noreferrer" class="">asynchronous index</a> building
mechanism and is built on the following core principles:</p>
<ul>
<li class=""><strong>Scalable metadata</strong>: The table metadata, i.e., the auxiliary data about the table, must be scalable to extremely
large size, e.g., Terabytes (TB).  Different types of indices should be easily integrated to support various use cases
without having to worry about managing the same. To realize this, all indices in Hudi&#x27;s metadata table are stored as
partitions in a single internal MOR table. The MOR table layout enables lightning-fast writes by avoiding synchronous
merge of data with reduced write amplification. This is extremely important for large datasets as the size of updates to the
metadata table can grow to be unmanageable otherwise. This helps Hudi to scale metadata to TBs of sizes. The
foundational framework for multi-modal indexing is built to enable and disable new indices as needed. The
<a href="https://www.onehouse.ai/blog/asynchronous-indexing-using-hudi" target="_blank" rel="noopener noreferrer" class="">async indexing</a> supports index building alongside
regular writers without impacting the write latency.</li>
<li class=""><strong>ACID transactional updates</strong>: The index and table metadata must be always up-to-date and in sync with the data table.
This is designed via multi-table transaction within Hudi and ensures atomicity of writes and resiliency to failures so that
partial writes to either the data or metadata table are never exposed to other read or write transactions. The metadata
table is built to be self-managed so users don’t need to spend operational cycles on any table services including
compaction and cleaning</li>
<li class=""><strong>Fast lookup</strong>: The needle-in-a-haystack type of lookups must be fast and efficient without having to scan the entire
index, as index size can be TBs for large datasets. Since most access to the metadata table are point and range lookups,
the HFile format is chosen as the base file format for the internal metadata table. Since the metadata table stores
the auxiliary data at the partition level (files index) or the file level (column_stats index), the lookup based on a
single partition path and a file group is going to be very efficient with the HFile format. Both the base and log files
in Hudi’s metadata table uses the HFile format and are meticulously designed to reduce remote GET calls on cloud storages.
Further, these metadata table indices are served via a centralized timeline server which caches the metadata, further
reducing the latency of the lookup from executors.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="metadata-table-indices">Metadata table indices<a href="#metadata-table-indices" class="hash-link" aria-label="Direct link to Metadata table indices" title="Direct link to Metadata table indices" translate="no">​</a></h3>
<p>Following are the different indices currently available under the metadata table.</p>
<ul>
<li class="">
<p><em><strong><a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=147427331" target="_blank" rel="noopener noreferrer" class="">files index</a></strong></em>:
Stored as <em>files</em> partition in the metadata table. Contains file information such as file name, size, and active state
for each partition in the data table. Improves the files listing performance by avoiding direct file system calls such
as <em>exists, listStatus</em> and <em>listFiles</em> on the data table.</p>
</li>
<li class="">
<p><em><strong><a href="https://github.com/apache/hudi/blob/master/rfc/rfc-27/rfc-27.md" target="_blank" rel="noopener noreferrer" class="">column_stats index</a></strong></em>: Stored as <em>column_stats</em>
partition in the metadata table. Contains the statistics of interested columns, such as min and max values, total values,
null counts, size, etc., for all data files and are used while serving queries with predicates matching interested
columns. This index is used along with the <a href="https://www.onehouse.ai/blog/hudis-column-stats-index-and-data-skipping-feature-help-speed-up-queries-by-an-orders-of-magnitude" target="_blank" rel="noopener noreferrer" class="">data skipping</a>
to speed up queries by orders of magnitude.</p>
</li>
<li class="">
<p><em><strong><a href="https://github.com/apache/hudi/blob/46f41d186c6c84a6af2c54a907ff2736b6013e15/rfc/rfc-37/rfc-37.md" target="_blank" rel="noopener noreferrer" class="">bloom_filter index</a></strong></em>:
Stored as <em>bloom_filter</em> partition in the metadata table. This index employs range-based pruning on the minimum and
maximum values of the record keys and bloom-filter-based lookups to tag incoming records. For large tables, this
involves reading the footers of all matching data files for bloom filters, which can be expensive in the case of random
updates across the entire dataset. This index stores bloom filters of all data files centrally to avoid scanning the
footers directly from all data files.</p>
</li>
<li class="">
<p><em><strong><a href="https://cwiki.apache.org/confluence/display/HUDI/RFC-08++Record+level+indexing+mechanisms+for+Hudi+datasets" target="_blank" rel="noopener noreferrer" class="">record_index</a></strong></em>:
Stored as <em>record_index</em> partition in the metadata table. Contains the mapping of the record key to location. Record
index is a global index, enforcing key uniqueness across all partitions in the table. Most recently added in 0.14.0
Hudi release, this index aids in locating records faster than other existing indices and can provide a speedup orders of magnitude
faster in large deployments where index lookup dominates write latencies.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="enable-hudi-metadata-table-and-multi-modal-index-in-write-side">Enable Hudi Metadata Table and Multi-Modal Index in write side<a href="#enable-hudi-metadata-table-and-multi-modal-index-in-write-side" class="hash-link" aria-label="Direct link to Enable Hudi Metadata Table and Multi-Modal Index in write side" title="Direct link to Enable Hudi Metadata Table and Multi-Modal Index in write side" translate="no">​</a></h2>
<p>Following are the Spark based basic configs that are needed to enable metadata and multi-modal indices. For advanced configs please refer
<a href="https://hudi.apache.org/docs/next/configurations#Metadata-Configs-advanced-configs" target="_blank" rel="noopener noreferrer" class="">here</a>.</p>
<table><thead><tr><th>Config Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>hoodie.metadata.enable</td><td>true (Optional) Enabled on the write side</td><td>Enable the internal metadata table which serves table metadata like level file listings. For 0.10.1 and prior releases, metadata table is disabled by default and needs to be explicitly enabled.<br><br><code>Config Param: ENABLE</code><br><code>Since Version: 0.7.0</code></td></tr><tr><td>hoodie.metadata.index.bloom.filter.enable</td><td>false (Optional)</td><td>Enable indexing bloom filters of user data files under metadata table. When enabled, metadata table will have a partition to store the bloom filter index and will be used during the index lookups.<br><br><code>Config Param: ENABLE_METADATA_INDEX_BLOOM_FILTER</code><br><code>Since Version: 0.11.0</code></td></tr><tr><td>hoodie.metadata.index.column.stats.enable</td><td>false (Optional)</td><td>Enable indexing column ranges of user data files under metadata table key lookups. When enabled, metadata table will have a partition to store the column ranges and will be used for pruning files during the index lookups.<br><br><code>Config Param: ENABLE_METADATA_INDEX_COLUMN_STATS</code><br><code>Since Version: 0.11.0</code></td></tr><tr><td>hoodie.metadata.record.index.enable</td><td>false (Optional)</td><td>Create the HUDI Record Index within the Metadata Table<br><br><code>Config Param: RECORD_INDEX_ENABLE_PROP</code><br><code>Since Version: 0.14.0</code></td></tr></tbody></table>
<p>The metadata table with synchronous updates and metadata-table-based file listing are enabled by default.
There are prerequisite configurations and steps in <a href="#deployment-considerations-for-metadata-table" class="">Deployment considerations</a> to
safely use this feature.  The metadata table and related file listing functionality can still be turned off by setting
<a class="" href="/docs/0.15.0/configurations#hoodiemetadataenable"><code>hoodie.metadata.enable</code></a> to <code>false</code>. The
<a href="https://www.onehouse.ai/blog/introducing-multi-modal-index-for-the-lakehouse-in-apache-hudi" target="_blank" rel="noopener noreferrer" class="">multi-modal index</a> are
disabled by default and can be enabled in write side explicitly using the above configs.</p>
<p>For flink, following are the basic configs of interest to enable metadata based indices. Please refer
<a href="https://hudi.apache.org/docs/next/configurations#Flink-Options" target="_blank" rel="noopener noreferrer" class="">here</a> for advanced configs</p>
<table><thead><tr><th>Config Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>metadata.enabled</td><td>false (Optional)</td><td>Enable the internal metadata table which serves table metadata like level file listings, default disabled<br><br> <code>Config Param: METADATA_ENABLED</code></td></tr><tr><td>hoodie.metadata.index.column.stats.enable</td><td>false (Optional)</td><td>Enable indexing column ranges of user data files under metadata table key lookups. When enabled, metadata table will have a partition to store the column ranges and will be used for pruning files during the index lookups.<br></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you turn off the metadata table after enabling, be sure to wait for a few commits so that the metadata table is fully
cleaned up, before re-enabling the metadata table again.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-metadata-indices-for-query-side-improvements">Use metadata indices for query side improvements<a href="#use-metadata-indices-for-query-side-improvements" class="hash-link" aria-label="Direct link to Use metadata indices for query side improvements" title="Direct link to Use metadata indices for query side improvements" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="files-index">files index<a href="#files-index" class="hash-link" aria-label="Direct link to files index" title="Direct link to files index" translate="no">​</a></h3>
<p>Metadata based listing using <em>files_index</em> can be leveraged on the read side by setting appropriate configs/session properties
from different engines as shown below:</p>
<table><thead><tr><th>Readers</th><th>Config</th><th>Description</th></tr></thead><tbody><tr><td><ul><li>Spark DataSource</li><li>Spark SQL</li><li>Strucured Streaming</li></ul></td><td>hoodie.metadata.enable</td><td>When set to <code>true</code> enables use of the spark file index implementation for Hudi, that speeds up listing of large tables.<br></td></tr><tr><td>Presto</td><td><a href="https://prestodb.io/docs/current/connector/hudi.html" target="_blank" rel="noopener noreferrer" class="">hudi.metadata-table-enabled</a></td><td>When set to <code>true</code> fetches the list of file names and sizes from Hudi’s metadata table rather than storage.</td></tr><tr><td>Trino</td><td>N/A</td><td>Support for reading from the metadata table <a href="https://issues.apache.org/jira/browse/HUDI-7020" target="_blank" rel="noopener noreferrer" class="">has been dropped in Trino 419</a>.</td></tr><tr><td>Athena</td><td><a href="https://docs.aws.amazon.com/athena/latest/ug/querying-hudi.html" target="_blank" rel="noopener noreferrer" class="">hudi.metadata-listing-enabled</a></td><td>When this table property is set to <code>TRUE</code> enables the Hudi metadata table and the related file listing functionality</td></tr><tr><td><ul><li>Flink DataStream</li><li>Flink SQL</li></ul></td><td>metadata.enabled</td><td>When set to <code>true</code> from DDL uses the internal metadata table to serves table metadata like level file listings</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="column_stats-index-and-data-skipping">column_stats index and data skipping<a href="#column_stats-index-and-data-skipping" class="hash-link" aria-label="Direct link to column_stats index and data skipping" title="Direct link to column_stats index and data skipping" translate="no">​</a></h3>
<p>Enabling metadata table and column stats index is a prerequisite to enabling data skipping capabilities. Following are the
corresponding configs across Spark and Flink readers.</p>
<table><thead><tr><th>Readers</th><th>Config</th><th>Description</th></tr></thead><tbody><tr><td><ul><li>Spark DataSource</li><li>Spark SQL</li><li>Strucured Streaming</li></ul></td><td><ul><li><code>hoodie.metadata.enable</code></li><li><code>hoodie.enable.data.skipping</code></li></ul></td><td><ul><li>When set to <code>true</code> enables use of the spark file index implementation for Hudi, that speeds up listing of large tables.</li><li>When set to <code>true</code> enables data-skipping allowing queries to leverage indices to reduce the search space by skipping over files <br><code>Config Param: ENABLE_DATA_SKIPPING</code><br><code>Since Version: 0.10.0</code> <br></li></ul></td></tr><tr><td><ul><li>Flink DataStream</li><li>Flink SQL</li></ul></td><td><ul><li><code>metadata.enabled</code></li><li><code>read.data.skipping.enabled</code></li></ul></td><td><ul><li> When set to <code>true</code> from DDL uses the internal metadata table to serves table metadata like level file listings</li><li>When set to <code>true</code> enables data-skipping allowing queries to leverage indices to reduce the search space byskipping over files</li></ul></td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployment-considerations-for-metadata-table">Deployment considerations for metadata Table<a href="#deployment-considerations-for-metadata-table" class="hash-link" aria-label="Direct link to Deployment considerations for metadata Table" title="Direct link to Deployment considerations for metadata Table" translate="no">​</a></h2>
<p>To ensure that metadata table stays up to date, all write operations on the same Hudi table need additional configurations
besides the above in different deployment models.  Before enabling metadata table, all writers on the same table must
be stopped. Please refer to the different <a class="" href="/docs/0.15.0/concurrency_control#deployment-models-with-supported-concurrency-controls">deployment models</a>
for more details on each model. This section only highlights how to safely enable metadata table in different deployment models.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployment-model-a-single-writer-with-inline-table-services">Deployment Model A: Single writer with inline table services<a href="#deployment-model-a-single-writer-with-inline-table-services" class="hash-link" aria-label="Direct link to Deployment Model A: Single writer with inline table services" title="Direct link to Deployment Model A: Single writer with inline table services" translate="no">​</a></h3>
<p>In <a class="" href="/docs/0.15.0/concurrency_control#model-a-single-writer-with-inline-table-services">Model A</a>, after setting <a class="" href="/docs/0.15.0/configurations#hoodiemetadataenable"><code>hoodie.metadata.enable</code></a> to <code>true</code>, restarting
the single writer is sufficient to safely enable metadata table.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployment-model-b-single-writer-with-async-table-services">Deployment Model B: Single writer with async table services<a href="#deployment-model-b-single-writer-with-async-table-services" class="hash-link" aria-label="Direct link to Deployment Model B: Single writer with async table services" title="Direct link to Deployment Model B: Single writer with async table services" translate="no">​</a></h3>
<p>If your current deployment model is <a class="" href="/docs/0.15.0/concurrency_control#model-b-single-writer-with-async-table-services">Model B</a>, enabling metadata
table requires adding optimistic concurrency control along with suggested lock provider like below.</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.write.concurrency.mode=optimistic_concurrency_control</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.write.lock.provider=org.apache.hudi.client.transaction.lock.InProcessLockProvider</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>These configurations are required only if metadata table is enabled in this deployment model.</p></div></div>
<p>If multiple writers in different processes are present, including one writer with async table services, please refer to
<a href="#deployment-model-c-multi-writer" class="">Deployment Model C: Multi-writer</a> for configs, with the difference of using a
distributed lock provider.  Note that running a separate compaction (<code>HoodieCompactor</code>) or clustering (<code>HoodieClusteringJob</code>)
job apart from the ingestion writer is considered as multi-writer deployment, as they are not running in the same
process which cannot rely on the in-process lock provider.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployment-model-c-multi-writer">Deployment Model C: Multi-writer<a href="#deployment-model-c-multi-writer" class="hash-link" aria-label="Direct link to Deployment Model C: Multi-writer" title="Direct link to Deployment Model C: Multi-writer" translate="no">​</a></h3>
<p>If your current deployment model is <a class="" href="/docs/0.15.0/concurrency_control#model-c-multi-writer">multi-writer</a> along with a lock
provider and other required configs set for every writer as follows, there is no additional configuration required. You
can bring up the writers sequentially after stopping the writers for enabling metadata table. Applying the proper
configurations to only partial writers leads to loss of data from the inconsistent writer. So, ensure you enable
metadata table across all writers.</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.write.concurrency.mode=optimistic_concurrency_control</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.write.lock.provider=&lt;distributed-lock-provider-classname&gt;</span><br></span></code></pre></div></div>
<p>Note that there are different external <a class="" href="/docs/0.15.0/concurrency_control#external-locking-and-lock-providers">lock providers available</a>
to choose from.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="related-resources">Related Resources<a href="#related-resources" class="hash-link" aria-label="Direct link to Related Resources" title="Direct link to Related Resources" translate="no">​</a></h2>
<h3>Blogs</h3>
<ul>
<li class=""><a href="https://www.onehouse.ai/blog/introducing-multi-modal-index-for-the-lakehouse-in-apache-hudi" target="_blank" rel="noopener noreferrer" class="">Multi-Modal Index for the Lakehouse in Apache Hudi</a></li>
<li class=""><a href="https://medium.com/@simpsons/table-service-deployment-models-in-apache-hudi-9cfa5a44addf" target="_blank" rel="noopener noreferrer" class="">Table service deployment models in Apache Hudi</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/apache/hudi/tree/asf-site/website/versioned_docs/version-0.15.0/metadata.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.15.0/schema_evolution"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Schema Evolution</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.15.0/concurrency_control"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Concurrency Control</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#metadata-table" class="table-of-contents__link toc-highlight">Metadata Table</a></li><li><a href="#supporting-multi-modal-index-in-hudi" class="table-of-contents__link toc-highlight">Supporting Multi-Modal Index in Hudi</a><ul><li><a href="#metadata-table-indices" class="table-of-contents__link toc-highlight">Metadata table indices</a></li></ul></li><li><a href="#enable-hudi-metadata-table-and-multi-modal-index-in-write-side" class="table-of-contents__link toc-highlight">Enable Hudi Metadata Table and Multi-Modal Index in write side</a></li><li><a href="#use-metadata-indices-for-query-side-improvements" class="table-of-contents__link toc-highlight">Use metadata indices for query side improvements</a><ul><li><a href="#files-index" class="table-of-contents__link toc-highlight">files index</a></li><li><a href="#column_stats-index-and-data-skipping" class="table-of-contents__link toc-highlight">column_stats index and data skipping</a></li></ul></li><li><a href="#deployment-considerations-for-metadata-table" class="table-of-contents__link toc-highlight">Deployment considerations for metadata Table</a><ul><li><a href="#deployment-model-a-single-writer-with-inline-table-services" class="table-of-contents__link toc-highlight">Deployment Model A: Single writer with inline table services</a></li><li><a href="#deployment-model-b-single-writer-with-async-table-services" class="table-of-contents__link toc-highlight">Deployment Model B: Single writer with async table services</a></li><li><a href="#deployment-model-c-multi-writer" class="table-of-contents__link toc-highlight">Deployment Model C: Multi-writer</a></li></ul></li><li><a href="#related-resources" class="table-of-contents__link toc-highlight">Related Resources</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-1.0.2">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Who&#x27;s Using</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/tutorial-series">Tutorial Series</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/faq">FAQ</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oci_hoodie">Oracle Cloud</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/privacy">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/telemetry">Telemetry</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. <br>Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=8f594acf-9b77-44fb-9475-3e82ead1910c"><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=47&amp;rec=1"></div></div></div></footer></div>
</body>
</html>