<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.0.1 docs-doc-page docs-doc-id-faq_writing_tables" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Writing Tables | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/docs/1.0.1/faq_writing_tables"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.0.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.0.1"><meta data-rh="true" name="docsearch:version" content="1.0.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.0.1"><meta data-rh="true" property="og:title" content="Writing Tables | Apache Hudi"><meta data-rh="true" name="description" content="What are some ways to write a Hudi table?"><meta data-rh="true" property="og:description" content="What are some ways to write a Hudi table?"><meta data-rh="true" name="keywords" content="hudi,writing,reading"><link data-rh="true" rel="icon" href="/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/docs/1.0.1/faq_writing_tables"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/1.0.1/faq_writing_tables" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/cn/docs/1.0.1/faq_writing_tables" hreflang="cn"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/1.0.1/faq_writing_tables" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Writing Tables","item":"https://hudi.apache.org/docs/1.0.1/faq_writing_tables"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/videos/atom.xml" title="Apache Hudi Atom Feed">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css"><link rel="stylesheet" href="/assets/css/styles.d44ac021.css">
<script src="/assets/js/runtime~main.54a049fe.js" defer="defer"></script>
<script src="/assets/js/main.9acef0d1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/tutorial-series">Tutorial Series</a></li><li><a class="dropdown__link" href="/talks">Talks</a></li><li><a class="dropdown__link" href="/videos">Video Guides</a></li><li><a class="dropdown__link" href="/docs/faq">FAQ</a></li><li><a class="dropdown__link" href="/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/tech-specs-1point0">Tech Specs 1.0</a></li><li><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="dropdown__link">Technical Wiki<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/developer-sync-call">Developer Sync Call</a></li><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/report-security-issues">Report Security Issues</a></li><li><a href="https://issues.apache.org/jira/projects/HUDI/summary" target="_blank" rel="noopener noreferrer" class="dropdown__link">Report Issues<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li><li><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="dropdown__link">Join Our Slack Space<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.0.1/faq_writing_tables">1.0.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/faq_writing_tables">Current</a></li><li><a class="dropdown__link" href="/docs/faq_writing_tables">1.0.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.0.1/faq_writing_tables">1.0.1</a></li><li><a class="dropdown__link" href="/docs/1.0.0/faq_writing_tables">1.0.0</a></li><li><a class="dropdown__link" href="/docs/0.15.0/faq_writing_tables">0.15.0</a></li><li><a class="dropdown__link" href="/docs/0.14.1/faq_writing_tables">0.14.1</a></li><li><a class="dropdown__link" href="/docs/0.14.0/overview">0.14.0</a></li><li><a class="dropdown__link" href="/docs/0.13.1/overview">0.13.1</a></li><li><a class="dropdown__link" href="/docs/0.13.0/overview">0.13.0</a></li><li><a class="dropdown__link" href="/docs/0.12.3/overview">0.12.3</a></li><li><a class="dropdown__link" href="/docs/0.12.2/overview">0.12.2</a></li><li><a class="dropdown__link" href="/docs/0.12.1/overview">0.12.1</a></li><li><a class="dropdown__link" href="/docs/0.12.0/overview">0.12.0</a></li><li><a class="dropdown__link" href="/docs/0.11.1/overview">0.11.1</a></li><li><a class="dropdown__link" href="/docs/0.11.0/overview">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.1/overview">0.10.1</a></li><li><a class="dropdown__link" href="/docs/0.10.0/overview">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/overview">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/overview">0.8.0</a></li><li><a class="dropdown__link" href="/docs/0.7.0/overview">0.7.0</a></li><li><a class="dropdown__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li><a class="dropdown__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li><a class="dropdown__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li><a class="dropdown__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li><a class="dropdown__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a><ul class="dropdown__menu"><li><a href="/docs/1.0.1/faq_writing_tables" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/cn/docs/1.0.1/faq_writing_tables" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="cn">Chinese</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Hudi YouTube Channel"></a><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><span class="searchText_sHOJ">Search</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/powered-by">Who&#x27;s Using</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/releases/download">Download</a></li><li class="menu__list-item"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/faq_writing_tables">Current</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq_writing_tables">1.0.2</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/1.0.1/faq_writing_tables">1.0.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/1.0.0/faq_writing_tables">1.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.15.0/faq_writing_tables">0.15.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.1/faq_writing_tables">0.14.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.0/overview">0.14.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.13.1/overview">0.13.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.13.0/overview">0.13.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.3/overview">0.12.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.2/overview">0.12.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.1/overview">0.12.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.0/overview">0.12.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.1/overview">0.11.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.0/overview">0.11.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.1/overview">0.10.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.0/overview">0.10.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.9.0/overview">0.9.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.8.0/overview">0.8.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.7.0/overview">0.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Languages<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a></li><li class="menu__list-item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Hudi Twitter Handle"></a></li><li class="menu__list-item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="menu__link header-slack-link" aria-label="Hudi Slack Channel"></a></li><li class="menu__list-item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="menu__link header-youtube-link" aria-label="Hudi YouTube Channel"></a></li><li class="menu__list-item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_bSxm"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_cWv0"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/1.0.1/overview">Getting Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/quick-start-guide">Spark Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/flink-quick-start-guide">Flink Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/python-rust-quick-start-guide">Python/Rust Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/docker_demo">Docker Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/use_cases">Use Cases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/hudi_stack">Design &amp; Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/hoodie_streaming_ingestion">Ingestion</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/sql_ddl">Writing Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/sql_queries">Reading Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/cleaning">Table Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/snapshot_exporter">Platform &amp; Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/performance">Operating Hudi</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1.0.1/basic_configurations">Configurations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/1.0.1/faq">Frequently Asked Questions(FAQs)</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq_general">General</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq_design_and_concepts">Design &amp; Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.0.1/faq_writing_tables">Writing Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq_reading_tables">Reading Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq_table_services">Table Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq_storage">Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.1/faq_integrations">Integrations</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.0.1/privacy">Privacy Policy</a></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Hudi<!-- --> <b>1.0.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/faq_writing_tables">latest version</a></b> (<!-- -->1.0.2<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Frequently Asked Questions(FAQs)</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Writing Tables</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Writing Tables FAQ</h1></header>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-some-ways-to-write-a-hudi-table">What are some ways to write a Hudi table?<a href="#what-are-some-ways-to-write-a-hudi-table" class="hash-link" aria-label="Direct link to What are some ways to write a Hudi table?" title="Direct link to What are some ways to write a Hudi table?">​</a></h3>
<p>Typically, you obtain a set of partial updates/inserts from your source and issue <a href="/docs/write_operations/">write operations</a> against a Hudi table. If you ingesting data from any of the standard sources like Kafka, or tailing DFS, the <a href="/docs/hoodie_streaming_ingestion#hudi-streamer">delta streamer</a> tool is invaluable and provides an easy, self-managed solution to getting data written into Hudi. You can also write your own code to capture data from a custom source using the Spark datasource API and use a <a href="/docs/1.0.1/writing_data#spark-datasource-api">Hudi datasource</a> to write into Hudi.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-is-a-hudi-writer-job-deployed">How is a Hudi writer job deployed?<a href="#how-is-a-hudi-writer-job-deployed" class="hash-link" aria-label="Direct link to How is a Hudi writer job deployed?" title="Direct link to How is a Hudi writer job deployed?">​</a></h3>
<p>The nice thing about Hudi writing is that it just runs like any other spark job would on a YARN/Mesos or even a K8S cluster. So you could simply use the Spark UI to get visibility into write operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-implement-my-own-logic-for-how-input-records-are-merged-with-record-on-storage">Can I implement my own logic for how input records are merged with record on storage?<a href="#can-i-implement-my-own-logic-for-how-input-records-are-merged-with-record-on-storage" class="hash-link" aria-label="Direct link to Can I implement my own logic for how input records are merged with record on storage?" title="Direct link to Can I implement my own logic for how input records are merged with record on storage?">​</a></h3>
<p>Here is the payload interface that is used in Hudi to represent any hudi record.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public interface HoodieRecordPayload&lt;T extends HoodieRecordPayload&gt; extends Serializable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * When more than one HoodieRecord have the same HoodieKey, this function combines them before attempting to insert/upsert by taking in a property map.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * Implementation can leverage the property to decide their business logic to do preCombine.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param another instance of another {@link HoodieRecordPayload} to be combined with.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param properties Payload related properties. For example pass the ordering field(s) name to extract from value in storage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @return the combined value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  default T preCombine(T another, Properties properties);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * This methods lets you write custom merging/combining logic to produce new values as a function of current value on storage and whats contained</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * in this object. Implementations can leverage properties if required.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * &lt;p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * eg:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * 1) You are updating counters, you may want to add counts to currentValue and write back updated counts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * 2) You may be reading DB redo logs, and merge them with current image for a database row on storage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param currentValue Current value in storage, to merge/combine this payload with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param schema Schema used for record</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param properties Payload related properties. For example pass the ordering field(s) name to extract from value in storage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @return new combined/merged value to be written back to storage. EMPTY to skip writing this record.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  default Option&lt;IndexedRecord&gt; combineAndGetUpdateValue(IndexedRecord currentValue, Schema schema, Properties properties) throws IOException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * Generates an avro record out of the given HoodieRecordPayload, to be written out to storage. Called when writing a new value for the given</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * HoodieKey, wherein there is no existing record in storage to be combined against. (i.e insert) Return EMPTY to skip writing this record.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * Implementations can leverage properties if required.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param schema Schema used for record</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @param properties Payload related properties. For example pass the ordering field(s) name to extract from value in storage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @return the {@link IndexedRecord} to be inserted.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @PublicAPIMethod(maturity = ApiMaturityLevel.STABLE)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  default Option&lt;IndexedRecord&gt; getInsertValue(Schema schema, Properties properties) throws IOException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * This method can be used to extract some metadata from HoodieRecordPayload. The metadata is passed to {@code WriteStatus.markSuccess()} and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * {@code WriteStatus.markFailure()} in order to compute some aggregate metrics using the metadata in the context of a write success or failure.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   * @return the metadata in the form of Map&lt;String, String&gt; if any.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @PublicAPIMethod(maturity = ApiMaturityLevel.STABLE)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  default Option&lt;Map&lt;String, String&gt;&gt; getMetadata() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Option.empty();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>As you could see, (<a href="https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/common/model/HoodieRecordPayload.java" target="_blank" rel="noopener noreferrer">combineAndGetUpdateValue(), getInsertValue()</a>) that control how the record on storage is combined with the incoming update/insert to generate the final value to be written back to storage. preCombine() is used to merge records within the same incoming batch.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-delete-records-in-the-dataset-using-hudi">How do I delete records in the dataset using Hudi?<a href="#how-do-i-delete-records-in-the-dataset-using-hudi" class="hash-link" aria-label="Direct link to How do I delete records in the dataset using Hudi?" title="Direct link to How do I delete records in the dataset using Hudi?">​</a></h3>
<p>GDPR has made deletes a must-have tool in everyone&#x27;s data management toolbox. Hudi supports both soft and hard deletes. For details on how to actually perform them, see <a href="/docs/1.0.1/writing_data#deletes">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="should-i-need-to-worry-about-deleting-all-copies-of-the-records-in-case-of-duplicates">Should I need to worry about deleting all copies of the records in case of duplicates?<a href="#should-i-need-to-worry-about-deleting-all-copies-of-the-records-in-case-of-duplicates" class="hash-link" aria-label="Direct link to Should I need to worry about deleting all copies of the records in case of duplicates?" title="Direct link to Should I need to worry about deleting all copies of the records in case of duplicates?">​</a></h3>
<p>No. Hudi removes all the copies of a record key when deletes are issued. Here is the long form explanation - Sometimes accidental user errors can lead to duplicates introduced into a Hudi table by either <a href="/docs/1.0.1/faq_writing_tables#can-concurrent-inserts-cause-duplicates">concurrent inserts</a> or by <a href="/docs/1.0.1/faq_writing_tables#can-single-writer-inserts-have-duplicates">not deduping the input records</a> for an insert operation. However, using the right index (e.g., in the default <a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/index/simple/HoodieSimpleIndex.java#L116" target="_blank" rel="noopener noreferrer">Simple Index</a> and <a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/index/bloom/HoodieBloomIndex.java#L309" target="_blank" rel="noopener noreferrer">Bloom Index</a>), any subsequent updates and deletes are applied to all copies of the same primary key. This is because the indexing phase identifies records of a primary key in all locations.  So deletes in Hudi remove all copies of the same primary key, i.e., duplicates, and comply with GDPR or CCPA requirements.  Here are two examples <a href="https://gist.github.com/yihua/6eb11ce3f888a71935dbf21c77199a48" target="_blank" rel="noopener noreferrer">1</a>, <a href="https://gist.github.com/yihua/e3afe0f34400e60f81f6da925560118e" target="_blank" rel="noopener noreferrer">2</a> demonstrating that duplicates are properly deleted from a Hudi table. Hudi is adding <a href="https://github.com/apache/hudi/pull/8107" target="_blank" rel="noopener noreferrer">auto key generation</a>, which will remove the burden of key generation from the user for insert workloads.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-hudi-handle-duplicate-record-keys-in-an-input">How does Hudi handle duplicate record keys in an input?<a href="#how-does-hudi-handle-duplicate-record-keys-in-an-input" class="hash-link" aria-label="Direct link to How does Hudi handle duplicate record keys in an input?" title="Direct link to How does Hudi handle duplicate record keys in an input?">​</a></h3>
<p>When issuing an <code>upsert</code> operation on a table and the batch of records provided contains multiple entries for a given key, then all of them are reduced into a single final value by repeatedly calling payload class&#x27;s <a href="https://github.com/apache/hudi/blob/d3edac4612bde2fa9deca9536801dbc48961fb95/hudi-common/src/main/java/org/apache/hudi/common/model/HoodieRecordPayload.java#L40" target="_blank" rel="noopener noreferrer">preCombine()</a> method . By default, we pick the record with the greatest value (determined by calling .compareTo()) giving latest-write-wins style semantics. <a href="/docs/1.0.1/faq_writing_tables#can-i-implement-my-own-logic-for-how-input-records-are-merged-with-record-on-storage">This FAQ entry</a> shows the interface for HoodieRecordPayload if you are interested.</p>
<p>For an insert or bulk_insert operation, no such pre-combining is performed. Thus, if your input contains duplicates, the table would also contain duplicates. If you don&#x27;t want duplicate records either issue an <strong>upsert</strong> or consider specifying option to de-duplicate input in either datasource using <a href="/docs/configurations#hoodiedatasourcewriteinsertdropduplicates"><code>hoodie.datasource.write.insert.drop.duplicates</code></a> &amp; <a href="/docs/configurations/#hoodiecombinebeforeinsert"><code>hoodie.combine.before.insert</code></a> or in deltastreamer using <a href="https://github.com/apache/hudi/blob/d3edac4612bde2fa9deca9536801dbc48961fb95/hudi-utilities/src/main/java/org/apache/hudi/utilities/deltastreamer/HoodieDeltaStreamer.java#L229" target="_blank" rel="noopener noreferrer"><code>--filter-dupes</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-pass-hudi-configurations-to-my-spark-writer-job">How can I pass hudi configurations to my spark writer job?<a href="#how-can-i-pass-hudi-configurations-to-my-spark-writer-job" class="hash-link" aria-label="Direct link to How can I pass hudi configurations to my spark writer job?" title="Direct link to How can I pass hudi configurations to my spark writer job?">​</a></h3>
<p>Hudi configuration options covering the datasource and low level Hudi write client (which both deltastreamer &amp; datasource internally call) are <a href="/docs/configurations/">here</a>. Invoking <em>--help</em> on any tool such as DeltaStreamer would print all the usage options. A lot of the options that control upsert, file sizing behavior are defined at the write client level and below is how we pass them to different options available for writing data.</p>
<ul>
<li>For Spark DataSource, you can use the &quot;options&quot; API of DataFrameWriter to pass in these configs.</li>
</ul>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">inputDF.write().format(&quot;org.apache.hudi&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .options(clientOpts) // any of the Hudi client opts can be passed in as well</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .option(&quot;hoodie.datasource.write.recordkey.field&quot;, &quot;_row_key&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre></div></div>
<ul>
<li>When using <code>HoodieWriteClient</code> directly, you can simply construct HoodieWriteConfig object with the configs in the link you mentioned.</li>
<li>When using HoodieDeltaStreamer tool to ingest, you can set the configs in properties file and pass the file as the cmdline argument &quot;<em>--props</em>&quot;</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-create-hive-style-partition-folder-structure">How to create Hive style partition folder structure?<a href="#how-to-create-hive-style-partition-folder-structure" class="hash-link" aria-label="Direct link to How to create Hive style partition folder structure?" title="Direct link to How to create Hive style partition folder structure?">​</a></h3>
<p>By default Hudi creates the partition folders with just the partition values, but if would like to create partition folders similar to the way Hive will generate the structure, with paths that contain key value pairs, like country=us/… or datestr=2021-04-20. This is Hive style (or format) partitioning. The paths include both the names of the partition keys and the values that each path represents.</p>
<p>To enable hive style partitioning, you need to add this hoodie config when you write your data:</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.hive_style_partitioning: true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-register-my-hudi-table-with-apache-hive-metastore">Can I register my Hudi table with Apache Hive metastore?<a href="#can-i-register-my-hudi-table-with-apache-hive-metastore" class="hash-link" aria-label="Direct link to Can I register my Hudi table with Apache Hive metastore?" title="Direct link to Can I register my Hudi table with Apache Hive metastore?">​</a></h3>
<p>Yes. This can be performed either via the standalone <a href="/docs/syncing_metastore#hive-sync-tool">Hive Sync tool</a> or using options in <a href="https://github.com/apache/hudi/blob/d3edac4612bde2fa9deca9536801dbc48961fb95/docker/demo/sparksql-incremental.commands#L50" target="_blank" rel="noopener noreferrer">Hudi Streamer</a> tool or <a href="/docs/configurations#hoodiedatasourcehive_syncenable">datasource</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-hudis-schema-evolution-story">What&#x27;s Hudi&#x27;s schema evolution story?<a href="#whats-hudis-schema-evolution-story" class="hash-link" aria-label="Direct link to What&#x27;s Hudi&#x27;s schema evolution story?" title="Direct link to What&#x27;s Hudi&#x27;s schema evolution story?">​</a></h3>
<p>Hudi uses Avro as the internal canonical representation for records, primarily due to its nice <a href="https://docs.confluent.io/platform/current/schema-registry/avro.html" target="_blank" rel="noopener noreferrer">schema compatibility &amp; evolution</a> properties. This is a key aspect of having reliability in your ingestion or ETL pipelines. As long as the schema passed to Hudi (either explicitly in Hudi Streamer schema provider configs or implicitly by Spark Datasource&#x27;s Dataset schemas) is backwards compatible (e.g no field deletes, only appending new fields to schema), Hudi will seamlessly handle read/write of old and new data and also keep the Hive schema up-to date.</p>
<p>Starting 0.11.0, Spark SQL DDL support (experimental) was added for Spark 3.1.x and Spark 3.2.1 via ALTER TABLE syntax. Please refer to the <a href="/docs/schema_evolution">schema evolution guide</a> for more details on  Schema-on-read for Spark..</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-performanceingest-latency-can-i-expect-for-hudi-writing">What performance/ingest latency can I expect for Hudi writing?<a href="#what-performanceingest-latency-can-i-expect-for-hudi-writing" class="hash-link" aria-label="Direct link to What performance/ingest latency can I expect for Hudi writing?" title="Direct link to What performance/ingest latency can I expect for Hudi writing?">​</a></h3>
<p>The speed at which you can write into Hudi depends on the <a href="/docs/write_operations">write operation</a> and some trade-offs you make along the way like file sizing. Just like how databases incur overhead over direct/raw file I/O on disks, Hudi operations may have overhead from supporting database like features compared to reading/writing raw DFS files. That said, Hudi implements advanced techniques from database literature to keep these minimal. User is encouraged to have this perspective when trying to reason about Hudi performance. As the saying goes : there is no free lunch (not yet atleast)</p>
<table><thead><tr><th>Storage Type</th><th>Type of workload</th><th>Performance</th><th>Tips</th></tr></thead><tbody><tr><td>copy on write</td><td>bulk_insert</td><td>Should match vanilla spark writing + an additional sort to properly size files</td><td>properly size <a href="/docs/configurations#hoodiebulkinsertshuffleparallelism">bulk insert parallelism</a> to get right number of files. Use insert if you want this auto tuned. Configure <a href="/docs/configurations#hoodiebulkinsertsortmode">hoodie.bulkinsert.sort.mode</a> for better file sizes at the cost of memory. The default value <code>NONE</code> offers the fastest performance and matches <code>spark.write.parquet()</code> in terms of number of files, overheads.</td></tr><tr><td>copy on write</td><td>insert</td><td>Similar to bulk insert, except the file sizes are auto tuned requiring input to be cached into memory and custom partitioned.</td><td>Performance would be bound by how parallel you can write the ingested data. Tune <a href="/docs/configurations#hoodieinsertshuffleparallelism">this limit</a> up, if you see that writes are happening from only a few executors.</td></tr><tr><td>copy on write</td><td>upsert/ de-duplicate &amp; insert</td><td>Both of these would involve index lookup. Compared to naively using Spark (or similar framework)&#x27;s JOIN to identify the affected records, Hudi indexing is often 7-10x faster as long as you have ordered keys (discussed below) or less than 50% updates. Compared to naively overwriting entire partitions, Hudi write can be several magnitudes faster depending on how many files in a given partition is actually updated. For example, if a partition has 1000 files out of which only 100 is dirtied every ingestion run, then Hudi would only read/merge a total of 100 files and thus 10x faster than naively rewriting entire partition.</td><td>Ultimately performance would be bound by how quickly we can read and write a parquet file and that depends on the size of the parquet file, configured <a href="/docs/configurations#hoodieparquetmaxfilesize">here</a>. Also be sure to properly tune your <a href="/docs/configurations#INDEX">bloom filters</a>. <a href="https://issues.apache.org/jira/browse/HUDI-56" target="_blank" rel="noopener noreferrer">HUDI-56</a> will auto-tune this.</td></tr><tr><td>merge on read</td><td>bulk insert</td><td>Currently new data only goes to parquet files and thus performance here should be similar to copy on write bulk insert. This has the nice side-effect of getting data into parquet directly for query performance. <a href="https://issues.apache.org/jira/browse/HUDI-86" target="_blank" rel="noopener noreferrer">HUDI-86</a> will add support for logging inserts directly and this up drastically.</td><td></td></tr><tr><td>merge on read</td><td>insert</td><td>Similar to above</td><td></td></tr><tr><td>merge on read</td><td>upsert/ de-duplicate &amp; insert</td><td>Indexing performance would remain the same as copy-on-write, while ingest latency for updates (costliest I/O operation in copy on write) are sent to log files and thus with asynchronous compaction provides very good ingest performance with low write amplification.</td><td></td></tr></tbody></table>
<p>Like with many typical system that manage time-series data, Hudi performs much better if your keys have a timestamp prefix or monotonically increasing/decreasing. You can almost always achieve this. Even if you have UUID keys, you can follow tricks like <a href="https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/" target="_blank" rel="noopener noreferrer">this</a> to get keys that are ordered. See also <a href="/docs/tuning-guide">Tuning Guide</a> for more tips on JVM and other configurations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-performance-can-i-expect-for-hudi-readingqueries">What performance can I expect for Hudi reading/queries?<a href="#what-performance-can-i-expect-for-hudi-readingqueries" class="hash-link" aria-label="Direct link to What performance can I expect for Hudi reading/queries?" title="Direct link to What performance can I expect for Hudi reading/queries?">​</a></h3>
<ul>
<li>For ReadOptimized views, you can expect the same best in-class columnar query performance as a standard parquet table in Hive/Spark/Presto</li>
<li>For incremental views, you can expect speed up relative to how much data usually changes in a given time window and how much time your entire scan takes. For e.g, if only 100 files changed in the last hour in a partition of 1000 files, then you can expect a speed of 10x using incremental pull in Hudi compared to full scanning the partition to find out new data.</li>
<li>For real time views, you can expect performance similar to the same avro backed table in Hive/Spark/Presto</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-to-avoid-creating-tons-of-small-files">How do I to avoid creating tons of small files?<a href="#how-do-i-to-avoid-creating-tons-of-small-files" class="hash-link" aria-label="Direct link to How do I to avoid creating tons of small files?" title="Direct link to How do I to avoid creating tons of small files?">​</a></h3>
<p>A key design decision in Hudi was to avoid creating small files and always write properly sized files.</p>
<p>There are 2 ways to avoid creating tons of small files in Hudi and both of them have different trade-offs:</p>
<p>a) <strong>Auto Size small files during ingestion</strong>: This solution trades ingest/writing time to keep queries always efficient. Common approaches to writing very small files and then later stitching them together only solve for system scalability issues posed by small files and also let queries slow down by exposing small files to them anyway.</p>
<p>Hudi has the ability to maintain a configured target file size, when performing <strong>upsert/insert</strong> operations. (Note: <strong>bulk_insert</strong> operation does not provide this functionality and is designed as a simpler replacement for normal <code>spark.write.parquet</code> )</p>
<p>For <strong>copy-on-write</strong>, this is as simple as configuring the <a href="/docs/configurations#hoodieparquetmaxfilesize">maximum size for a base/parquet file</a> and the <a href="/docs/configurations#hoodieparquetsmallfilelimit">soft limit</a> below which a file should be considered a small file. For the initial bootstrap to Hudi table, tuning record size estimate is also important to ensure sufficient records are bin-packed in a parquet file. For subsequent writes, Hudi automatically uses average record size based on previous commit. Hudi will try to add enough records to a small file at write time to get it to the configured maximum limit. For e.g , with <code>hoodie.parquet.max.file.size=100MB</code> and hoodie.parquet.small.file.limit=120MB, Hudi will pick all files &lt; 100MB and try to get them upto 120MB.</p>
<p>For <strong>merge-on-read</strong>, there are few more configs to set. MergeOnRead works differently for different INDEX choices.</p>
<ul>
<li>Indexes with <strong>canIndexLogFiles = true</strong> : Inserts of new data go directly to log files. In this case, you can configure the <a href="/docs/configurations#hoodielogfilemaxsize">maximum log size</a> and a <a href="/docs/configurations#hoodielogfiletoparquetcompressionratio">factor</a> that denotes reduction in size when data moves from avro to parquet files.</li>
<li>Indexes with <strong>canIndexLogFiles = false</strong> : Inserts of new data go only to parquet files. In this case, the same configurations as above for the COPY_ON_WRITE case applies.</li>
</ul>
<p>NOTE : In either case, small files will be auto sized only if there is no PENDING compaction or associated log file for that particular file slice. For example, for case 1: If you had a log file and a compaction C1 was scheduled to convert that log file to parquet, no more inserts can go into that log file. For case 2: If you had a parquet file and an update ended up creating an associated delta log file, no more inserts can go into that parquet file. Only after the compaction has been performed and there are NO log files associated with the base parquet file, can new inserts be sent to auto size that parquet file.</p>
<p>b) <a href="/blog/2021/01/27/hudi-clustering-intro"><strong>Clustering</strong></a> : This is a feature in Hudi to group small files into larger ones either synchronously or asynchronously. Since first solution of auto-sizing small files has a tradeoff on ingestion speed (since the small files are sized during ingestion), if your use-case is very sensitive to ingestion latency where you don&#x27;t want to compromise on ingestion speed which may end up creating a lot of small files, clustering comes to the rescue. Clustering can be scheduled through the ingestion job and an asynchronus job can stitch small files together in the background to generate larger files. NOTE that during this, ingestion can continue to run concurrently.</p>
<p><em>Please note that Hudi always creates immutable files on disk. To be able to do auto-sizing or clustering, Hudi will always create a newer version of the smaller file, resulting in 2 versions of the same file. The cleaner service will later kick in and delte the older version small file and keep the latest one.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-use-deltastreamer-or-spark-datasource-api-to-write-to-a-non-partitioned-hudi-table-">How do I use DeltaStreamer or Spark DataSource API to write to a Non-partitioned Hudi table ?<a href="#how-do-i-use-deltastreamer-or-spark-datasource-api-to-write-to-a-non-partitioned-hudi-table-" class="hash-link" aria-label="Direct link to How do I use DeltaStreamer or Spark DataSource API to write to a Non-partitioned Hudi table ?" title="Direct link to How do I use DeltaStreamer or Spark DataSource API to write to a Non-partitioned Hudi table ?">​</a></h3>
<p>Hudi supports writing to non-partitioned tables. For writing to a non-partitioned Hudi table and performing hive table syncing, you need to set the below configurations in the properties passed:</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.keygenerator.class=org.apache.hudi.keygen.NonpartitionedKeyGenerator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.hive_sync.partition_extractor_class=org.apache.hudi.hive.NonPartitionedExtractor</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-reduce-table-versions-created-by-hudi-in-aws-glue-data-catalog-metastore">How can I reduce table versions created by Hudi in AWS Glue Data Catalog/ metastore?<a href="#how-can-i-reduce-table-versions-created-by-hudi-in-aws-glue-data-catalog-metastore" class="hash-link" aria-label="Direct link to How can I reduce table versions created by Hudi in AWS Glue Data Catalog/ metastore?" title="Direct link to How can I reduce table versions created by Hudi in AWS Glue Data Catalog/ metastore?">​</a></h3>
<p>With each commit, Hudi creates a new table version in the metastore. This can be reduced by setting the option</p>
<p><a href="/docs/configurations#hoodiedatasourcemeta_syncconditionsync">hoodie.datasource.meta_sync.condition.sync</a> to true.</p>
<p>This will ensure that hive sync is triggered on schema or partitions changes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="if-there-are-failed-writes-in-my-timeline-do-i-see-duplicates">If there are failed writes in my timeline, do I see duplicates?<a href="#if-there-are-failed-writes-in-my-timeline-do-i-see-duplicates" class="hash-link" aria-label="Direct link to If there are failed writes in my timeline, do I see duplicates?" title="Direct link to If there are failed writes in my timeline, do I see duplicates?">​</a></h3>
<p>No, Hudi does not expose uncommitted files/blocks to the readers. Further, Hudi strives to automatically manage the table for the user, by actively cleaning up files created from failed/aborted writes. See <a href="/blog/2021/08/18/improving-marker-mechanism/">marker mechanism</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-are-conflicts-detected-in-hudi-between-multiple-writers">How are conflicts detected in Hudi between multiple writers?<a href="#how-are-conflicts-detected-in-hudi-between-multiple-writers" class="hash-link" aria-label="Direct link to How are conflicts detected in Hudi between multiple writers?" title="Direct link to How are conflicts detected in Hudi between multiple writers?">​</a></h3>
<p>Hudi employs <a href="/docs/1.0.1/concurrency_control">optimistic concurrency control</a> between writers, while implementing MVCC based concurrency control between writers and the table services. Concurrent writers to the same table need to be configured with the same lock provider configuration, to safely perform writes. By default (implemented in “<a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/client/transaction/SimpleConcurrentFileWritesConflictResolutionStrategy.java" target="_blank" rel="noopener noreferrer">SimpleConcurrentFileWritesConflictResolutionStrategy</a>”), Hudi allows multiple writers to concurrently write data and commit to the timeline if there is no conflicting writes to the same underlying file group IDs. This is achieved by holding a lock, checking for changes that modified the same file IDs. Hudi then supports a pluggable interface “<a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/client/transaction/ConflictResolutionStrategy.java" target="_blank" rel="noopener noreferrer">ConflictResolutionStrategy</a>” that determines how conflicts are handled. By default, the later conflicting write is aborted. Hudi also support eager conflict detection to help speed up conflict detection and release cluster resources back early to reduce costs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-single-writer-inserts-have-duplicates">Can single-writer inserts have duplicates?<a href="#can-single-writer-inserts-have-duplicates" class="hash-link" aria-label="Direct link to Can single-writer inserts have duplicates?" title="Direct link to Can single-writer inserts have duplicates?">​</a></h3>
<p>By default, Hudi turns off key based de-duplication for INSERT/BULK_INSERT operations and thus the table could contain duplicates. If users believe, they have duplicates in inserts, they can either issue UPSERT or consider specifying the option to de-duplicate input in either datasource using <a href="/docs/configurations#hoodiedatasourcewriteinsertdropduplicates"><code>hoodie.datasource.write.insert.drop.duplicates</code></a> &amp; <a href="/docs/configurations/#hoodiecombinebeforeinsert"><code>hoodie.combine.before.insert</code></a> or in deltastreamer using <a href="https://github.com/apache/hudi/blob/d3edac4612bde2fa9deca9536801dbc48961fb95/hudi-utilities/src/main/java/org/apache/hudi/utilities/deltastreamer/HoodieDeltaStreamer.java#L229" target="_blank" rel="noopener noreferrer"><code>--filter-dupes</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="can-concurrent-inserts-cause-duplicates">Can concurrent inserts cause duplicates?<a href="#can-concurrent-inserts-cause-duplicates" class="hash-link" aria-label="Direct link to Can concurrent inserts cause duplicates?" title="Direct link to Can concurrent inserts cause duplicates?">​</a></h3>
<p>Yes. As mentioned before, the default conflict detection strategy only check for conflicting updates to the same file group IDs. In the case of concurrent inserts, inserted records end up creating new file groups and thus can go undetected. Most common workload patterns use multi-writer capability in the case of running ingestion of new data and concurrently backfilling/deleting older data, with NO overlap in the primary keys of the records. However, this can be implemented (or better yet contributed) by a new “<a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/client/transaction/ConflictResolutionStrategy.java" target="_blank" rel="noopener noreferrer">ConflictResolutionStrategy</a>”, that reads out keys of new conflicting operations, to check the uncommitted data against other concurrent writes and then decide whether or not to commit/abort. This is rather a fine tradeoff between saving the additional cost of reading keys on most common workloads. Historically, users have preferred to take this into their control to save costs e.g we turned off de-duplication for inserts due to the same feedback. Hudi supports a pre-commit validator mechanism already where such tests can be authored as well.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/hudi/tree/asf-site/website/versioned_docs/version-1.0.1/faq_writing_tables.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.0.1/faq_design_and_concepts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Design &amp; Concepts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.0.1/faq_reading_tables"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Reading Tables</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-are-some-ways-to-write-a-hudi-table" class="table-of-contents__link toc-highlight">What are some ways to write a Hudi table?</a></li><li><a href="#how-is-a-hudi-writer-job-deployed" class="table-of-contents__link toc-highlight">How is a Hudi writer job deployed?</a></li><li><a href="#can-i-implement-my-own-logic-for-how-input-records-are-merged-with-record-on-storage" class="table-of-contents__link toc-highlight">Can I implement my own logic for how input records are merged with record on storage?</a></li><li><a href="#how-do-i-delete-records-in-the-dataset-using-hudi" class="table-of-contents__link toc-highlight">How do I delete records in the dataset using Hudi?</a></li><li><a href="#should-i-need-to-worry-about-deleting-all-copies-of-the-records-in-case-of-duplicates" class="table-of-contents__link toc-highlight">Should I need to worry about deleting all copies of the records in case of duplicates?</a></li><li><a href="#how-does-hudi-handle-duplicate-record-keys-in-an-input" class="table-of-contents__link toc-highlight">How does Hudi handle duplicate record keys in an input?</a></li><li><a href="#how-can-i-pass-hudi-configurations-to-my-spark-writer-job" class="table-of-contents__link toc-highlight">How can I pass hudi configurations to my spark writer job?</a></li><li><a href="#how-to-create-hive-style-partition-folder-structure" class="table-of-contents__link toc-highlight">How to create Hive style partition folder structure?</a></li><li><a href="#can-i-register-my-hudi-table-with-apache-hive-metastore" class="table-of-contents__link toc-highlight">Can I register my Hudi table with Apache Hive metastore?</a></li><li><a href="#whats-hudis-schema-evolution-story" class="table-of-contents__link toc-highlight">What&#39;s Hudi&#39;s schema evolution story?</a></li><li><a href="#what-performanceingest-latency-can-i-expect-for-hudi-writing" class="table-of-contents__link toc-highlight">What performance/ingest latency can I expect for Hudi writing?</a></li><li><a href="#what-performance-can-i-expect-for-hudi-readingqueries" class="table-of-contents__link toc-highlight">What performance can I expect for Hudi reading/queries?</a></li><li><a href="#how-do-i-to-avoid-creating-tons-of-small-files" class="table-of-contents__link toc-highlight">How do I to avoid creating tons of small files?</a></li><li><a href="#how-do-i-use-deltastreamer-or-spark-datasource-api-to-write-to-a-non-partitioned-hudi-table-" class="table-of-contents__link toc-highlight">How do I use DeltaStreamer or Spark DataSource API to write to a Non-partitioned Hudi table ?</a></li><li><a href="#how-can-i-reduce-table-versions-created-by-hudi-in-aws-glue-data-catalog-metastore" class="table-of-contents__link toc-highlight">How can I reduce table versions created by Hudi in AWS Glue Data Catalog/ metastore?</a></li><li><a href="#if-there-are-failed-writes-in-my-timeline-do-i-see-duplicates" class="table-of-contents__link toc-highlight">If there are failed writes in my timeline, do I see duplicates?</a></li><li><a href="#how-are-conflicts-detected-in-hudi-between-multiple-writers" class="table-of-contents__link toc-highlight">How are conflicts detected in Hudi between multiple writers?</a></li><li><a href="#can-single-writer-inserts-have-duplicates" class="table-of-contents__link toc-highlight">Can single-writer inserts have duplicates?</a></li><li><a href="#can-concurrent-inserts-cause-duplicates" class="table-of-contents__link toc-highlight">Can concurrent inserts cause duplicates?</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-1.0.2">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Who&#x27;s Using</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/tutorial-series">Tutorial Series</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="/asf/telemetry">Telemetry</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. <br>Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=8f594acf-9b77-44fb-9475-3e82ead1910c"><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=47&amp;rec=1"></div></div></div></footer></div>
</body>
</html>