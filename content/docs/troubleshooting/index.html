<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.15.0 docs-doc-page docs-doc-id-troubleshooting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Troubleshooting | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/docs/troubleshooting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.15.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.15.0"><meta data-rh="true" name="docsearch:version" content="0.15.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.15.0"><meta data-rh="true" property="og:title" content="Troubleshooting | Apache Hudi"><meta data-rh="true" name="description" content="For performance related issues, please refer to the tuning guide"><meta data-rh="true" property="og:description" content="For performance related issues, please refer to the tuning guide"><meta data-rh="true" name="keywords" content="hudi,troubleshooting"><link data-rh="true" rel="icon" href="/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/docs/troubleshooting"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/troubleshooting" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/cn/docs/troubleshooting" hreflang="cn"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/troubleshooting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/videos/atom.xml" title="Apache Hudi Atom Feed">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css"><link rel="stylesheet" href="/assets/css/styles.06b64414.css">
<script src="/assets/js/runtime~main.7a43bef3.js" defer="defer"></script>
<script src="/assets/js/main.3926a4b5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=8f594acf-9b77-44fb-9475-3e82ead1910c" width="0" height="0" alt=""><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=47&amp;rec=1" width="0" height="0" alt=""><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/talks">Talks</a></li><li><a class="dropdown__link" href="/videos">Video Guides</a></li><li><a class="dropdown__link" href="/docs/faq">FAQ</a></li><li><a class="dropdown__link" href="/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/tech-specs-1point0">Tech Specs 1.0</a></li><li><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="dropdown__link">Technical Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/report-security-issues">Report Security Issues</a></li><li><a href="https://issues.apache.org/jira/projects/HUDI/summary" target="_blank" rel="noopener noreferrer" class="dropdown__link">Report Issues<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li></ul></div><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/troubleshooting">0.15.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/troubleshooting">Current</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/troubleshooting">0.15.0</a></li><li><a class="dropdown__link" href="/docs/0.14.1/troubleshooting">0.14.1</a></li><li><a class="dropdown__link" href="/docs/0.14.0/troubleshooting">0.14.0</a></li><li><a class="dropdown__link" href="/docs/0.13.1/troubleshooting">0.13.1</a></li><li><a class="dropdown__link" href="/docs/0.13.0/troubleshooting">0.13.0</a></li><li><a class="dropdown__link" href="/docs/0.12.3/troubleshooting">0.12.3</a></li><li><a class="dropdown__link" href="/docs/0.12.2/troubleshooting">0.12.2</a></li><li><a class="dropdown__link" href="/docs/0.12.1/troubleshooting">0.12.1</a></li><li><a class="dropdown__link" href="/docs/0.12.0/troubleshooting">0.12.0</a></li><li><a class="dropdown__link" href="/docs/0.11.1/troubleshooting">0.11.1</a></li><li><a class="dropdown__link" href="/docs/0.11.0/troubleshooting">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.1/troubleshooting">0.10.1</a></li><li><a class="dropdown__link" href="/docs/0.10.0/troubleshooting">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/overview">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/overview">0.8.0</a></li><li><a class="dropdown__link" href="/docs/0.7.0/overview">0.7.0</a></li><li><a class="dropdown__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li><a class="dropdown__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li><a class="dropdown__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li><a class="dropdown__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li><a class="dropdown__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a><ul class="dropdown__menu"><li><a href="/docs/troubleshooting" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/cn/docs/troubleshooting" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="cn">Chinese</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-2ggm1fub8-_yt4Reu9djwqqVRFC7X49g" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Hudi YouTube Channel"></a><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><span class="searchText_sHOJ">Search</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/powered-by">Who&#x27;s Using</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/releases/download">Download</a></li><li class="menu__list-item"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Versions</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/troubleshooting">Current</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/troubleshooting">0.15.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.1/troubleshooting">0.14.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.0/troubleshooting">0.14.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.13.1/troubleshooting">0.13.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.13.0/troubleshooting">0.13.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.3/troubleshooting">0.12.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.2/troubleshooting">0.12.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.1/troubleshooting">0.12.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.0/troubleshooting">0.12.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.1/troubleshooting">0.11.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.0/troubleshooting">0.11.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.1/troubleshooting">0.10.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.0/troubleshooting">0.10.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.9.0/overview">0.9.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.8.0/overview">0.8.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.7.0/overview">0.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Languages<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a></li><li class="menu__list-item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Hudi Twitter Handle"></a></li><li class="menu__list-item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-2ggm1fub8-_yt4Reu9djwqqVRFC7X49g" target="_blank" rel="noopener noreferrer" class="menu__link header-slack-link" aria-label="Hudi Slack Channel"></a></li><li class="menu__list-item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="menu__link header-youtube-link" aria-label="Hudi YouTube Channel"></a></li><li class="menu__list-item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_bSxm"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_cWv0"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/overview">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick-start-guide">Spark Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/flink-quick-start-guide">Flink Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docker_demo">Docker Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/use_cases">Use Cases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/hudi_stack">Design &amp; Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/hoodie_streaming_ingestion">Ingestion</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/sql_ddl">Writing Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/sql_queries">Reading Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/migration_guide">Table Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/snapshot_exporter">Platform Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/performance">Operations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/performance">Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/procedures">SQL Procedures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/encryption">Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tuning-guide">Spark Tuning Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/flink_tuning">Flink Tuning Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/basic_configurations">Configurations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/faq">Frequently Asked Questions(FAQs)</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/privacy">Privacy Policy</a></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Operations</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Troubleshooting</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.15.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Troubleshooting</h1></header><p>For performance related issues, please refer to the <a href="https://hudi.apache.org/docs/tuning-guide" target="_blank" rel="noopener noreferrer">tuning guide</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-tables">Writing Tables<a href="#writing-tables" class="hash-link" aria-label="Direct link to Writing Tables" title="Direct link to Writing Tables">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="orgapacheparquetioinvalidrecordexception-parquetavro-schema-mismatch-avro-field-col1-not-found">org.apache.parquet.io.InvalidRecordException: Parquet/Avro schema mismatch: Avro field &#x27;col1&#x27; not found<a href="#orgapacheparquetioinvalidrecordexception-parquetavro-schema-mismatch-avro-field-col1-not-found" class="hash-link" aria-label="Direct link to org.apache.parquet.io.InvalidRecordException: Parquet/Avro schema mismatch: Avro field &#x27;col1&#x27; not found" title="Direct link to org.apache.parquet.io.InvalidRecordException: Parquet/Avro schema mismatch: Avro field &#x27;col1&#x27; not found">​</a></h4>
<p>It is recommended that schema should evolve in <a href="https://docs.confluent.io/platform/current/schema-registry/avro.html" target="_blank" rel="noopener noreferrer">backwards compatible way</a> while using Hudi. Please refer here for more information on avro schema resolution - <a href="https://avro.apache.org/docs/1.8.2/spec.html" target="_blank" rel="noopener noreferrer">https://avro.apache.org/docs/1.8.2/spec.html</a>. This error generally occurs when the schema has evolved in backwards <strong>incompatible</strong> way by deleting some column &#x27;col1&#x27; and we are trying to update some record in parquet file which has ay been written with previous schema (which had &#x27;col1&#x27;). In such cases, parquet tries to find all the present fields in the incoming record and when it finds &#x27;col1&#x27; is not present, the mentioned exception is thrown.</p>
<p>The fix for this is to try and create uber schema using all the schema versions evolved so far for the concerned event and use this uber schema as the target schema. One of the good approaches can be fetching schema from hive metastore and merging it with the current schema.</p>
<p>Sample stacktrace where a field named &quot;toBeDeletedStr&quot; was omitted from new batch of updates : <a href="https://gist.github.com/nsivabalan/cafc53fc9a8681923e4e2fa4eb2133fe" target="_blank" rel="noopener noreferrer">https://gist.github.com/nsivabalan/cafc53fc9a8681923e4e2fa4eb2133fe</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="javalangunsupportedoperationexception-orgapacheparquetavroavroconvertersfieldintegerconverter">java.lang.UnsupportedOperationException: org.apache.parquet.avro.AvroConverters$FieldIntegerConverter<a href="#javalangunsupportedoperationexception-orgapacheparquetavroavroconvertersfieldintegerconverter" class="hash-link" aria-label="Direct link to java.lang.UnsupportedOperationException: org.apache.parquet.avro.AvroConverters$FieldIntegerConverter" title="Direct link to java.lang.UnsupportedOperationException: org.apache.parquet.avro.AvroConverters$FieldIntegerConverter">​</a></h4>
<p>This error will again occur due to schema evolutions in non-backwards compatible way. Basically there is some incoming update U for a record R which is already written to your Hudi dataset in the concerned parquet file. R contains field F which is having certain data type, let us say long. U has the same field F with updated data type of int type. Such incompatible data type conversions are not supported by Parquet FS.</p>
<p>For such errors, please try to ensure only valid data type conversions are happening in your primary data source from where you are trying to ingest.</p>
<p>Sample stacktrace when trying to evolve a field from Long type to Integer type with Hudi : <a href="https://gist.github.com/nsivabalan/0d81cd60a3e7a0501e6a0cb50bfaacea" target="_blank" rel="noopener noreferrer">https://gist.github.com/nsivabalan/0d81cd60a3e7a0501e6a0cb50bfaacea</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="schemacompatabilityexception-unable-to-validate-the-rewritten-record">SchemaCompatabilityException: Unable to validate the rewritten record<a href="#schemacompatabilityexception-unable-to-validate-the-rewritten-record" class="hash-link" aria-label="Direct link to SchemaCompatabilityException: Unable to validate the rewritten record" title="Direct link to SchemaCompatabilityException: Unable to validate the rewritten record">​</a></h4>
<p>This can possibly occur if your schema has some non-nullable field whose value is not present or is null. It is recommended to evolve schema in backwards compatible ways. In essence, this means either have every newly added field as nullable or define default values for every new field. See <a href="https://hudi.apache.org/docs/schema_evolution" target="_blank" rel="noopener noreferrer">Schema Evolution</a> docs for more.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="int96-int64-and-timestamp-compatibility">INT96, INT64 and timestamp compatibility<a href="#int96-int64-and-timestamp-compatibility" class="hash-link" aria-label="Direct link to INT96, INT64 and timestamp compatibility" title="Direct link to INT96, INT64 and timestamp compatibility">​</a></h4>
<p><a href="https://hudi.apache.org/docs/configurations#hoodiedatasourcehive_syncsupport_timestamp" target="_blank" rel="noopener noreferrer">https://hudi.apache.org/docs/configurations#hoodiedatasourcehive_syncsupport_timestamp</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-am-seeing-lot-of-archive-files-how-do-i-control-the-number-of-archive-commit-files-generated">I am seeing lot of archive files. How do I control the number of archive commit files generated?<a href="#i-am-seeing-lot-of-archive-files-how-do-i-control-the-number-of-archive-commit-files-generated" class="hash-link" aria-label="Direct link to I am seeing lot of archive files. How do I control the number of archive commit files generated?" title="Direct link to I am seeing lot of archive files. How do I control the number of archive commit files generated?">​</a></h4>
<p>Please note that in cloud stores that do not support log append operations, Hudi is forced to create new archive files to archive old metadata operations.
You can increase <code>hoodie.commits.archival.batch</code> moving forward to increase the number of commits archived per archive file.
In addition, you can increase the difference between the 2 watermark configurations : <code>hoodie.keep.max.commits</code> (default : 30)
and <code>hoodie.keep.min.commits</code> (default : 20). This way, you can reduce the number of archive files created and also
at the same time increase the number of metadata archived per archive file. Note that post 0.7.0 release where we are
adding consolidated Hudi metadata (<a href="https://cwiki.apache.org/confluence/display/HUDI/RFC+-+15%3A+HUDI+File+Listing+Improvements" target="_blank" rel="noopener noreferrer">RFC-15</a>),
the follow up work would involve re-organizing archival metadata so that we can do periodic compactions to control
file-sizing of these archive files.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-resolve-the-nosuchmethoderror-from-hbase-when-using-hudi-with-metadata-table-on-hdfs">How can I resolve the NoSuchMethodError from HBase when using Hudi with metadata table on HDFS?<a href="#how-can-i-resolve-the-nosuchmethoderror-from-hbase-when-using-hudi-with-metadata-table-on-hdfs" class="hash-link" aria-label="Direct link to How can I resolve the NoSuchMethodError from HBase when using Hudi with metadata table on HDFS?" title="Direct link to How can I resolve the NoSuchMethodError from HBase when using Hudi with metadata table on HDFS?">​</a></h4>
<p>From 0.11.0 release, we have upgraded the HBase version to 2.4.9, which is released based on Hadoop 2.x. Hudi&#x27;s metadata</p>
<p>table uses HFile as the base file format, relying on the HBase library. When enabling metadata table in a Hudi table on</p>
<p>HDFS using Hadoop 3.x, NoSuchMethodError can be thrown due to compatibility issues between Hadoop 2.x and 3.x.</p>
<p>To address this, here&#x27;s the workaround:</p>
<p>(1) Download HBase source code from <a href="https://github.com/apache/hbase" target="_blank" rel="noopener noreferrer"><code>https://github.com/apache/hbase</code></a>;</p>
<p>(2) Switch to the source code of 2.4.9 release with the tag <code>rel/2.4.9</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git checkout rel/2.4.9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(3) Package a new version of HBase 2.4.9 with Hadoop 3 version:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mvn clean install -Denforcer.skip -DskipTests -Dhadoop.profile=3.0 -Psite-install-step</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(4) Package Hudi again.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-resolve-the-runtimeexception-saying-hbase-defaultxml-file-seems-to-be-for-an-older-version-of-hbase">How can I resolve the RuntimeException saying <code>hbase-default.xml file seems to be for an older version of HBase</code>?<a href="#how-can-i-resolve-the-runtimeexception-saying-hbase-defaultxml-file-seems-to-be-for-an-older-version-of-hbase" class="hash-link" aria-label="Direct link to how-can-i-resolve-the-runtimeexception-saying-hbase-defaultxml-file-seems-to-be-for-an-older-version-of-hbase" title="Direct link to how-can-i-resolve-the-runtimeexception-saying-hbase-defaultxml-file-seems-to-be-for-an-older-version-of-hbase">​</a></h4>
<p>This usually happens when there are other HBase libs provided by the runtime environment in the classpath, such as</p>
<p>Cloudera CDP stack, causing the conflict. To get around the RuntimeException, you can set the</p>
<p><code>hbase.defaults.for.version.skip</code> to <code>true</code> in the <code>hbase-site.xml</code> configuration file, e.g., overwriting the config</p>
<p>within the Cloudera manager.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-see-two-different-records-for-the-same-record-key-value-each-record-key-with-a-different-timestamp-format-how-is-this-possible">I see two different records for the same record key value, each record key with a different timestamp format. How is this possible?<a href="#i-see-two-different-records-for-the-same-record-key-value-each-record-key-with-a-different-timestamp-format-how-is-this-possible" class="hash-link" aria-label="Direct link to I see two different records for the same record key value, each record key with a different timestamp format. How is this possible?" title="Direct link to I see two different records for the same record key value, each record key with a different timestamp format. How is this possible?">​</a></h4>
<p>This is a known issue with enabling row-writer for bulk_insert operation. When you do a bulk_insert followed by another
write operation such as upsert/insert this might be observed for timestamp fields specifically. For example, bulk_insert might produce
timestamp <code>2016-12-29 09:54:00.0</code> for record key whereas non bulk_insert write operation might produce a long value like
<code>1483023240000000</code> for the record key thus creating two different records. To fix this, starting 0.10.1 a new config <a href="https://hudi.apache.org/docs/configurations/#hoodiedatasourcewritekeygeneratorconsistentlogicaltimestampenabled" target="_blank" rel="noopener noreferrer">hoodie.datasource.write.keygenerator.consistent.logical.timestamp.enabled</a>
is introduced to bring consistency irrespective of whether row writing is enabled on not. However, for the sake of
backwards compatibility and not breaking existing pipelines, this config is set to false by default and will have to be enabled explicitly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="querying-tables">Querying Tables<a href="#querying-tables" class="hash-link" aria-label="Direct link to Querying Tables" title="Direct link to Querying Tables">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-now-query-the-hudi-dataset-i-just-wrote">How can I now query the Hudi dataset I just wrote?<a href="#how-can-i-now-query-the-hudi-dataset-i-just-wrote" class="hash-link" aria-label="Direct link to How can I now query the Hudi dataset I just wrote?" title="Direct link to How can I now query the Hudi dataset I just wrote?">​</a></h4>
<p>Unless Hive sync is enabled, the dataset written by Hudi using one of the methods above can simply be queries via the Spark datasource like any other source.</p>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">val hudiSnapshotQueryDF = spark</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .read()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .format(&quot;hudi&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .option(&quot;hoodie.datasource.query.type&quot;, &quot;snapshot&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .load(basePath) </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">val hudiIncQueryDF = spark.read().format(&quot;hudi&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .option(&quot;hoodie.datasource.query.type&quot;, &quot;incremental&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .option(&quot;hoodie.datasource.read.begin.instanttime&quot;, &lt;beginInstantTime&gt;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .load(basePath);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>if Hive Sync is enabled in the <a href="https://github.com/apache/hudi/blob/d3edac4612bde2fa9deca9536801dbc48961fb95/docker/demo/sparksql-incremental.commands#L50" target="_blank" rel="noopener noreferrer">deltastreamer</a> tool or <a href="https://hudi.apache.org/docs/configurations#hoodiedatasourcehive_syncenable" target="_blank" rel="noopener noreferrer">datasource</a>, the dataset is available in Hive as a couple of tables, that can now be read using HiveQL, Presto or SparkSQL. See <a href="https://hudi.apache.org/docs/querying_data/" target="_blank" rel="noopener noreferrer">here</a> for more.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-quality-issues">Data Quality Issues<a href="#data-quality-issues" class="hash-link" aria-label="Direct link to Data Quality Issues" title="Direct link to Data Quality Issues">​</a></h3>
<p>Section below generally aids in debugging Hudi failures. Off the bat, the following metadata is added to every record to help triage issues easily using standard Hadoop SQL engines (Hive/PrestoDB/Spark)</p>
<ul>
<li><strong>_hoodie_record_key</strong> - Treated as a primary key within each DFS partition, basis of all updates/inserts</li>
<li><strong>_hoodie_commit_time</strong> - Last commit that touched this record</li>
<li><strong>_hoodie_commit_seqno</strong> - This field contains a unique sequence number for each record within each transaction.</li>
<li><strong>_hoodie_file_name</strong> - Actual file name containing the record (super useful to triage duplicates)</li>
<li><strong>_hoodie_partition_path</strong> - Path from basePath that identifies the partition containing this record</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="missing-records">Missing records<a href="#missing-records" class="hash-link" aria-label="Direct link to Missing records" title="Direct link to Missing records">​</a></h4>
<p>Please check if there were any write errors using the admin commands, during the window at which the record could have been written.</p>
<p>If you do find errors, then the record was not actually written by Hudi, but handed back to the application to decide what to do with it.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="duplicates">Duplicates<a href="#duplicates" class="hash-link" aria-label="Direct link to Duplicates" title="Direct link to Duplicates">​</a></h4>
<p>First of all, please confirm if you do indeed have duplicates <strong>AFTER</strong> ensuring the query is accessing the Hudi table <a href="https://hudi.apache.org/docs/querying_data/" target="_blank" rel="noopener noreferrer">properly</a> .</p>
<ul>
<li>If confirmed, please use the metadata fields above, to identify the physical files &amp; partition files containing the records .</li>
<li>If duplicates span files across partitionpath, then this means your application is generating different partitionPaths for same recordKey, Please fix your app</li>
<li>if duplicates span multiple files within the same partitionpath, please engage with mailing list. This should not happen. You can use the <code>records deduplicate</code> command to fix your data.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingestion">Ingestion<a href="#ingestion" class="hash-link" aria-label="Direct link to Ingestion" title="Direct link to Ingestion">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="javaioeofexception-received--1-when-reading-from-channel-socket-has-likely-been-closed-at-kafkautilsutilsreadutilsscala381-at-kafkanetworkboundedbytebufferreceivereadfromboundedbytebufferreceivescala54">java.io.EOFException: Received -1 when reading from channel, socket has likely been closed. at <a href="http://kafka.utils.Utils$.read" target="_blank" rel="noopener noreferrer">kafka.utils.Utils$.read</a>(Utils.scala:381) at kafka.network.BoundedByteBufferReceive.readFrom(BoundedByteBufferReceive.scala:54)<a href="#javaioeofexception-received--1-when-reading-from-channel-socket-has-likely-been-closed-at-kafkautilsutilsreadutilsscala381-at-kafkanetworkboundedbytebufferreceivereadfromboundedbytebufferreceivescala54" class="hash-link" aria-label="Direct link to javaioeofexception-received--1-when-reading-from-channel-socket-has-likely-been-closed-at-kafkautilsutilsreadutilsscala381-at-kafkanetworkboundedbytebufferreceivereadfromboundedbytebufferreceivescala54" title="Direct link to javaioeofexception-received--1-when-reading-from-channel-socket-has-likely-been-closed-at-kafkautilsutilsreadutilsscala381-at-kafkanetworkboundedbytebufferreceivereadfromboundedbytebufferreceivescala54">​</a></h4>
<p>This might happen if you are ingesting from Kafka source, your cluster is ssl enabled by default and you are using some version of Hudi older than 0.5.1. Previous versions of Hudi were using spark-streaming-kafka-0-8 library. With the release of 0.5.1 version of Hudi, spark was upgraded to 2.4.4 and spark-streaming-kafka library was upgraded to spark-streaming-kafka-0-10. SSL support was introduced from spark-streaming-kafka-0-10. Please see here for reference.</p>
<p>The workaround can be either use Kafka cluster which is not ssl enabled, else upgrade Hudi version to at least 0.5.1 or spark-streaming-kafka library to spark-streaming-kafka-0-10.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="javalangillegalargumentexception-could-not-find-a-kafkaclient-entry-in-the-jaas-configuration-system-property-javasecurityauthloginconfig-is-not-set">java.lang.IllegalArgumentException: Could not find a &#x27;KafkaClient&#x27; entry in the JAAS configuration. System property &#x27;java.security.auth.login.config&#x27; is not set<a href="#javalangillegalargumentexception-could-not-find-a-kafkaclient-entry-in-the-jaas-configuration-system-property-javasecurityauthloginconfig-is-not-set" class="hash-link" aria-label="Direct link to java.lang.IllegalArgumentException: Could not find a &#x27;KafkaClient&#x27; entry in the JAAS configuration. System property &#x27;java.security.auth.login.config&#x27; is not set" title="Direct link to java.lang.IllegalArgumentException: Could not find a &#x27;KafkaClient&#x27; entry in the JAAS configuration. System property &#x27;java.security.auth.login.config&#x27; is not set">​</a></h4>
<p>This might happen when you are trying to ingest from ssl enabled kafka source and your setup is not able to read jars.conf file and its properties. To fix this, you need to pass the required property as part of your spark-submit command something like</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">--files jaas.conf,failed_tables.json --conf &#x27;spark.driver.extraJavaOptions=-Djava.security.auth.login.config=jaas.conf&#x27; --conf &#x27;spark.executor.extraJavaOptions=-Djava.security.auth.login.config=jaas.conf&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ioexception-write-end-dead-or-circular-reference-while-writing-to-gcs">IOException: Write end dead or CIRCULAR REFERENCE while writing to GCS<a href="#ioexception-write-end-dead-or-circular-reference-while-writing-to-gcs" class="hash-link" aria-label="Direct link to IOException: Write end dead or CIRCULAR REFERENCE while writing to GCS" title="Direct link to IOException: Write end dead or CIRCULAR REFERENCE while writing to GCS">​</a></h4>
<p>If you encounter below stacktrace, please set the spark config as suggested below.</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">--conf &#x27;spark.hadoop.fs.gs.outputstream.pipe.type=NIO_CHANNEL_PIPE&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> at org.apache.hudi.io.storage.HoodieAvroParquetWriter.close(HoodieAvroParquetWriter.java:84)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	Suppressed: java.io.IOException: Upload failed for &#x27;gs://bucket/b0ee4274-5193-4a26-bcff-d60654fd7b24-0_0-42-671_20230228055305900.parquet&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		at...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		... 44 more</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	Caused by: java.io.IOException: Write end dead</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		at java.base/java.io.PipedInputStream.read(PipedInputStream.java:310)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		at java.base/java.io.PipedInputStream.read(PipedInputStream.java:377)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		at com.google.cloud.hadoop.repackaged.gcs.com.google.api.client.util.ByteStreams.read(ByteStreams.java:172)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		at ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		... 3 more</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Caused by: [CIRCULAR REFERENCE: java.io.IOException: Write end dead]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We have an active patch(<a href="https://github.com/apache/hudi/pull/7245" target="_blank" rel="noopener noreferrer">https://github.com/apache/hudi/pull/7245</a>) on fixing the issue. Until we land this, you can use above config to bypass the issue.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hudi-upserts-with-rli-fails-with-classcastexception">Hudi upserts with RLI fails with ClassCastException<a href="#hudi-upserts-with-rli-fails-with-classcastexception" class="hash-link" aria-label="Direct link to Hudi upserts with RLI fails with ClassCastException" title="Direct link to Hudi upserts with RLI fails with ClassCastException">​</a></h4>
<p>In certain environments, RLI Hudi upserts may fail with the error: <code>Caused by: java.lang.ClassCastException: class org.apache.avro.generic.GenericData$Record cannot be cast to class org.apache.hudi.avro.model.HoodieDeleteRecordList</code>.</p>
<p>To resolve this issue, we should add the hudi bundle JAR to both <code>spark.driver.extraClassPath</code> and <code>spark.executor.extraClassPath</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hive-sync">Hive Sync<a href="#hive-sync" class="hash-link" aria-label="Direct link to Hive Sync" title="Direct link to Hive Sync">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sqlexception-following-columns-have-types-incompatible">SQLException: following columns have types incompatible<a href="#sqlexception-following-columns-have-types-incompatible" class="hash-link" aria-label="Direct link to SQLException: following columns have types incompatible" title="Direct link to SQLException: following columns have types incompatible">​</a></h4>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Error while processing statement: FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. Unable to alter table. The following columns have types incompatible with the existing columns in their respective positions : col1,col2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will usually happen when you are trying to add a new column to existing hive table using our <a href="https://github.com/apache/hudi/blob/be4dfccbb24794dfac3714818971229870d24a2c/hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/HiveSyncTool.java" target="_blank" rel="noopener noreferrer">HiveSyncTool.java</a> class. Databases usually will not allow to modify a column datatype from a higher order to lower order or cases where the datatypes may clash with the data that is already stored/will be stored in the table. To fix the same, try setting the following property -</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">set hive.metastore.disallow.incompatible.col.type.changes=false;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hoodiehivesyncexception-could-not-convert-field-type-from-type1-to-type2-for-field-col1">HoodieHiveSyncException: Could not convert field Type from <code>&lt;type1&gt;</code> to <code>&lt;type2&gt;</code> for field col1<a href="#hoodiehivesyncexception-could-not-convert-field-type-from-type1-to-type2-for-field-col1" class="hash-link" aria-label="Direct link to hoodiehivesyncexception-could-not-convert-field-type-from-type1-to-type2-for-field-col1" title="Direct link to hoodiehivesyncexception-could-not-convert-field-type-from-type1-to-type2-for-field-col1">​</a></h4>
<p>This occurs because HiveSyncTool currently supports only few compatible data type conversions. Doing any other incompatible change will throw this exception. Please check the data type evolution for the concerned field and verify if it indeed can be considered as a valid data type conversion as per Hudi code base.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="orgapachehadoophiveqlparsesemanticexception-database-does-not-exist-test_db">org.apache.hadoop.hive.ql.parse.SemanticException: Database does not exist: test_db<a href="#orgapachehadoophiveqlparsesemanticexception-database-does-not-exist-test_db" class="hash-link" aria-label="Direct link to org.apache.hadoop.hive.ql.parse.SemanticException: Database does not exist: test_db" title="Direct link to org.apache.hadoop.hive.ql.parse.SemanticException: Database does not exist: test_db">​</a></h4>
<p>This generally occurs if you are trying to do Hive sync for your Hudi dataset and the configured hive_sync database does not exist. Please create the corresponding database on your Hive cluster and try again.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="orgapachethrifttapplicationexception-invalid-method-name-get_table_req">org.apache.thrift.TApplicationException: Invalid method name: &#x27;get_table_req&#x27;<a href="#orgapachethrifttapplicationexception-invalid-method-name-get_table_req" class="hash-link" aria-label="Direct link to org.apache.thrift.TApplicationException: Invalid method name: &#x27;get_table_req&#x27;" title="Direct link to org.apache.thrift.TApplicationException: Invalid method name: &#x27;get_table_req&#x27;">​</a></h4>
<p>This issue is caused by hive version conflicts, hudi built with hive-2.3.x version, so if still want hudi work with older hive version</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Steps: (build with hive-2.1.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. git clone git@github.com:apache/incubator-hudi.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. rm hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/hive/HoodieCombineHiveInputFormat.java</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. mvn clean package -DskipTests -DskipITs -Dhive.version=2.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="javalangunsupportedoperationexception-table-rename-is-not-supported">java.lang.UnsupportedOperationException: Table rename is not supported<a href="#javalangunsupportedoperationexception-table-rename-is-not-supported" class="hash-link" aria-label="Direct link to java.lang.UnsupportedOperationException: Table rename is not supported" title="Direct link to java.lang.UnsupportedOperationException: Table rename is not supported">​</a></h4>
<p>This issue could occur when syncing to hive. Possible reason is that, hive does not play well if your table name has upper and lower case letter. Try to have all lower case letters for your table name and it should likely get fixed. Related issue: <a href="https://github.com/apache/hudi/issues/2409" target="_blank" rel="noopener noreferrer">https://github.com/apache/hudi/issues/2409</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-resolve-the-illegalargumentexception-saying-partitions-must-be-in-the-same-table-when-attempting-to-sync-to-a-metastore">How can I resolve the IllegalArgumentException saying <code>Partitions must be in the same table</code> when attempting to sync to a metastore?<a href="#how-can-i-resolve-the-illegalargumentexception-saying-partitions-must-be-in-the-same-table-when-attempting-to-sync-to-a-metastore" class="hash-link" aria-label="Direct link to how-can-i-resolve-the-illegalargumentexception-saying-partitions-must-be-in-the-same-table-when-attempting-to-sync-to-a-metastore" title="Direct link to how-can-i-resolve-the-illegalargumentexception-saying-partitions-must-be-in-the-same-table-when-attempting-to-sync-to-a-metastore">​</a></h4>
<p>This will occur when capital letters are used in the table name. Metastores such as Hive automatically convert table names</p>
<p>to lowercase. While we allow capitalization on Hudi tables, if you would like to use a metastore you may be required to</p>
<p>use all lowercase letters. More details on how this issue presents can be found <a href="https://github.com/apache/hudi/issues/6832" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h4></h4></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/hudi/tree/asf-site/website/versioned_docs/version-0.15.0/troubleshooting.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/encryption"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Encryption</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tuning-guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Spark Tuning Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#writing-tables" class="table-of-contents__link toc-highlight">Writing Tables</a><ul><li><a href="#orgapacheparquetioinvalidrecordexception-parquetavro-schema-mismatch-avro-field-col1-not-found" class="table-of-contents__link toc-highlight">org.apache.parquet.io.InvalidRecordException: Parquet/Avro schema mismatch: Avro field &#39;col1&#39; not found</a></li><li><a href="#javalangunsupportedoperationexception-orgapacheparquetavroavroconvertersfieldintegerconverter" class="table-of-contents__link toc-highlight">java.lang.UnsupportedOperationException: org.apache.parquet.avro.AvroConverters$FieldIntegerConverter</a></li><li><a href="#schemacompatabilityexception-unable-to-validate-the-rewritten-record" class="table-of-contents__link toc-highlight">SchemaCompatabilityException: Unable to validate the rewritten record</a></li><li><a href="#int96-int64-and-timestamp-compatibility" class="table-of-contents__link toc-highlight">INT96, INT64 and timestamp compatibility</a></li><li><a href="#i-am-seeing-lot-of-archive-files-how-do-i-control-the-number-of-archive-commit-files-generated" class="table-of-contents__link toc-highlight">I am seeing lot of archive files. How do I control the number of archive commit files generated?</a></li><li><a href="#how-can-i-resolve-the-nosuchmethoderror-from-hbase-when-using-hudi-with-metadata-table-on-hdfs" class="table-of-contents__link toc-highlight">How can I resolve the NoSuchMethodError from HBase when using Hudi with metadata table on HDFS?</a></li><li><a href="#how-can-i-resolve-the-runtimeexception-saying-hbase-defaultxml-file-seems-to-be-for-an-older-version-of-hbase" class="table-of-contents__link toc-highlight">How can I resolve the RuntimeException saying <code>hbase-default.xml file seems to be for an older version of HBase</code>?</a></li><li><a href="#i-see-two-different-records-for-the-same-record-key-value-each-record-key-with-a-different-timestamp-format-how-is-this-possible" class="table-of-contents__link toc-highlight">I see two different records for the same record key value, each record key with a different timestamp format. How is this possible?</a></li></ul></li><li><a href="#querying-tables" class="table-of-contents__link toc-highlight">Querying Tables</a><ul><li><a href="#how-can-i-now-query-the-hudi-dataset-i-just-wrote" class="table-of-contents__link toc-highlight">How can I now query the Hudi dataset I just wrote?</a></li></ul></li><li><a href="#data-quality-issues" class="table-of-contents__link toc-highlight">Data Quality Issues</a><ul><li><a href="#missing-records" class="table-of-contents__link toc-highlight">Missing records</a></li><li><a href="#duplicates" class="table-of-contents__link toc-highlight">Duplicates</a></li></ul></li><li><a href="#ingestion" class="table-of-contents__link toc-highlight">Ingestion</a><ul><li><a href="#javaioeofexception-received--1-when-reading-from-channel-socket-has-likely-been-closed-at-kafkautilsutilsreadutilsscala381-at-kafkanetworkboundedbytebufferreceivereadfromboundedbytebufferreceivescala54" class="table-of-contents__link toc-highlight">java.io.EOFException: Received -1 when reading from channel, socket has likely been closed. at kafka.utils.Utils$.read(Utils.scala:381) at kafka.network.BoundedByteBufferReceive.readFrom(BoundedByteBufferReceive.scala:54)</a></li><li><a href="#javalangillegalargumentexception-could-not-find-a-kafkaclient-entry-in-the-jaas-configuration-system-property-javasecurityauthloginconfig-is-not-set" class="table-of-contents__link toc-highlight">java.lang.IllegalArgumentException: Could not find a &#39;KafkaClient&#39; entry in the JAAS configuration. System property &#39;java.security.auth.login.config&#39; is not set</a></li><li><a href="#ioexception-write-end-dead-or-circular-reference-while-writing-to-gcs" class="table-of-contents__link toc-highlight">IOException: Write end dead or CIRCULAR REFERENCE while writing to GCS</a></li><li><a href="#hudi-upserts-with-rli-fails-with-classcastexception" class="table-of-contents__link toc-highlight">Hudi upserts with RLI fails with ClassCastException</a></li></ul></li><li><a href="#hive-sync" class="table-of-contents__link toc-highlight">Hive Sync</a><ul><li><a href="#sqlexception-following-columns-have-types-incompatible" class="table-of-contents__link toc-highlight">SQLException: following columns have types incompatible</a></li><li><a href="#hoodiehivesyncexception-could-not-convert-field-type-from-type1-to-type2-for-field-col1" class="table-of-contents__link toc-highlight">HoodieHiveSyncException: Could not convert field Type from <code>&lt;type1&gt;</code> to <code>&lt;type2&gt;</code> for field col1</a></li><li><a href="#orgapachehadoophiveqlparsesemanticexception-database-does-not-exist-test_db" class="table-of-contents__link toc-highlight">org.apache.hadoop.hive.ql.parse.SemanticException: Database does not exist: test_db</a></li><li><a href="#orgapachethrifttapplicationexception-invalid-method-name-get_table_req" class="table-of-contents__link toc-highlight">org.apache.thrift.TApplicationException: Invalid method name: &#39;get_table_req&#39;</a></li><li><a href="#javalangunsupportedoperationexception-table-rename-is-not-supported" class="table-of-contents__link toc-highlight">java.lang.UnsupportedOperationException: Table rename is not supported</a></li><li><a href="#how-can-i-resolve-the-illegalargumentexception-saying-partitions-must-be-in-the-same-table-when-attempting-to-sync-to-a-metastore" class="table-of-contents__link toc-highlight">How can I resolve the IllegalArgumentException saying <code>Partitions must be in the same table</code> when attempting to sync to a metastore?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-0.15.0">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Who&#x27;s Using</a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docker_demo">Docker Demo</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li><li class="footer__item"><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-2ggm1fub8-_yt4Reu9djwqqVRFC7X49g" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. <br>Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
</body>
</html>