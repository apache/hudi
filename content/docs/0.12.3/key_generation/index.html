<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.12.3 docs-doc-page docs-custom-styles docs-doc-id-key_generation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Key Generation | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/docs/0.12.3/key_generation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="apache hudi, data lake, lakehouse, big data, apache spark, apache flink, presto, trino, analytics, data engineering"><meta data-rh="true" name="docusaurus_version" content="0.12.3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.12.3"><meta data-rh="true" name="docsearch:version" content="0.12.3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.12.3"><meta data-rh="true" property="og:title" content="Key Generation | Apache Hudi"><meta data-rh="true" name="description" content="Every record in Hudi is uniquely identified by a primary key, which is a pair of record key and partition path where the record belongs to."><meta data-rh="true" property="og:description" content="Every record in Hudi is uniquely identified by a primary key, which is a pair of record key and partition path where the record belongs to."><link data-rh="true" rel="icon" href="/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/docs/0.12.3/key_generation"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/0.12.3/key_generation" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/cn/docs/0.12.3/key_generation" hreflang="cn"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/0.12.3/key_generation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/videos/atom.xml" title="Apache Hudi Atom Feed">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css"><link rel="stylesheet" href="/assets/css/styles.0e0faa8c.css">
<script src="/assets/js/runtime~main.6da41ced.js" defer="defer"></script>
<script src="/assets/js/main.746914d1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=8f594acf-9b77-44fb-9475-3e82ead1910c" width="0" height="0" alt=""><img referrerpolicy="no-referrer-when-downgrade" src="https://analytics.apache.org/matomo.php?idsite=47&amp;rec=1" width="0" height="0" alt=""><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/talks">Talks</a></li><li><a class="dropdown__link" href="/videos">Video Guides</a></li><li><a class="dropdown__link" href="/docs/faq">FAQ</a></li><li><a class="dropdown__link" href="/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/tech-specs-1point0">Tech Specs 1.0</a></li><li><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="dropdown__link">Technical Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/contribute/report-security-issues">Report Security Issues</a></li><li><a href="https://issues.apache.org/jira/projects/HUDI/summary" target="_blank" rel="noopener noreferrer" class="dropdown__link">Report Issues<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/community/team">Team</a></li></ul></div><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.12.3/key_generation">0.12.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/key_generation">Current</a></li><li><a class="dropdown__link" href="/docs/key_generation">0.15.0</a></li><li><a class="dropdown__link" href="/docs/0.14.1/key_generation">0.14.1</a></li><li><a class="dropdown__link" href="/docs/0.14.0/key_generation">0.14.0</a></li><li><a class="dropdown__link" href="/docs/0.13.1/key_generation">0.13.1</a></li><li><a class="dropdown__link" href="/docs/0.13.0/key_generation">0.13.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.12.3/key_generation">0.12.3</a></li><li><a class="dropdown__link" href="/docs/0.12.2/key_generation">0.12.2</a></li><li><a class="dropdown__link" href="/docs/0.12.1/key_generation">0.12.1</a></li><li><a class="dropdown__link" href="/docs/0.12.0/key_generation">0.12.0</a></li><li><a class="dropdown__link" href="/docs/0.11.1/key_generation">0.11.1</a></li><li><a class="dropdown__link" href="/docs/0.11.0/key_generation">0.11.0</a></li><li><a class="dropdown__link" href="/docs/0.10.1/key_generation">0.10.1</a></li><li><a class="dropdown__link" href="/docs/0.10.0/key_generation">0.10.0</a></li><li><a class="dropdown__link" href="/docs/0.9.0/overview">0.9.0</a></li><li><a class="dropdown__link" href="/docs/0.8.0/overview">0.8.0</a></li><li><a class="dropdown__link" href="/docs/0.7.0/overview">0.7.0</a></li><li><a class="dropdown__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li><a class="dropdown__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li><a class="dropdown__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li><a class="dropdown__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li><a class="dropdown__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a><ul class="dropdown__menu"><li><a href="/docs/0.12.3/key_generation" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/cn/docs/0.12.3/key_generation" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="cn">Chinese</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-2ggm1fub8-_yt4Reu9djwqqVRFC7X49g" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Hudi YouTube Channel"></a><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><span class="searchText_sHOJ">Search</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><div class="navbar__logo navbarLogo_aghy"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/powered-by">Who&#x27;s Using</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/releases/download">Download</a></li><li class="menu__list-item"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Versions</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/key_generation">Current</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/key_generation">0.15.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.1/key_generation">0.14.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.14.0/key_generation">0.14.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.13.1/key_generation">0.13.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.13.0/key_generation">0.13.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/0.12.3/key_generation">0.12.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.2/key_generation">0.12.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.1/key_generation">0.12.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.12.0/key_generation">0.12.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.1/key_generation">0.11.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.11.0/key_generation">0.11.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.1/key_generation">0.10.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.10.0/key_generation">0.10.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.9.0/overview">0.9.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.8.0/overview">0.8.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.7.0/overview">0.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.6.0/quick-start-guide">0.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.3/quick-start-guide">0.5.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.2/quick-start-guide">0.5.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.1/quick-start-guide">0.5.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Languages<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a></li><li class="menu__list-item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Hudi Twitter Handle"></a></li><li class="menu__list-item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-2ggm1fub8-_yt4Reu9djwqqVRFC7X49g" target="_blank" rel="noopener noreferrer" class="menu__link header-slack-link" aria-label="Hudi Slack Channel"></a></li><li class="menu__list-item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="menu__link header-youtube-link" aria-label="Hudi YouTube Channel"></a></li><li class="menu__list-item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_bSxm"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_cWv0"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12.3/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/0.12.3/quick-start-guide">Quick Start</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/quick-start-guide">Spark Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/flink-quick-start-guide">Flink Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/docker_demo">Docker Demo</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/0.12.3/timeline">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/timeline">Timeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/table_types">Table &amp; Query Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/indexing">Indexing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/file_layouts">File Layouts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/metadata">Metadata Table</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/write_operations">Write Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/schema_evolution">Schema Evolution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.12.3/key_generation">Key Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12.3/concurrency_control">Concurrency Control</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.12.3/table_management">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.12.3/migration_guide">Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.12.3/basic_configurations">Configurations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.12.3/query_engine_setup">Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12.3/use_cases">Use Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12.3/faq">FAQs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12.3/privacy">Privacy Policy</a></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Apache Hudi<!-- --> <b>0.12.3</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/key_generation">latest version</a></b> (<!-- -->0.15.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Key Generation</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.12.3</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Key Generation</h1></header><p>Every record in Hudi is uniquely identified by a primary key, which is a pair of record key and partition path where the record belongs to.
Using primary keys, Hudi can impose a) partition level uniqueness integrity constraint b) enable fast updates and deletes on records.
One should choose the partitioning scheme wisely as it could be a determining factor for your ingestion and query latency.</p>
<p>In general, Hudi supports both partitioned and global indexes. For a dataset with partitioned index(which is most commonly used), each record is uniquely identified by a pair of record key and partition path.
But for a dataset with global index, each record is uniquely identified by just the record key. There won&#x27;t be any duplicate record keys across partitions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-generators">Key Generators<a href="#key-generators" class="hash-link" aria-label="Direct link to Key Generators" title="Direct link to Key Generators">​</a></h2>
<p>Hudi provides several key generators out of the box that users can use based on their need, while having a pluggable
implementation for users to implement and use their own KeyGenerator. This page goes over all different types of key
generators that are readily available to use.</p>
<p><a href="https://github.com/apache/hudi/blob/6f9b02decb5bb2b83709b1b6ec04a97e4d102c11/hudi-common/src/main/java/org/apache/hudi/keygen/KeyGenerator.java" target="_blank" rel="noopener noreferrer">Here</a>
is the interface for KeyGenerator in Hudi for your reference.</p>
<p>Before diving into different types of key generators, let’s go over some of the common configs required to be set for
key generators.</p>
<table><thead><tr><th>Config</th><th style="text-align:center">Meaning/purpose</th></tr></thead><tbody><tr><td><code>hoodie.datasource.write.recordkey.field</code></td><td style="text-align:center">Refers to record key field. This is a mandatory field.</td></tr><tr><td><code>hoodie.datasource.write.partitionpath.field</code></td><td style="text-align:center">Refers to partition path field. This is a mandatory field.</td></tr><tr><td><code>hoodie.datasource.write.keygenerator.class</code></td><td style="text-align:center">Refers to Key generator class(including full path). Could refer to any of the available ones or user defined one. This is a mandatory field.</td></tr><tr><td><code>hoodie.datasource.write.partitionpath.urlencode</code></td><td style="text-align:center">When set to true, partition path will be url encoded. Default value is false.</td></tr><tr><td><code>hoodie.datasource.write.hive_style_partitioning</code></td><td style="text-align:center">When set to true, uses hive style partitioning. Partition field name will be prefixed to the value. Format: “&lt;partition_path_field_name&gt;=&lt;partition_path_value&gt;”. Default value is false.</td></tr></tbody></table>
<p>There are few more configs involved if you are looking for TimestampBasedKeyGenerator. Will cover those in the respective section.</p>
<p>Lets go over different key generators available to be used with Hudi.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simplekeygenerator"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/SimpleKeyGenerator.java" target="_blank" rel="noopener noreferrer">SimpleKeyGenerator</a><a href="#simplekeygenerator" class="hash-link" aria-label="Direct link to simplekeygenerator" title="Direct link to simplekeygenerator">​</a></h3>
<p>Record key refers to one field(column in dataframe) by name and partition path refers to one field (single column in dataframe)
by name. This is one of the most commonly used one. Values are interpreted as is from dataframe and converted to string.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="complexkeygenerator"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/ComplexKeyGenerator.java" target="_blank" rel="noopener noreferrer">ComplexKeyGenerator</a><a href="#complexkeygenerator" class="hash-link" aria-label="Direct link to complexkeygenerator" title="Direct link to complexkeygenerator">​</a></h3>
<p>Both record key and partition paths comprise one or more than one field by name(combination of multiple fields). Fields
are expected to be comma separated in the config value. For example <code>&quot;Hoodie.datasource.write.recordkey.field&quot; : “col1,col4”</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="globaldeletekeygenerator"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/GlobalDeleteKeyGenerator.java" target="_blank" rel="noopener noreferrer">GlobalDeleteKeyGenerator</a><a href="#globaldeletekeygenerator" class="hash-link" aria-label="Direct link to globaldeletekeygenerator" title="Direct link to globaldeletekeygenerator">​</a></h3>
<p>Global index deletes do not require partition value. So this key generator avoids using partition value for generating HoodieKey.</p>
<p><strong><em>NOTE:</em></strong>
The &quot;GlobalDeleteKeyGenerator&quot; has to be used with a global index to delete records solely based on the record key.
It works for a batch with deletes only. The key generator can be used for both partitioned and non-partitioned table. Note that
when using this key generator, the config <code>hoodie.[bloom|simple|hbase].index.update.partition.path</code> should be set to
<code>false</code> in order to avoid redundant data written to the storage.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nonpartitionedkeygenerator"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/NonpartitionedKeyGenerator.java" target="_blank" rel="noopener noreferrer">NonpartitionedKeyGenerator</a><a href="#nonpartitionedkeygenerator" class="hash-link" aria-label="Direct link to nonpartitionedkeygenerator" title="Direct link to nonpartitionedkeygenerator">​</a></h3>
<p>If your hudi dataset is not partitioned, you could use this “NonpartitionedKeyGenerator” which will return an empty
partition for all records. In other words, all records go to the same partition (which is empty “”)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customkeygenerator"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/CustomKeyGenerator.java" target="_blank" rel="noopener noreferrer">CustomKeyGenerator</a><a href="#customkeygenerator" class="hash-link" aria-label="Direct link to customkeygenerator" title="Direct link to customkeygenerator">​</a></h3>
<p>This is a generic implementation of KeyGenerator where users are able to leverage the benefits of SimpleKeyGenerator,
ComplexKeyGenerator and TimestampBasedKeyGenerator all at the same time. One can configure record key and partition
paths as a single field or a combination of fields.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.recordkey.field</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.partitionpath.field</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.keygenerator.class=org.apache.hudi.keygen.CustomKeyGenerator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This keyGenerator is particularly useful if you want to define
complex partition paths involving regular fields and timestamp based fields. It expects value for prop <code>&quot;hoodie.datasource.write.partitionpath.field&quot;</code>
in a specific format. The format should be &quot;field1<!-- -->:PartitionKeyType1<!-- -->,field2<!-- -->:PartitionKeyType2<!-- -->...&quot;</p>
<p>The complete partition path is created as
<code>&lt;value for field1 basis PartitionKeyType1&gt;/&lt;value for field2 basis PartitionKeyType2&gt; </code>
and so on. Each partition key type could either be SIMPLE or TIMESTAMP.</p>
<p>Example config value: <code>“field_3:simple,field_5:timestamp”</code></p>
<p>RecordKey config value is either single field incase of SimpleKeyGenerator or a comma separate field names if referring to ComplexKeyGenerator.
Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.recordkey.field=field1,field2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will create your record key in the format <code>field1:value1,field2:value2</code> and so on, otherwise you can specify only one field in case of simple record keys. <code>CustomKeyGenerator</code> class defines an enum <code>PartitionKeyType</code> for configuring partition paths. It can take two possible values - SIMPLE and TIMESTAMP.
The value for <code>hoodie.datasource.write.partitionpath.field</code> property in case of partitioned tables needs to be provided in the format <code>field1:PartitionKeyType1,field2:PartitionKeyType2</code> and so on. For example, if you want to create partition path using 2 fields <code>country</code> and <code>date</code> where the latter has timestamp based values and needs to be customised in a given format, you can specify the following</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.partitionpath.field=country:SIMPLE,date:TIMESTAMP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will create the partition path in the format <code>&lt;country_name&gt;/&lt;date&gt;</code> or <code>country=&lt;country_name&gt;/date=&lt;date&gt;</code> depending on whether you want hive style partitioning or not.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bring-your-own-implementation">Bring your own implementation<a href="#bring-your-own-implementation" class="hash-link" aria-label="Direct link to Bring your own implementation" title="Direct link to Bring your own implementation">​</a></h3>
<p>You can implement your own custom key generator by extending the public API class here:</p>
<p><a href="https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/keygen/KeyGenerator.java" target="_blank" rel="noopener noreferrer">https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/keygen/KeyGenerator.java</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timestampbasedkeygenerator"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/TimestampBasedKeyGenerator.java" target="_blank" rel="noopener noreferrer">TimestampBasedKeyGenerator</a><a href="#timestampbasedkeygenerator" class="hash-link" aria-label="Direct link to timestampbasedkeygenerator" title="Direct link to timestampbasedkeygenerator">​</a></h3>
<p>This key generator relies on timestamps for the partition field. The field values are interpreted as timestamps
and not just converted to string while generating partition path value for records.  Record key is same as before where it is chosen by
field name.  Users are expected to set few more configs to use this KeyGenerator.</p>
<p>Configs to be set:</p>
<table><thead><tr><th>Config</th><th>Meaning/purpose</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>One of the timestamp types supported(UNIX_TIMESTAMP, DATE_STRING, MIXED, EPOCHMILLISECONDS, SCALAR)</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>Output date format</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.timezone</code></td><td>Timezone of the data format</td></tr><tr><td><code>oodie.deltastreamer.keygen.timebased.input.dateformat</code></td><td>Input date format</td></tr></tbody></table>
<p>Let&#x27;s go over some example values for TimestampBasedKeyGenerator.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-is-gmt">Timestamp is GMT<a href="#timestamp-is-gmt" class="hash-link" aria-label="Direct link to Timestamp is GMT" title="Direct link to Timestamp is GMT">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;EPOCHMILLISECONDS&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyy-MM-dd hh&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.timezone</code></td><td>&quot;GMT+8:00&quot;</td></tr></tbody></table>
<p>Input Field value: “1578283932000L” <br>
Partition path generated from key generator: “2020-01-06 12”</p>
<p>If input field value is null for some rows. <br>
Partition path generated from key generator: “1970-01-01 08”</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-is-date_string">Timestamp is DATE_STRING<a href="#timestamp-is-date_string" class="hash-link" aria-label="Direct link to Timestamp is DATE_STRING" title="Direct link to Timestamp is DATE_STRING">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyy-MM-dd hh&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.timezone</code></td><td>&quot;GMT+8:00&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd hh:mm<!-- -->:ss<!-- -->&quot;</td></tr></tbody></table>
<p>Input field value: “2020-01-06 12:12:12” <br>
Partition path generated from key generator: “2020-01-06 12”</p>
<p>If input field value is null for some rows. <br>
Partition path generated from key generator: “1970-01-01 12:00:00”</p>
<br>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scalar-examples">Scalar examples<a href="#scalar-examples" class="hash-link" aria-label="Direct link to Scalar examples" title="Direct link to Scalar examples">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;SCALAR&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyy-MM-dd hh&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.timezone</code></td><td>&quot;GMT&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.scalar.time.unit</code></td><td>&quot;days&quot;</td></tr></tbody></table>
<p>Input field value: “20000L” <br>
Partition path generated from key generator: “2024-10-04 12”</p>
<p>If input field value is null. <br>
Partition path generated from key generator: “1970-01-02 12”</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso8601withmsz-with-single-input-format">ISO8601WithMsZ with Single Input format<a href="#iso8601withmsz-with-single-input-format" class="hash-link" aria-label="Direct link to ISO8601WithMsZ with Single Input format" title="Direct link to ISO8601WithMsZ with Single Input format">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.timezone</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyyMMddHH&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.timezone</code></td><td>&quot;GMT&quot;</td></tr></tbody></table>
<p>Input field value: &quot;2020-04-01T13:01:33.428Z&quot; <br>
Partition path generated from key generator: &quot;2020040113&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso8601withmsz-with-multiple-input-formats">ISO8601WithMsZ with Multiple Input formats<a href="#iso8601withmsz-with-multiple-input-formats" class="hash-link" aria-label="Direct link to ISO8601WithMsZ with Multiple Input formats" title="Direct link to ISO8601WithMsZ with Multiple Input formats">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->,yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.timezone</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyyMMddHH&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.timezone</code></td><td>&quot;UTC&quot;</td></tr></tbody></table>
<p>Input field value: &quot;2020-04-01T13:01:33.428Z&quot; <br>
Partition path generated from key generator: &quot;2020040113&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso8601noms-with-offset-using-multiple-input-formats">ISO8601NoMs with offset using multiple input formats<a href="#iso8601noms-with-offset-using-multiple-input-formats" class="hash-link" aria-label="Direct link to ISO8601NoMs with offset using multiple input formats" title="Direct link to ISO8601NoMs with offset using multiple input formats">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->,yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.timezone</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyyMMddHH&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.timezone</code></td><td>&quot;UTC&quot;</td></tr></tbody></table>
<p>Input field value: &quot;2020-04-01T13:01:33-<strong>05:00</strong>&quot; <br>
Partition path generated from key generator: &quot;2020040118&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-as-short-date-string-and-expect-date-in-date-format">Input as short date string and expect date in date format<a href="#input-as-short-date-string-and-expect-date-in-date-format" class="hash-link" aria-label="Direct link to Input as short date string and expect date in date format" title="Direct link to Input as short date string and expect date in date format">​</a></h4>
<table><thead><tr><th>Config field</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.deltastreamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->,yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ,yyyyMMdd&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.input.timezone</code></td><td>&quot;UTC&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.dateformat</code></td><td>&quot;MM/dd/yyyy&quot;</td></tr><tr><td><code>hoodie.deltastreamer.keygen.timebased.output.timezone</code></td><td>&quot;UTC&quot;</td></tr></tbody></table>
<p>Input field value: &quot;20200401&quot; <br>
Partition path generated from key generator: &quot;04/01/2020&quot;</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/hudi/tree/asf-site/website/versioned_docs/version-0.12.3/key_generation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.12.3/schema_evolution"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Schema Evolution</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.12.3/concurrency_control"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Concurrency Control</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-generators" class="table-of-contents__link toc-highlight">Key Generators</a><ul><li><a href="#simplekeygenerator" class="table-of-contents__link toc-highlight">SimpleKeyGenerator</a></li><li><a href="#complexkeygenerator" class="table-of-contents__link toc-highlight">ComplexKeyGenerator</a></li><li><a href="#globaldeletekeygenerator" class="table-of-contents__link toc-highlight">GlobalDeleteKeyGenerator</a></li><li><a href="#nonpartitionedkeygenerator" class="table-of-contents__link toc-highlight">NonpartitionedKeyGenerator</a></li><li><a href="#customkeygenerator" class="table-of-contents__link toc-highlight">CustomKeyGenerator</a></li><li><a href="#bring-your-own-implementation" class="table-of-contents__link toc-highlight">Bring your own implementation</a></li><li><a href="#timestampbasedkeygenerator" class="table-of-contents__link toc-highlight">TimestampBasedKeyGenerator</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/release-0.15.0">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/powered-by">Who&#x27;s Using</a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docker_demo">Docker Demo</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li><li class="footer__item"><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ibm_cos_hoodie">IBM Cloud</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-2ggm1fub8-_yt4Reu9djwqqVRFC7X49g" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>. <br>Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
</body>
</html>