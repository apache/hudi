<!doctype html>
<html lang="cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.0.2 docs-doc-page docs-custom-styles docs-doc-id-key_generation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Key Generation | Apache Hudi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hudi.apache.org/cn/docs/key_generation"><meta data-rh="true" property="og:locale" content="cn"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="cn"><meta data-rh="true" name="docsearch:language" content="cn"><meta data-rh="true" name="keywords" content="apache hudi, data lake, lakehouse, big data, apache spark, apache flink, presto, trino, analytics, data engineering"><meta data-rh="true" name="docusaurus_version" content="1.0.2"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.0.2"><meta data-rh="true" name="docsearch:version" content="1.0.2"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.0.2"><meta data-rh="true" property="og:title" content="Key Generation | Apache Hudi"><meta data-rh="true" name="description" content="Hudi needs some way to point to records in the table, so that base/log files can be merged efficiently for updates/deletes,"><meta data-rh="true" property="og:description" content="Hudi needs some way to point to records in the table, so that base/log files can be merged efficiently for updates/deletes,"><link data-rh="true" rel="icon" href="/cn/assets/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://hudi.apache.org/cn/docs/key_generation"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/key_generation" hreflang="en"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/cn/docs/key_generation" hreflang="cn"><link data-rh="true" rel="alternate" href="https://hudi.apache.org/docs/key_generation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Key Generation","item":"https://hudi.apache.org/cn/docs/key_generation"}]}</script><link rel="alternate" type="application/rss+xml" href="/cn/blog/rss.xml" title="Apache Hudi: User-Facing Analytics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cn/blog/atom.xml" title="Apache Hudi: User-Facing Analytics Atom Feed">
<link rel="alternate" type="application/json" href="/cn/blog/feed.json" title="Apache Hudi: User-Facing Analytics JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Apache Hudi" href="/cn/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/cn/videos/rss.xml" title="Apache Hudi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cn/videos/atom.xml" title="Apache Hudi Atom Feed">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa|Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css">
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="9e4444ba-93cc-45ea-b143-783ae0fbeb6f" data-project-name="Apache Hudi" data-project-color="#FFFFFF" data-project-logo="https://hudi.apache.org/assets/images/logo-big.png" data-modal-disclaimer="This AI assistant answers Apache Hudi questions using your [documentation](https://hudi.apache.org/docs/quick-start-guide/), [dev setup](https://hudi.apache.org/contribute/developer-setup/), the [tech specs](https://hudi.apache.org/tech-specs-1point0/) and open GitHub Issues from the last year." data-modal-title="Apache Hudi AI Assistant" data-modal-example-questions-title="Try asking me..." data-modal-example-questions="How can I convert an existing COW table to MOR?,How do I set up incremental queries with Hudi tables?" data-modal-image="https://hudi.apache.org/assets/images/logo-big-2.png" data-modal-image-ask-ai="https://hudi.apache.org/assets/images/logo-big-2.png" data-modal-header-min-height="64px" data-modal-image-height="40" data-modal-image-width="40" data-modal-header-bg-color="#ffffff" data-modal-title-color="rgb(13, 177, 249)" data-button-text-color="rgb(41, 85, 122)" data-button-text="Ask AI" data-consent-required="true" data-consent-screen-title="Help us improve our AI assistant" data-consent-screen-disclaimer="By clicking &amp;quot;Allow tracking&amp;quot;, you consent to the use of the AI assistant in accordance with kapa.ai&#39;s [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google&#39;s [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai&#39;s and Google&#39;s privacy policies." data-consent-screen-accept-button-text="Allow tracking" data-query-input-placeholder-text-color="rgb(41, 85, 122)" data-submit-query-button-bg-color="#000" data-user-analytics-cookie-enabled="false" async></script><link rel="stylesheet" href="/cn/assets/css/styles.d44ac021.css">
<script src="/cn/assets/js/runtime~main.9521ca35.js" defer="defer"></script>
<script src="/cn/assets/js/main.ba02d252.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like <b>Apache Hudi</b>, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/apache/hudi"><b>GitHub!<svg xmlns="http://www.w3.org/2000/svg\" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 -2 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></b></a> ⭐</div></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarWrapper_j_uY"><div class="navbar__inner navbarInnerStyle_KoMw"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cn/"><div class="navbar__logo navbarLogo_aghy"><img src="/cn/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cn/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/cn/docs/overview">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cn/learn/tutorial-series">Tutorial Series</a></li><li><a class="dropdown__link" href="/cn/talks">Talks</a></li><li><a class="dropdown__link" href="/cn/videos">Video Guides</a></li><li><a class="dropdown__link" href="/cn/docs/faq">FAQ</a></li><li><a class="dropdown__link" href="/cn/tech-specs">Tech Specs</a></li><li><a class="dropdown__link" href="/cn/tech-specs-1point0">Tech Specs 1.0</a></li><li><a href="https://cwiki.apache.org/confluence/display/HUDI" target="_blank" rel="noopener noreferrer" class="dropdown__link">Technical Wiki<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Contribute</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cn/contribute/developer-sync-call">Developer Sync Call</a></li><li><a class="dropdown__link" href="/cn/contribute/how-to-contribute">How to Contribute</a></li><li><a class="dropdown__link" href="/cn/contribute/developer-setup">Developer Setup</a></li><li><a class="dropdown__link" href="/cn/contribute/rfc-process">RFC Process</a></li><li><a class="dropdown__link" href="/cn/contribute/report-security-issues">Report Security Issues</a></li><li><a href="https://issues.apache.org/jira/projects/HUDI/summary" target="_blank" rel="noopener noreferrer" class="dropdown__link">Report Issues<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cn/community/get-involved">Get Involved</a></li><li><a class="dropdown__link" href="/cn/community/syncs">Community Syncs</a></li><li><a class="dropdown__link" href="/cn/community/office_hours">Office Hours</a></li><li><a class="dropdown__link" href="/cn/community/team">Team</a></li><li><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="dropdown__link">Join Our Slack Space<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/cn/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/cn/blog">Blog</a><a class="navbar__item navbar__link" href="/cn/powered-by">Who&#x27;s Using</a><a class="navbar__item navbar__link" href="/cn/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/cn/releases/download">Download</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/cn/docs/key_generation">1.0.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cn/docs/next/key_generation">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/cn/docs/key_generation">1.0.2</a></li><li><a class="dropdown__link" href="/cn/docs/1.0.1/key_generation">1.0.1</a></li><li><a class="dropdown__link" href="/cn/docs/1.0.0/key_generation">1.0.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.15.0/key_generation">0.15.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.14.1/key_generation">0.14.1</a></li><li><a class="dropdown__link" href="/cn/docs/0.14.0/key_generation">0.14.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.13.1/key_generation">0.13.1</a></li><li><a class="dropdown__link" href="/cn/docs/0.13.0/key_generation">0.13.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.12.3/key_generation">0.12.3</a></li><li><a class="dropdown__link" href="/cn/docs/0.12.2/key_generation">0.12.2</a></li><li><a class="dropdown__link" href="/cn/docs/0.12.1/key_generation">0.12.1</a></li><li><a class="dropdown__link" href="/cn/docs/0.12.0/key_generation">0.12.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.11.1/key_generation">0.11.1</a></li><li><a class="dropdown__link" href="/cn/docs/0.11.0/key_generation">0.11.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.10.1/key_generation">0.10.1</a></li><li><a class="dropdown__link" href="/cn/docs/0.10.0/key_generation">0.10.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.9.0/overview">0.9.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.8.0/overview">0.8.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.7.0/overview">0.7.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.6.0/quick-start-guide">0.6.0</a></li><li><a class="dropdown__link" href="/cn/docs/0.5.3/quick-start-guide">0.5.3</a></li><li><a class="dropdown__link" href="/cn/docs/0.5.2/quick-start-guide">0.5.2</a></li><li><a class="dropdown__link" href="/cn/docs/0.5.1/quick-start-guide">0.5.1</a></li><li><a class="dropdown__link" href="/cn/docs/0.5.0/quick-start-guide">0.5.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Chinese<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a><ul class="dropdown__menu"><li><a href="/docs/key_generation" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/cn/docs/key_generation" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="cn">Chinese</a></li></ul></div><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Hudi Twitter Handle"></a><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Hudi Slack Channel"></a><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Hudi YouTube Channel"></a><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a><div class="navbarSearchContainer_Bca1"><div><div role="button" class="searchButton_o6KI" aria-label="Search"><span class="searchText_sHOJ">Search</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14"><circle cx="6.864" cy="6.864" r="5.243" stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><path stroke="#1C1E21" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m10.51 10.783 2.056 2.05"></path></svg></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar navbarSideMenu_TODO"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cn/"><div class="navbar__logo navbarLogo_aghy"><img src="/cn/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cn/assets/images/hudi.png" alt="Apache Hudi" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><button type="button" aria-label="Close navigation bar" class="clean-btn navbar-sidebar__close"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="var(--ifm-color-emphasis-600)" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/cn/docs/overview">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Learn</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Community</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/cn/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/cn/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/cn/powered-by">Who&#x27;s Using</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/cn/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link navbarFontSize_pR5Q" href="/cn/releases/download">Download</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret navbarFontSize_pR5Q">Versions</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="dropdownNavbarItemMobile_JUhd menu__link menu__link--sublist menu__link--sublist-caret locale-dropdown-wrapper"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Languages<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 14 14" class="globeIcon_RxQM"><g clip-path="url(#a)"><path fill="#1C1E21" d="M14 6.457a6.84 6.84 0 0 0-7-6.02 6.843 6.843 0 0 0-7 6.02v1.085a6.843 6.843 0 0 0 7 6.02 6.843 6.843 0 0 0 7-6.02zm-1.094 0h-2.625a10 10 0 0 0-.376-2.222 6.7 6.7 0 0 0 1.531-.875 5.25 5.25 0 0 1 1.444 3.097zm-8.032 0a8.5 8.5 0 0 1 .324-1.872 7.4 7.4 0 0 0 3.63 0c.175.61.284 1.239.325 1.872zm4.305 1.085a8.4 8.4 0 0 1-.324 1.873 7.46 7.46 0 0 0-3.658 0 8.5 8.5 0 0 1-.323-1.873zm.35-4.375A10.3 10.3 0 0 0 8.75 1.75c.627.194 1.218.49 1.75.875a5.8 5.8 0 0 1-.998.577zM7.254 1.54A8.8 8.8 0 0 1 8.46 3.552c-.48.11-.97.165-1.461.167-.492-.001-.982-.057-1.461-.167.308-.722.715-1.4 1.207-2.012zM4.498 3.202a5.8 5.8 0 0 1-.998-.577 6 6 0 0 1 1.75-.875c-.294.46-.546.947-.753 1.452m-1.873.15c.47.358.984.652 1.531.874A9.6 9.6 0 0 0 3.78 6.45H1.155a5.25 5.25 0 0 1 1.47-3.098M1.12 7.541h2.625c.038.753.164 1.5.376 2.223a6.7 6.7 0 0 0-1.531.875 5.25 5.25 0 0 1-1.47-3.098m3.377 3.255q.311.76.753 1.453a6 6 0 0 1-1.75-.875q.47-.34.997-.578m2.25 1.663a8.6 8.6 0 0 1-1.208-2.013 6.5 6.5 0 0 1 2.922 0 8.5 8.5 0 0 1-1.207 2.013zm2.755-1.663q.552.235 1.042.578a6.3 6.3 0 0 1-1.75.875q.413-.697.708-1.453m1.873-.148a6.7 6.7 0 0 0-1.531-.875 9.5 9.5 0 0 0 .376-2.223h2.625a5.25 5.25 0 0 1-1.47 3.098"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h14v14H0z"></path></clipPath></defs></svg></a></li><li class="menu__list-item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="menu__link header-twitter-link" aria-label="Hudi Twitter Handle"></a></li><li class="menu__list-item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="menu__link header-slack-link" aria-label="Hudi Slack Channel"></a></li><li class="menu__list-item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="menu__link header-youtube-link" aria-label="Hudi YouTube Channel"></a></li><li class="menu__list-item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="Hudi Linkedin Page"></a></li></ul></div><div class="navbar-sidebar__item menu"><button type="button" class="clean-btn navbar-sidebar__back">← Back to main menu</button></div></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_bSxm"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_cWv0"><aside class="theme-doc-sidebar-container docSidebarContainer_RSuS"><div class="sidebarViewport_pYEE"><div class="sidebar_njMd"><nav aria-label="Sidebar navigation" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/cn/docs/overview">Getting Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/quick-start-guide">Spark Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/flink-quick-start-guide">Flink 指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/python-rust-quick-start-guide">Python/Rust Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/docker_demo">Docker Demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/use_cases">使用案例</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/cn/docs/hudi_stack">Design &amp; Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/hudi_stack">Apache Hudi Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/timeline">Timeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/storage_layouts">Storage Layouts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/write_operations">Write Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/table_types">Table &amp; Query Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cn/docs/key_generation">Key Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/record_merger">Record Mergers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/metadata">Table Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/indexes">Indexes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/concurrency_control">Concurrency Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/docs/schema_evolution">Schema Evolution</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/hoodie_streaming_ingestion">Ingestion</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/sql_ddl">Writing Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/sql_queries">Reading Tables</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/cleaning">Table Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/snapshot_exporter">Platform &amp; Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/performance">Operating Hudi</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/basic_configurations">Configurations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cn/docs/faq">Frequently Asked Questions(FAQs)</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/docs/privacy">隐私协议</a></li></ul></nav></div></div></aside><main class="docMainContainer_hjYf"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Design &amp; Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Key Generation</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0.2</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Key Generation</h1></header><p>Hudi needs some way to point to records in the table, so that base/log files can be merged efficiently for updates/deletes,
index entries can reference these rows and records can move around within the table from clustering without side effects.
In fact, most databases adopt similar techniques. Every record in Hudi is uniquely identified a pair of record key and an optional
partition path that can limit the scope of the key&#x27;s uniqueness (non-global indexing). For tables with a global index, records are
identified by just the record key such that uniqueness is applied across partitions.</p>
<p>Using keys, Hudi can impose partition/table level uniqueness integrity constraint as well as enable fast updates and deletes on records. Record keys are materialized in a
special <code>_hoodie_record_key</code> field in the table, to ensure key uniqueness is maintained even when the record generation is changed
during the table&#x27;s lifetime. Without materialization, there are no guarantees that the past data written for a new key is unique across the table.</p>
<p>Hudi offers many ways to generate record keys from the input data during writes.</p>
<ul>
<li>
<p>For Java client/Spark/Flink writers, Hudi provides built-in key generator classes (described below) as well as an <a href="https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/keygen/KeyGenerator.java" target="_blank" rel="noopener noreferrer">interface</a>
to write custom implementations.</p>
</li>
<li>
<p>SQL engines offer options to pass in key fields and use <code>PARTITIONED BY</code> clauses to control partitioning.</p>
</li>
</ul>
<p>By default, Hudi auto-generates keys for INSERT, BULK_INSERT write operations, that are efficient
for compute, storage and read to meet the uniqueness requirements of the primary key. Auto generated keys are highly
compressible compared to UUIDs costing about $0.023 per GB in cloud storage and 3-10x computationally lighter to generate
than base64/uuid encoded keys.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-generators">Key Generators<a href="#key-generators" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>Hudi provides several key generators out of the box for JVM users can use based on their need, while having a pluggable
interface for users to implement and use their own.</p>
<p>Before diving into different types of key generators, let’s go over some of the common configs relevant to key generators.</p>
<table><thead><tr><th>Config Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>hoodie.datasource.write.recordkey.field</td><td>N/A (Optional)</td><td>Record key field. Value to be used as the <code>recordKey</code> component of <code>HoodieKey</code>. <ul><li>When configured, actual value will be obtained by invoking .toString() on the field value. Nested fields can be specified using the dot notation eg: <code>a.b.c</code>. </li><li>When not configured record key will be automatically generated by Hudi. This feature is handy for use cases like log ingestion that do not have a naturally present record key.</li></ul> <br><code>Config Param: RECORDKEY_FIELD_NAME</code></td></tr><tr><td>hoodie.datasource.write.partitionpath.field</td><td>N/A (Optional)</td><td>Partition path field. Value to be used at the partitionPath component of HoodieKey. This needs to be specified if a partitioned table is desired. Actual value obtained by invoking .toString()<br><code>Config Param: PARTITIONPATH_FIELD_NAME</code></td></tr><tr><td>hoodie.datasource.write.keygenerator.type</td><td>SIMPLE</td><td>String representing key generator type <br><br><code>Config Param: KEYGENERATOR_TYPE</code></td></tr><tr><td>hoodie.datasource.write.keygenerator.class</td><td>N/A (Optional)</td><td>Key generator class, that implements <code>org.apache.hudi.keygen.KeyGenerator</code> extract a key out of incoming records. <ul><li>When set, the configured value takes precedence to be in effect and automatic inference is not triggered.</li><li>When not configured, if <code>hoodie.datasource.write.keygenerator.type</code> is set, the configured value is used else automatic inference is triggered.</li><li>In case of auto generated record keys, if neither the key generator class nor type are configured, Hudi will also auto infer the partitioning. for eg, if partition field is not configured, hudi will assume its non-partitioned. </li></ul> <br><code>Config Param: KEYGENERATOR_CLASS_NAME</code></td></tr><tr><td>hoodie.datasource.write.hive_style_partitioning</td><td>false (Optional)</td><td>Flag to indicate whether to use Hive style partitioning. If set true, the names of partition folders follow &lt;partition_column_name&gt;=&lt;partition_value&gt; format. By default false (the names of partition folders are only partition values)<br><br><code>Config Param: HIVE_STYLE_PARTITIONING_ENABLE</code></td></tr><tr><td>hoodie.datasource.write.partitionpath.urlencode</td><td>false (Optional)</td><td>Should we url encode the partition path value, before creating the folder structure.<br><br><code>Config Param: URL_ENCODE_PARTITIONING</code></td></tr></tbody></table>
<p>For all advanced configs refer <a href="https://hudi.apache.org/docs/next/configurations#KEY_GENERATOR" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/SimpleKeyGenerator.java" target="_blank" rel="noopener noreferrer">SIMPLE</a><a href="#simple" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>This is the most commonly used option. Record key is generated from two fields from the schema, one for record key and one for partition path.  Values are interpreted as is from dataframe and converted to string.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="complex"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/ComplexKeyGenerator.java" target="_blank" rel="noopener noreferrer">COMPLEX</a><a href="#complex" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Both record key and partition paths comprise one or more than one field by name(combination of multiple fields). Fields
are expected to be comma separated in the config value. For example <code>&quot;Hoodie.datasource.write.recordkey.field&quot; : “col1,col4”</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="non_partition"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/NonpartitionedKeyGenerator.java" target="_blank" rel="noopener noreferrer">NON_PARTITION</a><a href="#non_partition" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>If your hudi dataset is not partitioned, you could use this “NonpartitionedKeyGenerator” which will return an empty
partition for all records. In other words, all records go to the same partition (which is empty “”)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/CustomKeyGenerator.java" target="_blank" rel="noopener noreferrer">CUSTOM</a><a href="#custom" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>This is a generic implementation of KeyGenerator where users are able to leverage the benefits of SimpleKeyGenerator,
ComplexKeyGenerator and TimestampBasedKeyGenerator all at the same time. One can configure record key and partition
paths as a single field or a combination of fields.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.recordkey.field</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.partitionpath.field</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.keygenerator.class=org.apache.hudi.keygen.CustomKeyGenerator</span><br></span></code></pre></div></div>
<p>This keyGenerator is particularly useful if you want to define
complex partition paths involving regular fields and timestamp based fields. It expects value for prop <code>&quot;hoodie.datasource.write.partitionpath.field&quot;</code>
in a specific format. The format should be &quot;field1<!-- -->:PartitionKeyType1<!-- -->,field2<!-- -->:PartitionKeyType2<!-- -->...&quot;</p>
<p>The complete partition path is created as
<code>&lt;value for field1 basis PartitionKeyType1&gt;/&lt;value for field2 basis PartitionKeyType2&gt; </code>
and so on. Each partition key type could either be SIMPLE or TIMESTAMP.</p>
<p>Example config value: <code>“field_3:simple,field_5:timestamp”</code></p>
<p>RecordKey config value is either single field incase of SimpleKeyGenerator or a comma separate field names if referring to ComplexKeyGenerator.
Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.recordkey.field=field1,field2</span><br></span></code></pre></div></div>
<p>This will create your record key in the format <code>field1:value1,field2:value2</code> and so on, otherwise you can specify only one field in case of simple record keys. <code>CustomKeyGenerator</code> class defines an enum <code>PartitionKeyType</code> for configuring partition paths. It can take two possible values - SIMPLE and TIMESTAMP.
The value for <code>hoodie.datasource.write.partitionpath.field</code> property in case of partitioned tables needs to be provided in the format <code>field1:PartitionKeyType1,field2:PartitionKeyType2</code> and so on. For example, if you want to create partition path using 2 fields <code>country</code> and <code>date</code> where the latter has timestamp based values and needs to be customised in a given format, you can specify the following</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hoodie.datasource.write.partitionpath.field=country:SIMPLE,date:TIMESTAMP</span><br></span></code></pre></div></div>
<p>This will create the partition path in the format <code>&lt;country_name&gt;/&lt;date&gt;</code> or <code>country=&lt;country_name&gt;/date=&lt;date&gt;</code> depending on whether you want hive style partitioning or not.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp"><a href="https://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/keygen/TimestampBasedKeyGenerator.java" target="_blank" rel="noopener noreferrer">TIMESTAMP</a><a href="#timestamp" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>This key generator relies on timestamps for the partition field. The field values are interpreted as timestamps
and not just converted to string while generating partition path value for records.  Record key is same as before where it is chosen by
field name.  Users are expected to set few more configs to use this KeyGenerator.</p>
<p>Configs to be set:</p>
<table><thead><tr><th>Config Name</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>hoodie.keygen.timebased.timestamp.type</td><td>N/A <strong>(Required)</strong></td><td>Required only when the key generator is TimestampBasedKeyGenerator. One of the timestamp types supported(UNIX_TIMESTAMP, DATE_STRING, MIXED, EPOCHMILLISECONDS, SCALAR)</td></tr><tr><td>hoodie.keygen.timebased.output.dateformat</td><td>&quot;&quot; (Optional)</td><td>Output date format such as <code>yyyy-MM-dd&#x27;T&#x27;HH:mm:ss.SSSZ</code></td></tr><tr><td>hoodie.keygen.timebased.timezone</td><td>&quot;UTC&quot; (Optional)</td><td>Timezone of both input and output timestamp if they are the same, such as <code>UTC</code>.  Please use <code>hoodie.keygen.timebased.input.timezone</code> and <code>hoodie.keygen.timebased.output.timezone</code> instead if the input and output timezones are different.</td></tr><tr><td>hoodie.keygen.timebased.input.dateformat</td><td>&quot;&quot; (Optional)</td><td>Input date format such as <code>yyyy-MM-dd&#x27;T&#x27;HH:mm:ss.SSSZ</code>.</td></tr></tbody></table>
<p>Let&#x27;s go over some example values for TimestampBasedKeyGenerator.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-is-gmt">Timestamp is GMT<a href="#timestamp-is-gmt" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;EPOCHMILLISECONDS&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyy-MM-dd hh&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.timezone</code></td><td>&quot;GMT+8:00&quot;</td></tr></tbody></table>
<p>Input Field value: “1578283932000L” <br>
Partition path generated from key generator: “2020-01-06 12”</p>
<p>If input field value is null for some rows. <br>
Partition path generated from key generator: “1970-01-01 08”</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-is-date_string">Timestamp is DATE_STRING<a href="#timestamp-is-date_string" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyy-MM-dd hh&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.timezone</code></td><td>&quot;GMT+8:00&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd hh:mm<!-- -->:ss<!-- -->&quot;</td></tr></tbody></table>
<p>Input field value: “2020-01-06 12:12:12” <br>
Partition path generated from key generator: “2020-01-06 12”</p>
<p>If input field value is null for some rows. <br>
Partition path generated from key generator: “1970-01-01 12:00:00”</p>
<br>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scalar-examples">Scalar examples<a href="#scalar-examples" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;SCALAR&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyy-MM-dd hh&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.timezone</code></td><td>&quot;GMT&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.scalar.time.unit</code></td><td>&quot;days&quot;</td></tr></tbody></table>
<p>Input field value: “20000L” <br>
Partition path generated from key generator: “2024-10-04 12”</p>
<p>If input field value is null. <br>
Partition path generated from key generator: “1970-01-02 12”</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso8601withmsz-with-single-input-format">ISO8601WithMsZ with Single Input format<a href="#iso8601withmsz-with-single-input-format" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.timezone</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyyMMddHH&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.timezone</code></td><td>&quot;GMT&quot;</td></tr></tbody></table>
<p>Input field value: &quot;2020-04-01T13:01:33.428Z&quot; <br>
Partition path generated from key generator: &quot;2020040113&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso8601withmsz-with-multiple-input-formats">ISO8601WithMsZ with Multiple Input formats<a href="#iso8601withmsz-with-multiple-input-formats" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->,yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.timezone</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyyMMddHH&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.timezone</code></td><td>&quot;UTC&quot;</td></tr></tbody></table>
<p>Input field value: &quot;2020-04-01T13:01:33.428Z&quot; <br>
Partition path generated from key generator: &quot;2020040113&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso8601noms-with-offset-using-multiple-input-formats">ISO8601NoMs with offset using multiple input formats<a href="#iso8601noms-with-offset-using-multiple-input-formats" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->,yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.timezone</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;yyyyMMddHH&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.timezone</code></td><td>&quot;UTC&quot;</td></tr></tbody></table>
<p>Input field value: &quot;2020-04-01T13:01:33-<strong>05:00</strong>&quot; <br>
Partition path generated from key generator: &quot;2020040118&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-as-short-date-string-and-expect-date-in-date-format">Input as short date string and expect date in date format<a href="#input-as-short-date-string-and-expect-date-in-date-format" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4>
<table><thead><tr><th>Config Name</th><th>Value</th></tr></thead><tbody><tr><td><code>hoodie.streamer.keygen.timebased.timestamp.type</code></td><td>&quot;DATE_STRING&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat</code></td><td>&quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->,yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ,yyyyMMdd&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.dateformat.list.delimiter.regex</code></td><td>&quot;&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.input.timezone</code></td><td>&quot;UTC&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.dateformat</code></td><td>&quot;MM/dd/yyyy&quot;</td></tr><tr><td><code>hoodie.streamer.keygen.timebased.output.timezone</code></td><td>&quot;UTC&quot;</td></tr></tbody></table>
<p>Input field value: &quot;20200401&quot; <br>
Partition path generated from key generator: &quot;04/01/2020&quot;</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-resources">Related Resources<a href="#related-resources" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3>Blogs</h3>
<ul>
<li><a href="https://www.onehouse.ai/blog/hudi-metafields-demystified" target="_blank" rel="noopener noreferrer">Hudi metafields demystified</a></li>
<li><a href="https://medium.com/@simpsons/primary-key-and-partition-generators-with-apache-hudi-f0e4d71d9d26" target="_blank" rel="noopener noreferrer">Primary key and Partition Generators with Apache Hudi</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/apache/hudi/tree/asf-site/website/versioned_docs/version-1.0.2/key_generation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cn/docs/table_types"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Table &amp; Query Types</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cn/docs/record_merger"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Record Mergers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-generators" class="table-of-contents__link toc-highlight">Key Generators</a><ul><li><a href="#simple" class="table-of-contents__link toc-highlight">SIMPLE</a></li><li><a href="#complex" class="table-of-contents__link toc-highlight">COMPLEX</a></li><li><a href="#non_partition" class="table-of-contents__link toc-highlight">NON_PARTITION</a></li><li><a href="#custom" class="table-of-contents__link toc-highlight">CUSTOM</a></li><li><a href="#timestamp" class="table-of-contents__link toc-highlight">TIMESTAMP</a></li></ul></li><li><a href="#related-resources" class="table-of-contents__link toc-highlight">Related Resources</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cn/blog/2021/07/21/streaming-data-lake-platform">Our Vision</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/concepts">Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/community/team">Team</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/releases/release-1.0.2">Releases</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/releases/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/powered-by">Who&#x27;s Using</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cn/docs/quick-start-guide">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/learn/tutorial-series">Tutorial Series</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/talks">Talks</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/videos">Video Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/faq">FAQ</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Hudi On Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cn/docs/s3_hoodie">AWS</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/gcs_hoodie">Google Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/oss_hoodie">Alibaba Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/azure_hoodie">Microsoft Azure</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/cos_hoodie">Tencent Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/docs/ibm_cos_hoodie">IBM Cloud</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cn/community/get-involved">Get Involved</a></li><li class="footer__item"><a href="https://join.slack.com/t/apache-hudi/shared_invite/zt-33fabmxb7-Q7QSUtNOHYCwUdYM8LbauA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/apache/hudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/ApacheHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCs7AhE0BWaEPZSChrBR-Muw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/apache-hudi/?viewAsMember=true" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:dev-subscribe@hudi.apache.org?Subject=SubscribeToHudi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Apache</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li><li class="footer__item"><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/asf/privacy">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="/cn/asf/telemetry">Telemetry</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://hudi.apache.org/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/cn/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cn/assets/images/logo-big.png" alt="Apache Hudi™" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2021 <a href="https://apache.org">The Apache Software Foundation</a>, Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache License, Version 2.0</a>.
      Hudi, Apache and the Apache feather logo are trademarks of The Apache Software Foundation. <a href="/docs/privacy">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>