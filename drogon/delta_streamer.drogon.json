{
    "project_name": "delta-streamer",
    "project_hdfs_dir": "/tmp/delta_streamer_${user}/",
    "deployment": {
        "artifacts": {
            "file": "packaging/hudi-utilities-bundle/target/hudi-utilities-bundle_${scala_version}-${hudi_version}.jar"
        },
        "flatten_directories": true
    },

    "launch": {
        "className": "org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer",
        "jars": [
            "https://repo1.maven.org/maven2/org/json/json/20090211/json-20090211.jar",
            "https://repo1.maven.org/maven2/org/apache/avro/avro/${avro_version}/avro-${avro_version}.jar",
            "https://repo1.maven.org/maven2/org/apache/spark/spark-avro_${scala_version}/${spark_avro_version}/spark-avro_${scala_version}-${spark_avro_version}.jar"
        ],
        "numExecutors": 64,
        "driverMemory": "${driver_memory}",
        "executorMemory": "${executor_memory}",
        "queue": "${queue}",
        "sparkEnv": "${spark_env}",
        "proxyUser": "${proxy_user}",
        "args": [
            "--base-file-format", "${base_file_format}",
            "--bootstrap-index-class", "${bootstrap_index_class}",
            "--compact-scheduling-minshare", "${compact_scheduling_minshare}",
            "--compact-scheduling-weight", "${compact_scheduling_weight}",
            "--delta-sync-scheduling-minshare", "${delta_sync_scheduling_minshare}",
            "--delta-sync-scheduling-weight", "${delta_sync_scheduling_weight}",
            "--hoodie-conf", "${hoodie_conf1}",
            "--hoodie-conf", "${hoodie_conf2}",
            "--hoodie-conf", "${hoodie_conf3}",
            "--hoodie-conf", "${hoodie_conf4}",
            "--hoodie-conf", "${hoodie_conf5}",
            "--hoodie-conf", "${hoodie_conf6}",
            "--hoodie-conf", "${hoodie_conf7}",
            "--hoodie-conf", "${hoodie_conf8}",
            "--hoodie-conf", "${hoodie_conf9}",
            "--hoodie-conf", "${hoodie_conf10}",
            "--hoodie-conf", "${hoodie_conf11}",
            "--hoodie-conf", "${hoodie_conf12}",
            "--hoodie-conf", "${hoodie_conf13}",
            "--hoodie-conf", "${hoodie_conf14}",
            "--hoodie-conf", "${hoodie_conf15}",
            "--hoodie-conf", "${hoodie_conf16}",
            "--hoodie-conf", "${hoodie_conf17}",
            "--hoodie-conf", "${hoodie_conf18}",
            "--hoodie-conf", "${hoodie_conf19}",
            "--hoodie-conf", "${hoodie_conf20}",
            "--max-pending-compactions", "${max_pending_compactions}",
            "--min-sync-interval-seconds", "${min_sync_interval_seconds}",
            "--op", "${op}",
            "--payload-class", "${payload_class}",
            "--source-class", "${source_class}",
            "--source-limit", "${source_limit}",
            "--source-ordering-field", "${source_ordering_field}",
            "--sync-tool-classes", "${sync_tool_classes}",
            "--table-type", "${table_type}",
            "--target-base-path", "${target_base_path}",
            "--target-table", "${target_table}",
            "--transformer-class", "${transformer_class}",
            "${cmd_line_op1}",
            "${cmd_line_op2}",
            "${cmd_line_op3}"
        ],
        "conf": {
            "spark.yarn.jars.exclusionRegex": ".*hudi.*",
            "spark.driver.cores": "${spark_executor_cores}",
            "spark.executor.cores": "${spark_executor_cores}",
            "spark.sql.sources.partitionOverwriteMode": "${spark_sql_sources_partitionOverwriteMode}",
            "spark.sql.hive.convertMetastoreParquet": "${spark_sql_hive_convertMetastoreParquet}",
            "spark.sql.crossJoin.enabled": "${spark_sql_crossJoin_enabled}",
            "spark.shuffle.service.enabled": "${spark_shuffle_service_enabled}",
            "spark.dynamicAllocation.enabled": "${spark_dynamicAllocation_enabled}",
            "spark.dynamicAllocation.initialExecutors": "${spark_dynamicAllocation_initialExecutors}",
            "spark.dynamicAllocation.maxExecutors": "${spark_dynamicAllocation_maxExecutors}",
            "spark.yarn.queue": "${queue}"
        }
    },

    "build": {
        "shell_command": "mvn -Dmaven.repo.local=$(pwd)/.m2/repo --show-version --batch-mode clean package -DskipTests -Dcheckstyle.skip",
        "cd_enabled": true
    },
    "variables": {
        "base_file_format": "PARQUET",
        "bootstrap_index_class": "org.apache.hudi.common.bootstrap.index.HFileBootstrapIndex",
        "compact_scheduling_minshare": "0",
        "compact_scheduling_weight": "1",
        "delta_sync_scheduling_minshare": "0",
        "delta_sync_scheduling_weight": "1",
        "hoodie_conf1": "foo=bar",
        "hoodie_conf2": "foo=bar",
        "hoodie_conf3": "foo=bar",
        "hoodie_conf4": "foo=bar",
        "hoodie_conf5": "foo=bar",
        "hoodie_conf6": "foo=bar",
        "hoodie_conf7": "foo=bar",
        "hoodie_conf8": "foo=bar",
        "hoodie_conf9": "foo=bar",
        "hoodie_conf10": "foo=bar",
        "hoodie_conf11": "foo=bar",
        "hoodie_conf12": "foo=bar",
        "hoodie_conf13": "foo=bar",
        "hoodie_conf14": "foo=bar",
        "hoodie_conf15": "foo=bar",
        "hoodie_conf16": "foo=bar",
        "hoodie_conf17": "foo=bar",
        "hoodie_conf18": "foo=bar",
        "hoodie_conf19": "foo=bar",
        "hoodie_conf20": "foo=bar",
        "max_pending_compactions": "5",
        "min_sync_interval_seconds": "0",
        "op": "UPSERT",
        "payload_class": "org.apache.hudi.common.model.OverwriteWithLatestAvroPayload",
        "source_class": "org.apache.hudi.utilities.sources.HoodieIncrSource",
        "source_limit": "9223372036854775807",
        "source_ordering_field": "ts",
        "sync_tool_classes": "org.apache.hudi.hive.HiveSyncTool",
        "table_type": "COPY_ON_WRITE",
        "target_base_path": "/user/hive/warehouse/tmp.db/hoodie_dfs_test",
        "target_table": "tmp.hoodie_dfs_test",
        "transformer_class": "org.apache.hudi.utilities.transform.SqlQueryBasedTransformer",
        "cmd_line_op1": "--enable-hive-sync",
        "cmd_line_op2": "--enable-sync",
        "cmd_line_op3": "--disable-compaction",

        "spark_env": "SPARK_24",
        "queue": "adhoc",
        "proxy_user": "",
        "user": "",
        "avro_version": "1.8.2",
        "spark_avro_version": "2.4.5",
        "scala_version": "2.11",
        "hudi_version": "0.6.1-SNAPSHOT",
        "driver_memory": "12g",
        "executor_memory": "6g",
        "spark_driver_cores": "1",
        "spark_executor_cores": "1",
        "spark_serializer": "org.apache.spark.serializer.KryoSerializer",
        "spark_sql_hive_convertMetastoreParquet": "false",
        "spark_sql_sources_partitionOverwriteMode": "dynamic",
        "spark_sql_crossJoin_enabled": "true",
        "spark_shuffle_service_enabled": "true",
        "spark_dynamicAllocation_enabled": "true",
        "spark_dynamicAllocation_initialExecutors": "32",
        "spark_dynamicAllocation_maxExecutors": "300"
    }
}